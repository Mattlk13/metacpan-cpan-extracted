(function(){var G,a,I,D,R,_,M,N,U,e,V,g,J,H,i,Z=[].indexOf||function(e){for(var a=0,t=this.length;a<t;a++)if(a in this&&this[a]===e)return a;return-1};i={},H=function(s){return $.getJSON(window.staticPrefix+"languages/"+s+".json",function(e){var a,t,n,o;for(a in i=e,t=window.datas.trOver.all)o=t[a],i[a]=o;if(window.datas.trOver[s])for(a in n=window.datas.trOver[s])o=n[a],i[a]=o;return $("[trspan]").each(function(){var e,a,t,n;for(e=$(this).attr("trspan").split(","),n=J(e.shift()),a=0,t=e.length;a<t;a++)o=e[a],n=n.replace(/%[sd]/,o);return $(this).html(n)}),$("[trmsg]").each(function(){if($(this).html(J("PE"+$(this).attr("trmsg"))),J("PE"+$(this).attr("trmsg")).match(/_hide_/))return $(this).parent().hide()}),$("[trplaceholder]").each(function(){return $(this).attr("placeholder",J($(this).attr("trplaceholder")))}),$("[localtime]").each(function(){var e;return e=new Date(1e3*$(this).attr("localtime")),$(this).text(e.toLocaleString())})})},J=function(e){return i[e]?i[e]:e},window.translate=J,R=function(){var o;return o={},$("script[type='application/init']").each(function(){var a,e,t,n;try{for(e in n=JSON.parse($(this).text()),t=[],n)t.push(o[e]=n[e]);return t}catch(e){return a=e,console.log("Parsing error",a),console.log("JSON",$(this).text())}}),console.log(o),o},D=function(e){var a;return(a=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search))?decodeURIComponent(a[1].replace(/\+/g," ")):null},g="#appslist",V=function(){return e("_appsListOrder",$(g).sortable("toArray").join())},M=function(e){return a("_oidcConsents",e,function(){return $("[partner='"+e+"']").hide()},function(e,a,t){return alert(a+" "+t)})},e=function(t,n,o,s){return $.ajax({type:"GET",url:G.scriptname+"/mysession/?gettoken",dataType:"json",error:s,success:function(e){var a;return(a={token:e.token})[t]=n,$.ajax({type:"PUT",url:G.scriptname+"/mysession/persistent",dataType:"json",data:a,success:o,error:s})}})},a=function(a,t,n,o){return $.ajax({type:"GET",url:G.scriptname+"/mysession/?gettoken",dataType:"json",error:o,success:function(e){return $.ajax({type:"DELETE",url:G.scriptname+"/mysession/persistent/"+a+"?sub="+t+"&token="+e.token,dataType:"json",success:n,error:o})}})},N=function(){var e,a,t,n,o,s,i,r,l,c,d,p,u;if(null==(l=$(g))||!G.appslistorder)return null;for(e=G.appslistorder.split(","),d=[],s=0,i=(o=l.sortable("toArray")).length;s<i;s++)d[u=o[s]]=u;for(c=0,r=e.length;c<r;c++)d[n=e[c]]&&(t=d[n],a=$(g+".ui-sortable").children("#"+t),p=$(g+".ui-sortable").children("#"+n),a.remove(),$(g+".ui-sortable").filter(":first").append(p));return 1},_=function(){return $.ajax({type:"POST",url:G.scriptname,data:{ping:1},dataType:"json",success:function(e){return null!=e.result&&1===e.result?setTimeout(_,G.pingInterval):location.reload(!0)},error:function(e,a,t){return location.reload(!0)}})},window.ping=_,I=function(e){var a,t,n,o,s;for(e+"=",t=decodeURIComponent(document.cookie).split(";"),s=new RegExp("^ *"+e+"="),n=0,o=t.length;n<o;n++)if((a=t[n]).match(s))return a=a.replace(s,"");return""},U=function(e,a,t){var n;return(n=new Date).setTime(n.getTime()+864e5*t),document.cookie=e+"="+a+"; expires="+n.toUTCString()+"; path=/"},G={},$(window).on("load",function(){var e,a,t,n,o,s,i,r,d,l,c,p,u,g,f,h,w,m,y,v,b,k,x,C,O,L,T,j,E,S,P,z,A;if(G=R(),"datas"in window&&"choicetab"in window.datas&&(G.choicetab=window.datas.choicetab),window.datas=G,$("#appslist").sortable({axis:"y",cursor:"move",opacity:.5,revert:!0,items:"> div.category",update:function(){return V()}}),N(),$("div.message").fadeIn("slow"),$("input[name=timezone]").val(-(new Date).getTimezoneOffset()/60),k=$("#menu").tabs({active:0}),(b=$('#menu a[href="#'+G.displaytab+'"]').parent().index())<0&&(b=0),k.tabs("option","active",b),n=$("#authMenu").tabs({active:0}),(t=$('#authMenu a[href="#'+G.displaytab+'"]').parent().index())<0&&(t=0),n.tabs("option","active",t),G.choicetab&&n.tabs("option","active",$('#authMenu a[href="#'+G.choicetab+'"]').parent().index()),G.login?$("input[type=password]:first").focus():0===$("input[autofocus]").length&&$("input[type!=hidden]:first").focus(),G.newwindow&&$("#appslist a").attr("target","_blank"),$("p.removeOther").length&&(e=$("#form").attr("action"),x=$("#form").attr("method"),console.log("method=",x),r="",$("#form input[type=hidden]")&&(console.log("Parse hidden values"),$("#form input[type=hidden]").each(function(e){return console.log(" ->",$(this).attr("name"),$(this).val()),r+="&"+$(this).attr("name")+"="+$(this).val()})),o="",e&&(console.log("action=",e),-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):o=e+"?",o+=r,r=""),y=$("p.removeOther a").attr("href")+"&method="+x+r,o&&(y+="&url="+btoa(o)),$("p.removeOther a").attr("href",y)),window.location.search&&((j=D("llnglanguage"))&&console.log("Get lang from parameter"),1===(A=D("setCookieLang"))&&console.log("Set lang cookie")),c||(c=I("llnglanguage"))&&!j&&console.log("Get lang from cookie"),c)Z.call(window.availableLanguages,c)<0&&(c=window.availableLanguages[0],j||console.log("Lang not available -> Get default lang"));else if(navigator){for(u=[],g=[],L=[navigator.language],navigator.languages&&(L=navigator.languages),l=0,f=(S=window.availableLanguages).length;l<f;l++)a=S[l],p+='<img class="langicon" src="'+window.staticPrefix+"common/"+a+'.png" title="'+a+'" alt="['+a+']"> ';for(v=0,h=L.length;v<h;v++)for(O=L[v],console.log("Navigator lang",O),C=0,w=(P=window.availableLanguages).length;C<w;C++)a=P[C],console.log(" Available lang",a),E=new RegExp("^"+a+"-?"),O.match(E)?(console.log("  Matching lang =",a),u.push(a)):a.substring(0,1)===O.substring(0,1)&&g.push(a);(c=u[0]?u[0]:g[0]?g[0]:window.availableLanguages[0])&&!j&&console.log("Get lang from navigator")}else(c=window.availableLanguages[0])&&!j&&console.log("Get lang from window");for(j?(Z.call(window.availableLanguages,j)<0&&(console.log("Lang not available -> Get default lang"),j=window.availableLanguages[0]),console.log("Selected lang ->",j),A&&(console.log("Set cookie lang ->",j),U("llnglanguage",j)),H(j)):(console.log("Selected lang ->",c),U("llnglanguage",c),H(c)),p="",T=0,m=(z=window.availableLanguages).length;T<m;T++)a=z[T],p+='<img class="langicon" src="'+window.staticPrefix+"common/"+a+'.png" title="'+a+'" alt="['+a+']"> ';return $("#languages").html(p),$(".langicon").on("click",function(){return c=$(this).attr("title"),U("llnglanguage",c),H(c)}),d=function(e){var a;return 47<(a=e.charCodeAt(0))&&a<58||64<a&&a<91||96<a&&a<123},s=function(e){var a,t,n,o,s,i,r,l,c;if(l=!0,0<window.datas.ppolicy.minsize&&(e.length>=window.datas.ppolicy.minsize?($("#ppolicy-minsize-feedback").addClass("fa-check text-success"),$("#ppolicy-minsize-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minsize-feedback").removeClass("fa-check text-success"),$("#ppolicy-minsize-feedback").addClass("fa-times text-danger"),l=!1)),0<window.datas.ppolicy.minupper&&((c=e.match(/[A-Z]/g))&&c.length>=window.datas.ppolicy.minupper?($("#ppolicy-minupper-feedback").addClass("fa-check text-success"),$("#ppolicy-minupper-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minupper-feedback").removeClass("fa-check text-success"),$("#ppolicy-minupper-feedback").addClass("fa-times text-danger"),l=!1)),0<window.datas.ppolicy.minlower&&((s=e.match(/[a-z]/g))&&s.length>=window.datas.ppolicy.minlower?($("#ppolicy-minlower-feedback").addClass("fa-check text-success"),$("#ppolicy-minlower-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minlower-feedback").removeClass("fa-check text-success"),$("#ppolicy-minlower-feedback").addClass("fa-times text-danger"),l=!1)),0<window.datas.ppolicy.mindigit&&((a=e.match(/[0-9]/g))&&a.length>=window.datas.ppolicy.mindigit?($("#ppolicy-mindigit-feedback").addClass("fa-check text-success"),$("#ppolicy-mindigit-feedback").removeClass("fa-times text-danger")):($("#ppolicy-mindigit-feedback").removeClass("fa-check text-success"),$("#ppolicy-mindigit-feedback").addClass("fa-times text-danger"),l=!1)),window.datas.ppolicy.allowedspechar){for(i=window.datas.ppolicy.allowedspechar.replace(/\s/g,""),t=!1,n=0,o=e.length;n<o;)d(e.charAt(n))||i.indexOf(e.charAt(n))<0&&(t=!0),n++;!1===t?($("#ppolicy-allowedspechar-feedback").addClass("fa-check text-success"),$("#ppolicy-allowedspechar-feedback").removeClass("fa-times text-danger")):($("#ppolicy-allowedspechar-feedback").removeClass("fa-check text-success"),$("#ppolicy-allowedspechar-feedback").addClass("fa-times text-danger"),l=!1)}if(0<window.datas.ppolicy.minspechar&&window.datas.ppolicy.allowedspechar){for(r=0,i=window.datas.ppolicy.allowedspechar.replace(/\s/g,""),n=0;n<e.length;)0<=i.indexOf(e.charAt(n))&&r++,n++;r>=window.datas.ppolicy.minspechar?($("#ppolicy-minspechar-feedback").addClass("fa-check text-success"),$("#ppolicy-minspechar-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minspechar-feedback").removeClass("fa-check text-success"),$("#ppolicy-minspechar-feedback").addClass("fa-times text-danger"),l=!1)}l?($(".ppolicy").removeClass("border-danger").addClass("border-success"),$("#newpassword")[0].setCustomValidity("")):($(".ppolicy").removeClass("border-success").addClass("border-danger"),$("#newpassword")[0].setCustomValidity(J("PE28")))},null!=window.datas.ppolicy&&(s(""),$("#newpassword").keyup(function(e){s(e.target.value)})),i=function(){return $("#confirmpassword")[0].value===$("#newpassword")[0].value?($("#confirmpassword")[0].setCustomValidity(""),!0):($("#confirmpassword")[0].setCustomValidity(J("PE34")),!1)},$("#newpassword").change(i),$("#confirmpassword").change(i),G.pingInterval&&0<G.pingInterval&&window.setTimeout(_,G.pingInterval),$(".localeDate").each(function(){var e;return e=new Date(1e3*$(this).attr("val")),$(this).text(e.toLocaleString())}),$(".oidcConsent").on("click",function(){return M($(this).attr("partner"))}),$("#show-hide-button").on("click",function(){return"password"===$("#newpassword").attr("type")?(console.log("Show passwords"),$("#newpassword").attr("type","input"),$("#confirmpassword").attr("type","input"),$("#show-hide-icon-button").removeClass("fa-eye"),$("#show-hide-icon-button").addClass("fa-eye-slash")):(console.log("Hide passwords"),$("#newpassword").attr("type","password"),$("#confirmpassword").attr("type","password"),$("#show-hide-icon-button").removeClass("fa-eye-slash"),$("#show-hide-icon-button").addClass("fa-eye"))})})}).call(this);