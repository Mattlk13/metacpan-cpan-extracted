!function(){var O,t,E,L,j,D,I,G,R,e,V,d,q=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},s={},o={},_=function(e,t){switch(o[e]=t,$("#"+e).removeClass("fa-times fa-check fa-spinner fa-pulse fa-info-circle fa-question-circle text-danger text-success text-info text-secondary"),$("#"+e).attr("role","status"),t){case"good":$("#"+e).addClass("fa-check text-success");break;case"bad":$("#"+e).addClass("fa-times text-danger"),$("#"+e).attr("role","alert");break;case"unknown":$("#"+e).addClass("fa-question-circle text-secondary");break;case"waiting":$("#"+e).addClass("fa-spinner fa-pulse text-secondary");break;case"info":$("#"+e).addClass("fa-info-circle text-info")}return Object.values(o).every(function(e){return"good"===e||"info"===e})?($(".ppolicy").removeClass("border-danger").addClass("border-success"),null!=(t=$("#newpassword").get(0))?t.setCustomValidity(""):void 0):($(".ppolicy").removeClass("border-success").addClass("border-danger"),null!=(t=$("#newpassword").get(0))?t.setCustomValidity(A("PE28")):void 0)},M=function(r){return $.getJSON(window.staticPrefix+"languages/"+r+".json",function(e){var t,o,n,a;for(t in s=e,o=window.datas.trOver.all)a=o[t],s[t]=a;if(window.datas.trOver[r])for(t in n=window.datas.trOver[r])a=n[t],s[t]=a;return $("[trspan]").each(function(){for(var e=$(this).attr("trspan").split(","),t=A(e.shift()),o=0,n=e.length;o<n;o++)a=e[o],t=t.replace(/%[sd]/,a);return $(this).html(t)}),$("[trmsg]").each(function(){if($(this).html(A("PE"+$(this).attr("trmsg"))),A("PE"+$(this).attr("trmsg")).match(/_hide_/))return $(this).parent().hide()}),$("[trattribute]").each(function(){for(var e,t,o=$(this).attr("trattribute").trim().split(/\s+/),n=0,a=o.length;n<a;n++)e=(t=o[n].split(":"))[0],t=t[1],e&&t&&$(this).attr(e,A(t));return!0}),$("[trplaceholder]").each(function(){var e=A($(this).attr("trplaceholder"));return $(this).attr("placeholder",e),$(this).attr("aria-label",e)}),$("[localtime]").each(function(){var e=new Date(1e3*$(this).attr("localtime"));return $(this).text(e.toLocaleString())})})},A=function(e){return s[e]||e};window.translate=A,j=function(){var n={};return $("script[type='application/init']").each(function(){var e,t,o;try{for(e in o=JSON.parse($(this).text()),t=[],o)t.push(n[e]=o[e]);return t}catch(e){return console.log("Parsing error",e),console.log("JSON",$(this).text())}}),console.log(n),n},L=function(e){e=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return e?decodeURIComponent(e[1].replace(/\+/g," ")):null},d="#appslist",V=function(){return e("_appsListOrder",$(d).sortable("toArray").join())},I=function(e){return t("_oidcConsents",e,function(){return $("[partner='"+e+"']").hide()},function(e,t,o){return alert(t+" "+o)})},e=function(t,o,n,a){return $.ajax({type:"GET",url:scriptname+"mysession/?gettoken",dataType:"json",error:a,success:function(e){e={token:e.token};return e[t]=o,$.ajax({type:"PUT",url:scriptname+"mysession/persistent",dataType:"json",data:e,success:n,error:a})}})},t=function(t,o,n,a){return $.ajax({type:"GET",url:scriptname+"mysession/?gettoken",dataType:"json",error:a,success:function(e){return $.ajax({type:"DELETE",url:scriptname+"mysession/persistent/"+t+"?sub="+o+"&token="+e.token,dataType:"json",success:n,error:a})}})},G=function(){var e,t,o,n,a,r,s,i,l,c,u=$(d);if(null==u||!O.appslistorder)return null;for(e=O.appslistorder.split(","),i=[],t=0,r=(n=u.sortable("toArray")).length;t<r;t++)i[c=n[t]]=c;for(a=0,s=e.length;a<s;a++)i[l=e[a]]&&(o=i[l],o=$(d+".ui-sortable").children("#"+o),l=$(d+".ui-sortable").children("#"+l),o.remove(),$(d+".ui-sortable").filter(":first").append(l));return 1},D=function(){return $.ajax({type:"POST",url:scriptname,data:{ping:1},dataType:"json",success:function(e){return null!=e.result&&1===e.result?setTimeout(D,O.pingInterval):location.reload(!0)},error:function(e,t,o){return location.reload(!0)}})},window.ping=D,E=function(e){for(var t,o=decodeURIComponent(document.cookie).split(";"),n=new RegExp("^ *"+e+"="),a=0,r=o.length;a<r;a++)if((t=o[a]).match(n))return t=t.replace(n,"");return""},R=function(e,t,o){var n=O.sameSite,a=O.cookieSecure,e=e+"="+t+"; path=/; SameSite="+n;return o&&((t=new Date).setTime(t.getTime()+864e5*o),e+="; expires="+t.toUTCString()),a&&(e+="; Secure"),document.cookie=e},O={},$(window).on("load",function(){var e,t,o,n,a,r,s,i,l,c,u,d,p,g,f,w,h,m,v,y,b,k,x,C,T,S,P;if(O=j(),"datas"in window&&"choicetab"in window.datas&&(O.choicetab=window.datas.choicetab),window.datas=O,$("#appslist").sortable({axis:"y",cursor:"move",opacity:.5,revert:!0,items:"> div.category",update:V}),G(),$("div.message").fadeIn("slow"),$("input[name=timezone]").val(-(new Date).getTimezoneOffset()/60),P=$("#menu").tabs({active:0}),h=$('#menu a[href="#'+O.displaytab+'"]').parent().index(),P.tabs("option","active",h=h<0?0:h),P=$("#authMenu").tabs({active:0}),h=$('#authMenu a[href="#'+O.displaytab+'"]').parent().index(),P.tabs("option","active",h=h<0?0:h),O.choicetab&&P.tabs("option","active",$('#authMenu a[href="#'+O.choicetab+'"]').parent().index()),O.login?$("input[type=password]:first").focus():0===$("input[autofocus]").length&&$("input[type!=hidden]:first").focus(),O.newwindow&&$("#appslist a").attr("target","_blank"),$("p.removeOther").length&&(h=$("#form").attr("action"),P=$("#form").attr("method"),console.log("method=",P),a="",$("#form input[type=hidden]")&&(console.log("Parse hidden values"),$("#form input[type=hidden]").each(function(e){return console.log(" ->",$(this).attr("name"),$(this).val()),a+="&"+$(this).attr("name")+"="+$(this).val()})),o="",h&&(console.log("action=",h),-1!==h.indexOf("?")?h.substring(0,h.indexOf("?")):o=h+"?",o+=a,a=""),h=$("p.removeOther a").attr("href")+"&method="+P+a,o&&(h+="&url="+btoa(o)),$("p.removeOther a").attr("href",h)),window.location.search&&((b=L("llnglanguage"))&&console.log("Get lang from parameter"),1===(S=L("setCookieLang")))&&console.log("Set lang cookie"),i||(i=E("llnglanguage"))&&!b&&console.log("Get lang from cookie"),i)q.call(window.availableLanguages,i)<0&&(i=window.availableLanguages[0],b||console.log("Lang not available -> Get default lang"));else if(navigator){for(c=[],u=[],y=[navigator.language],navigator.languages&&(y=navigator.languages),r=0,d=(x=window.availableLanguages).length;r<d;r++)e=x[r],l+='<img class="langicon" src="'+window.staticPrefix+"common/"+e+'.png" title="'+e+'" alt="['+e+']"> ';for(s=0,p=y.length;s<p;s++)for(v=y[s],console.log("Navigator lang",v),w=0,g=(C=window.availableLanguages).length;w<g;w++)e=C[w],console.log(" Available lang",e),k=new RegExp("^"+e+"-?"),v.match(k)?(console.log("  Matching lang =",e),c.push(e)):e.substring(0,1)===v.substring(0,1)&&u.push(e);(i=c[0]||u[0]||window.availableLanguages[0])&&!b&&console.log("Get lang from navigator")}else(i=window.availableLanguages[0])&&!b&&console.log("Get lang from window");for(b?(q.call(window.availableLanguages,b)<0&&(console.log("Lang not available -> Get default lang"),b=window.availableLanguages[0]),console.log("Selected lang ->",b),S&&(console.log("Set cookie lang ->",b),R("llnglanguage",b,3650)),M(b)):(console.log("Selected lang ->",i),M(i)),l="",m=0,f=(T=window.availableLanguages).length;m<f;m++)e=T[m],l+='<img class="langicon" src="'+window.staticPrefix+"common/"+e+'.png" title="'+e+'" alt="['+e+']"> ';return $("#languages").html(l),$(".langicon").on("click",function(){return i=$(this).attr("title"),R("llnglanguage",i,3650),M(i)}),t=function(e,t){var o=jQuery.Event("checkpassword"),e={password:e,evType:t,setResult:_};return $(document).trigger(o,e)},null!=window.datas.ppolicy&&$("#newpassword").length&&(t(""),$("#newpassword").keyup(function(e){t(e.target.value)}),$("#newpassword").focusout(function(e){t(e.target.value,"focusout")})),P=function(e){return e.target.checked?($("#newpassword").off("keyup"),null!=(e=$("#newpassword").get(0))?e.setCustomValidity(""):void 0):($("#newpassword").keyup(function(e){t(e.target.value)}),t(""))},o=function(){var e;return(null!=(e=$("#confirmpassword").get(0))?e.value:void 0)===(null!=(e=$("#newpassword").get(0))?e.value:void 0)?(null!=(e=$("#confirmpassword").get(0))&&e.setCustomValidity(""),!0):(null!=(e=$("#confirmpassword").get(0))&&e.setCustomValidity(A("PE34")),!1)},$("#newpassword").change(o),$("#confirmpassword").change(o),null!=window.datas.ppolicy&&$("#newpassword").length&&$("#reset").change(P),$(".localeDate").each(function(){var e=new Date(1e3*$(this).attr("val"));return $(this).text(e.toLocaleString())}),$(".oidcConsent").on("click",function(){return I($(this).attr("partner"))}),O.pingInterval&&0<O.pingInterval&&window.setTimeout(D,O.pingInterval),O.enablePasswordDisplay&&(n="",O.dontStorePassword?($(".toggle-password").on("mousedown touchstart",function(){return n=(n=$(this).attr("id")).replace(/^toggle_/,""),console.log("Display",n),$(this).toggleClass("fa-eye fa-eye-slash"),$("input[name="+n+"]").attr("class","form-control")}),$(".toggle-password").on("mouseup touchend",function(){if($(this).toggleClass("fa-eye fa-eye-slash"),$("input[name="+n+"]").get(0).value)return $("input[name="+n+"]").attr("class","form-control key")})):($(".toggle-password").on("mousedown touchstart",function(){return n=(n=$(this).attr("id")).replace(/^toggle_/,""),console.log("Display",n),$(this).toggleClass("fa-eye fa-eye-slash"),$("input[name="+n+"]").attr("type","text")}),$(".toggle-password").on("mouseup touchend",function(){return $(this).toggleClass("fa-eye fa-eye-slash"),$("input[name="+n+"]").attr("type","password")}))),$("#reset").change(function(){var e=$(this).prop("checked");return console.log("Reset is checked",e),!0===e?($("#ppolicy").hide(),$("#newpasswords").hide(),$("#newpassword").removeAttr("required"),$("#confirmpassword").removeAttr("required"),null!=(e=$("#confirmpassword").get(0))?e.setCustomValidity(""):void 0):($("#ppolicy").show(),$("#newpasswords").show(),$("#newpassword").attr("required",!0),$("#confirmpassword").attr("required",!0),(null!=(e=$("#confirmpassword").get(0))?e.value:void 0)===(null!=(e=$("#newpassword").get(0))?e.value:void 0)?null!=(e=$("#confirmpassword").get(0))?e.setCustomValidity(""):void 0:null!=(e=$("#confirmpassword").get(0))?e.setCustomValidity(A("PE34")):void 0)}),$("#passwordfield").on("input",function(){return $("#passwordfield").get(0).value&&O.dontStorePassword?$("#passwordfield").attr("class","form-control key"):$("#passwordfield").attr("class","form-control")}),$("#oldpassword").on("input",function(){return $("#oldpassword").get(0).value&&O.dontStorePassword?$("#oldpassword").attr("class","form-control key"):$("#oldpassword").attr("class","form-control")}),$("#newpassword").on("input",function(){return $("#newpassword").get(0).value&&O.dontStorePassword?$("#newpassword").attr("class","form-control key"):$("#newpassword").attr("class","form-control")}),$("#confirmpassword").on("input",function(){return $("#confirmpassword").get(0).value&&O.dontStorePassword?$("#confirmpassword").attr("class","form-control key"):$("#confirmpassword").attr("class","form-control")}),$(".clear-finduser-field").on("click",function(){return $(this).parent().find(":input").each(function(){return console.log("Clear search field ->",$(this).attr("name")),$(this).val("")})}),$("#closefinduserform").on("click",function(){return console.log("Clear modal"),$("#finduserForm").trigger("reset")}),$("#finduserbutton").on("click",function(e){return e.preventDefault(),document.body.style.cursor="progress",e=$("#finduserForm").serialize(),console.log("Send findUser request with parameters",e),$.ajax({type:"POST",url:portal+"finduser",dataType:"json",data:e,success:function(e){var t;if(document.body.style.cursor="default",t=e.user,console.log("Suggested spoofId=",t),$("input[name=spoofId]").each(function(){return $(this).val(t)}),e.captcha&&$("#captcha").attr("src",e.captcha),e.token)return $("#finduserToken").val(e.token),$("#token").val(e.token)},error:function(e,t,o){var n;if(document.body.style.cursor="default",o&&console.log("Error",o),(n=e?JSON.parse(e.responseText):n)&&n.error)return console.log("Returned error",n)}})}),$("#btn-back-to-top").on("click",function(){return console.log("Back to top"),document.body.scrollTop=0,document.documentElement.scrollTop=0}),$(window).on("scroll",function(){return O.scrollTop&&(document.body.scrollTop>Math.abs(O.scrollTop)||document.documentElement.scrollTop>Math.abs(O.scrollTop))?$("#btn-back-to-top").css("display","block"):$("#btn-back-to-top").css("display","none")}),$(document).trigger("portalLoaded"),!0})}.call(this);