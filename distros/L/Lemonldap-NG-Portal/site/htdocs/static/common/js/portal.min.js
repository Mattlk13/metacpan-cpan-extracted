(function(){var I,a,D,R,U,V,_,M,N,e,J,g,H,Z,i,q=[].indexOf||function(e){for(var a=0,t=this.length;a<t;a++)if(a in this&&this[a]===e)return a;return-1};i={},Z=function(s){return $.getJSON(window.staticPrefix+"languages/"+s+".json",function(e){var a,t,n,o;for(a in i=e,t=window.datas.trOver.all)o=t[a],i[a]=o;if(window.datas.trOver[s])for(a in n=window.datas.trOver[s])o=n[a],i[a]=o;return $("[trspan]").each(function(){var e,a,t,n;for(e=$(this).attr("trspan").split(","),n=H(e.shift()),a=0,t=e.length;a<t;a++)o=e[a],n=n.replace(/%[sd]/,o);return $(this).html(n)}),$("[trmsg]").each(function(){if($(this).html(H("PE"+$(this).attr("trmsg"))),H("PE"+$(this).attr("trmsg")).match(/_hide_/))return $(this).parent().hide()}),$("[trplaceholder]").each(function(){return $(this).attr("placeholder",H($(this).attr("trplaceholder")))}),$("[localtime]").each(function(){var e;return e=new Date(1e3*$(this).attr("localtime")),$(this).text(e.toLocaleString())})})},H=function(e){return i[e]?i[e]:e},window.translate=H,U=function(){var o;return o={},$("script[type='application/init']").each(function(){var a,e,t,n;try{for(e in n=JSON.parse($(this).text()),t=[],n)t.push(o[e]=n[e]);return t}catch(e){return a=e,console.log("Parsing error",a),console.log("JSON",$(this).text())}}),console.log(o),o},R=function(e){var a;return(a=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search))?decodeURIComponent(a[1].replace(/\+/g," ")):null},g="#appslist",J=function(){return e("_appsListOrder",$(g).sortable("toArray").join())},_=function(e){return a("_oidcConsents",e,function(){return $("[partner='"+e+"']").hide()},function(e,a,t){return alert(a+" "+t)})},e=function(t,n,o,s){return $.ajax({type:"GET",url:I.scriptname+"/mysession/?gettoken",dataType:"json",error:s,success:function(e){var a;return(a={token:e.token})[t]=n,$.ajax({type:"PUT",url:I.scriptname+"/mysession/persistent",dataType:"json",data:a,success:o,error:s})}})},a=function(a,t,n,o){return $.ajax({type:"GET",url:I.scriptname+"/mysession/?gettoken",dataType:"json",error:o,success:function(e){return $.ajax({type:"DELETE",url:I.scriptname+"/mysession/persistent/"+a+"?sub="+t+"&token="+e.token,dataType:"json",success:n,error:o})}})},M=function(){var e,a,t,n,o,s,i,r,l,c,d,p,u;if(null==(l=$(g))||!I.appslistorder)return null;for(e=I.appslistorder.split(","),d=[],s=0,i=(o=l.sortable("toArray")).length;s<i;s++)d[u=o[s]]=u;for(c=0,r=e.length;c<r;c++)d[n=e[c]]&&(t=d[n],a=$(g+".ui-sortable").children("#"+t),p=$(g+".ui-sortable").children("#"+n),a.remove(),$(g+".ui-sortable").filter(":first").append(p));return 1},V=function(){return $.ajax({type:"POST",url:I.scriptname,data:{ping:1},dataType:"json",success:function(e){return null!=e.result&&1===e.result?setTimeout(V,I.pingInterval):location.reload(!0)},error:function(e,a,t){return location.reload(!0)}})},window.ping=V,D=function(e){var a,t,n,o,s;for(e+"=",t=decodeURIComponent(document.cookie).split(";"),s=new RegExp("^ *"+e+"="),n=0,o=t.length;n<o;n++)if((a=t[n]).match(s))return a=a.replace(s,"");return""},N=function(e,a,t){var n;return(n=new Date).setTime(n.getTime()+864e5*t),document.cookie=e+"="+a+"; expires="+n.toUTCString()+"; path=/"},I={},$(window).on("load",function(){var e,a,t,n,o,s,i,r,u,l,c,d,p,g,f,w,h,m,y,v,b,k,x,C,L,O,T,P,S,j,E,z,A,G;if(I=U(),"datas"in window&&"choicetab"in window.datas&&(I.choicetab=window.datas.choicetab),window.datas=I,$("#appslist").sortable({axis:"y",cursor:"move",opacity:.5,revert:!0,items:"> div.category",update:function(){return J()}}),M(),$("div.message").fadeIn("slow"),$("input[name=timezone]").val(-(new Date).getTimezoneOffset()/60),k=$("#menu").tabs({active:0}),(b=$('#menu a[href="#'+I.displaytab+'"]').parent().index())<0&&(b=0),k.tabs("option","active",b),n=$("#authMenu").tabs({active:0}),(t=$('#authMenu a[href="#'+I.displaytab+'"]').parent().index())<0&&(t=0),n.tabs("option","active",t),I.choicetab&&n.tabs("option","active",$('#authMenu a[href="#'+I.choicetab+'"]').parent().index()),I.login?$("input[type=password]:first").focus():0===$("input[autofocus]").length&&$("input[type!=hidden]:first").focus(),I.newwindow&&$("#appslist a").attr("target","_blank"),$("p.removeOther").length&&(e=$("#form").attr("action"),x=$("#form").attr("method"),console.log("method=",x),r="",$("#form input[type=hidden]")&&(console.log("Parse hidden values"),$("#form input[type=hidden]").each(function(e){return console.log(" ->",$(this).attr("name"),$(this).val()),r+="&"+$(this).attr("name")+"="+$(this).val()})),o="",e&&(console.log("action=",e),-1!==e.indexOf("?")?e.substring(0,e.indexOf("?")):o=e+"?",o+=r,r=""),y=$("p.removeOther a").attr("href")+"&method="+x+r,o&&(y+="&url="+btoa(o)),$("p.removeOther a").attr("href",y)),window.location.search&&((P=R("llnglanguage"))&&console.log("Get lang from parameter"),1===(A=R("setCookieLang"))&&console.log("Set lang cookie")),c||(c=D("llnglanguage"))&&!P&&console.log("Get lang from cookie"),c)q.call(window.availableLanguages,c)<0&&(c=window.availableLanguages[0],P||console.log("Lang not available -> Get default lang"));else if(navigator){for(p=[],g=[],O=[navigator.language],navigator.languages&&(O=navigator.languages),l=0,f=(j=window.availableLanguages).length;l<f;l++)a=j[l],d+='<img class="langicon" src="'+window.staticPrefix+"common/"+a+'.png" title="'+a+'" alt="['+a+']"> ';for(v=0,w=O.length;v<w;v++)for(L=O[v],console.log("Navigator lang",L),C=0,h=(E=window.availableLanguages).length;C<h;C++)a=E[C],console.log(" Available lang",a),S=new RegExp("^"+a+"-?"),L.match(S)?(console.log("  Matching lang =",a),p.push(a)):a.substring(0,1)===L.substring(0,1)&&g.push(a);(c=p[0]?p[0]:g[0]?g[0]:window.availableLanguages[0])&&!P&&console.log("Get lang from navigator")}else(c=window.availableLanguages[0])&&!P&&console.log("Get lang from window");for(P?(q.call(window.availableLanguages,P)<0&&(console.log("Lang not available -> Get default lang"),P=window.availableLanguages[0]),console.log("Selected lang ->",P),A&&(console.log("Set cookie lang ->",P),N("llnglanguage",P)),Z(P)):(console.log("Selected lang ->",c),N("llnglanguage",c),Z(c)),d="",T=0,m=(z=window.availableLanguages).length;T<m;T++)a=z[T],d+='<img class="langicon" src="'+window.staticPrefix+"common/"+a+'.png" title="'+a+'" alt="['+a+']"> ';if($("#languages").html(d),$(".langicon").on("click",function(){return c=$(this).attr("title"),N("llnglanguage",c),Z(c)}),u=function(e){var a;return 47<(a=e.charCodeAt(0))&&a<58||64<a&&a<91||96<a&&a<123},s=function(e){var a,t,n,o,s,i,r,l,c,d,p;if(d=!0,0<window.datas.ppolicy.minsize&&(e.length>=window.datas.ppolicy.minsize?($("#ppolicy-minsize-feedback").addClass("fa-check text-success"),$("#ppolicy-minsize-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minsize-feedback").removeClass("fa-check text-success"),$("#ppolicy-minsize-feedback").addClass("fa-times text-danger"),d=!1)),0<window.datas.ppolicy.minupper&&((p=e.match(/[A-Z]/g))&&p.length>=window.datas.ppolicy.minupper?($("#ppolicy-minupper-feedback").addClass("fa-check text-success"),$("#ppolicy-minupper-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minupper-feedback").removeClass("fa-check text-success"),$("#ppolicy-minupper-feedback").addClass("fa-times text-danger"),d=!1)),0<window.datas.ppolicy.minlower&&((s=e.match(/[a-z]/g))&&s.length>=window.datas.ppolicy.minlower?($("#ppolicy-minlower-feedback").addClass("fa-check text-success"),$("#ppolicy-minlower-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minlower-feedback").removeClass("fa-check text-success"),$("#ppolicy-minlower-feedback").addClass("fa-times text-danger"),d=!1)),0<window.datas.ppolicy.mindigit&&((a=e.match(/[0-9]/g))&&a.length>=window.datas.ppolicy.mindigit?($("#ppolicy-mindigit-feedback").addClass("fa-check text-success"),$("#ppolicy-mindigit-feedback").removeClass("fa-times text-danger")):($("#ppolicy-mindigit-feedback").removeClass("fa-check text-success"),$("#ppolicy-mindigit-feedback").addClass("fa-times text-danger"),d=!1)),window.datas.ppolicy.allowedspechar){for(i=window.datas.ppolicy.allowedspechar.replace(/\s/g,""),t=!1,n=0,o=e.length;n<o;)u(e.charAt(n))||i.indexOf(e.charAt(n))<0&&(t=!0),n++;!1===t?($("#ppolicy-allowedspechar-feedback").addClass("fa-check text-success"),$("#ppolicy-allowedspechar-feedback").removeClass("fa-times text-danger")):($("#ppolicy-allowedspechar-feedback").removeClass("fa-check text-success"),$("#ppolicy-allowedspechar-feedback").addClass("fa-times text-danger"),d=!1)}if(0<window.datas.ppolicy.minspechar&&window.datas.ppolicy.allowedspechar){for(r=0,i=window.datas.ppolicy.allowedspechar.replace(/\s/g,""),n=0;n<e.length;)0<=i.indexOf(e.charAt(n))&&r++,n++;r>=window.datas.ppolicy.minspechar?($("#ppolicy-minspechar-feedback").addClass("fa-check text-success"),$("#ppolicy-minspechar-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minspechar-feedback").removeClass("fa-check text-success"),$("#ppolicy-minspechar-feedback").addClass("fa-times text-danger"),d=!1)}if(0<window.datas.ppolicy.minspechar&&!window.datas.ppolicy.allowedspechar){for(n=r=0;n<e.length;)u(e.charAt(n))||r++,n++;r>=window.datas.ppolicy.minspechar?($("#ppolicy-minspechar-feedback").addClass("fa-check text-success"),$("#ppolicy-minspechar-feedback").removeClass("fa-times text-danger")):($("#ppolicy-minspechar-feedback").removeClass("fa-check text-success"),$("#ppolicy-minspechar-feedback").addClass("fa-times text-danger"),d=!1)}d?($(".ppolicy").removeClass("border-danger").addClass("border-success"),null!=(l=$("#newpassword").get(0))&&l.setCustomValidity("")):($(".ppolicy").removeClass("border-success").addClass("border-danger"),null!=(c=$("#newpassword").get(0))&&c.setCustomValidity(H("PE28")))},null!=window.datas.ppolicy&&$("#newpassword").length&&(s(""),$("#newpassword").keyup(function(e){s(e.target.value)})),G=function(e){var a;return e.target.checked?($("#newpassword").off("keyup"),null!=(a=$("#newpassword").get(0))?a.setCustomValidity(""):void 0):($("#newpassword").keyup(function(e){s(e.target.value)}),s(""))},i=function(){var e,a,t,n;return(null!=(e=$("#confirmpassword").get(0))?e.value:void 0)===(null!=(a=$("#newpassword").get(0))?a.value:void 0)?(null!=(t=$("#confirmpassword").get(0))&&t.setCustomValidity(""),!0):(null!=(n=$("#confirmpassword").get(0))&&n.setCustomValidity(H("PE34")),!1)},$("#newpassword").change(i),$("#confirmpassword").change(i),null!=window.datas.ppolicy&&$("#newpassword").length&&$("#reset").change(G),I.pingInterval&&0<I.pingInterval&&window.setTimeout(V,I.pingInterval),$(".localeDate").each(function(){var e;return e=new Date(1e3*$(this).attr("val")),$(this).text(e.toLocaleString())}),$(".oidcConsent").on("click",function(){return _($(this).attr("partner"))}),$("#show-hide-button").on("click",function(){return"password"===$("#newpassword").attr("type")?(console.log("Show passwords"),$("#newpassword").attr("type","input"),$("#confirmpassword").attr("type","input"),$("#show-hide-icon-button").removeClass("fa-eye"),$("#show-hide-icon-button").addClass("fa-eye-slash")):(console.log("Hide passwords"),$("#newpassword").attr("type","password"),$("#confirmpassword").attr("type","password"),$("#show-hide-icon-button").removeClass("fa-eye-slash"),$("#show-hide-icon-button").addClass("fa-eye"))}),window.location.href.match(/\/finduser/))return console.log("Set Portal URL: "+portal),window.history.pushState({page:"Portal"},"Portal",portal)})}).call(this);