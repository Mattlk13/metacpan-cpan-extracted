From 244d8b7a976ad1d3256cfc42dfff6ba7d607e5b2 Mon Sep 17 00:00:00 2001
From: Zakariyya Mughal <zaki.mughal@gmail.com>
Date: Mon, 25 Dec 2017 02:24:10 -0600
Subject: [PATCH] Change MSVC-specific #ifdef to Win32-specific

This aligns the headers with the rest of the library code. In
particular, this makes the needed `fz_fopen_utf8` and `fz_remove_utf8`
prototypes available.
---
 include/mupdf/fitz/system.h | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/include/mupdf/fitz/system.h b/include/mupdf/fitz/system.h
index 18d75a5c..c993a0c4 100644
--- a/include/mupdf/fitz/system.h
+++ b/include/mupdf/fitz/system.h
@@ -95,6 +95,8 @@ typedef unsigned __int64 uint64_t;
 #define SEEK_END 2
 #endif
 
+#ifdef _WIN32 /* Microsoft Windows */
+
 #ifdef _MSC_VER /* Microsoft Visual C */
 
 /* MSVC up to VS2012 */
@@ -123,6 +125,8 @@ static __inline int signbit(double x)
 #define hypotf _hypotf
 #define atoll _atoi64
 
+#endif
+
 char *fz_utf8_from_wchar(const wchar_t *s);
 wchar_t *fz_wchar_from_utf8(const char *s);
 
-- 
2.15.1

