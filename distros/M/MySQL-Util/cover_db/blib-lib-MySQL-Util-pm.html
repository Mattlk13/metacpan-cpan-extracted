<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.29
Devel::Cover is copyright 2001-2017, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: blib/lib/MySQL/Util.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">blib/lib/MySQL/Util.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c1">86.0%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td class="s">package MySQL::Util;</td></tr>
<tr><td class="h">2</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L2">3</a></div></td><td class="s">use Moose;</td></tr>
<tr><td class="h">3</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L3">3</a></div></td><td class="s">use namespace::autoclean;</td></tr>
<tr><td class="h">4</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L4">3</a></div></td><td class="s">use DBI;</td></tr>
<tr><td class="h">5</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L5">3</a></div></td><td class="s">use Carp;</td></tr>
<tr><td class="h">6</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L6">3</a></div></td><td class="s">use DBIx::DataFactory;</td></tr>
<tr><td class="h">7</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L7">3</a></div></td><td class="s">use Data::Dumper;</td></tr>
<tr><td class="h">8</td><td></td><td></td><td></td><td></td><td class="s">$Data::Dumper::Sortkeys = 1;</td></tr>
<tr><td class="h">9</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L9">3</a></div></td><td class="s">use MySQL::Util::Data::Cache;</td></tr>
<tr><td class="h">10</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L10">3</a></div></td><td class="s">use Smart::Args;</td></tr>
<tr><td class="h">11</td><td colspan="5"></td></tr><tr><td class="h">12</td><td></td><td></td><td></td><td></td><td class="s">with &#39;MySQL::Util::Data::Create&#39;;</td></tr>
<tr><td class="h">13</td><td colspan="5"></td></tr><tr><td class="h">14 - 22</td><td colspan="4"></td><td class="s"><pre>=head1 NAME

MySQL::Util - Utility functions for working with MySQL.

=head1 VERSION

Version 0.29

=cut</pre></td></tr>
<tr><td class="h">23</td><td colspan="5"></td></tr><tr><td class="h">24</td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;0.34&#39;;</td></tr>
<tr><td class="h">25</td><td colspan="5"></td></tr><tr><td class="h">26 - 75</td><td colspan="4"></td><td class="s"><pre>=head1 SYNOPSIS

=for text

 my $util = MySQL::Util-&gt;new( dsn&nbsp;&nbsp;=&gt; $ENV{DBI_DSN}, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user =&gt; $ENV{DBI_USER} );

 my $util = MySQL::Util-&gt;new( dsn&nbsp;&nbsp;=&gt; $ENV{DBI_DSN}, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user =&gt; $ENV{DBI_USER},
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;span =&gt; 1); 

 my $util = MySQL::Util-&gt;new( dbh =&gt; $dbh );
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 my $aref = $util-&gt;describe_table(&#39;mytable&#39;);
 print &quot;table: mytable\n&quot;;
 foreach my $href (@$aref) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print &quot;\t&quot;, $href-&gt;{FIELD}, &quot;\n&quot;;
 }

 my $href = $util-&gt;get_ak_constraints(&#39;mytable&#39;);
 my $href = $util-&gt;get_ak_indexes(&#39;mytable&#39;);
 my $href = $util-&gt;get_constraints(&#39;mytable&#39;);

 #
 # drop foreign keys example 1 
 # 
 
 my $fks_aref = $util-&gt;drop_fks();

 &lt; do some work here - perhaps truncate tables &gt;

 $util-&gt;apply_ddl($fks_aref);&nbsp;&nbsp;&nbsp;# this will clear the cache for us.&nbsp;&nbsp;see 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# clear_cache() for more info.

 # 
 #&nbsp;&nbsp;drop foreign keys example 2 
 #
 
 my $fks_aref = $util-&gt;drop_fks();

 my $dbh = $util-&gt;clone_dbh;
 foreach my $stmt (@$fks_aref) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;do($stmt); 
 }

 $util-&gt;clear_cache;&nbsp;&nbsp;# we modified the database ddl outside of the object so 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we need to clear the object&#39;s internal cache.&nbsp;&nbsp;see 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# clear_cache() for more info.

=cut </pre></td></tr>
<tr><td class="h">76</td><td colspan="5"></td></tr><tr><td class="h">77</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">78</td><td></td><td></td><td></td><td></td><td class="s"># public variables</td></tr>
<tr><td class="h">79</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">80</td><td colspan="5"></td></tr><tr><td class="h">81</td><td></td><td></td><td></td><td></td><td class="s">has &#39;dsn&#39; =&gt; (</td></tr>
<tr><td class="h">82</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;ro&#39;,</td></tr>
<tr><td class="h">83</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">84</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0</td></tr>
<tr><td class="h">85</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">86</td><td colspan="5"></td></tr><tr><td class="h">87</td><td></td><td></td><td></td><td></td><td class="s">has &#39;user&#39; =&gt; (</td></tr>
<tr><td class="h">88</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;ro&#39;,</td></tr>
<tr><td class="h">89</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">90</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0</td></tr>
<tr><td class="h">91</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">92</td><td colspan="5"></td></tr><tr><td class="h">93</td><td></td><td></td><td></td><td></td><td class="s">has &#39;pass&#39; =&gt; (</td></tr>
<tr><td class="h">94</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;ro&#39;,</td></tr>
<tr><td class="h">95</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0,</td></tr>
<tr><td class="h">96</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; undef</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">98</td><td colspan="5"></td></tr><tr><td class="h">99</td><td></td><td></td><td></td><td></td><td class="s">has &#39;span&#39; =&gt; (</td></tr>
<tr><td class="h">100</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;ro&#39;,</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Int&#39;,</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0,</td></tr>
<tr><td class="h">103</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; 0</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">105</td><td colspan="5"></td></tr><tr><td class="h">106</td><td></td><td></td><td></td><td></td><td class="s">has &#39;dbh&#39; =&gt; (</td></tr>
<tr><td class="h">107</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">108</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">109</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">110</td><td colspan="5"></td></tr><tr><td class="h">111</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td class="s"># private variables</td></tr>
<tr><td class="h">113</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">114</td><td colspan="5"></td></tr><tr><td class="h">115</td><td></td><td></td><td></td><td></td><td class="s">has &#39;_dbh&#39; =&gt; (</td></tr>
<tr><td class="h">116</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;ro&#39;,</td></tr>
<tr><td class="h">117</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;writer&nbsp;&nbsp;&nbsp;=&gt; &#39;_set_dbh&#39;,</td></tr>
<tr><td class="h">118</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_arg =&gt; undef,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# By setting the init_arg to undef, we make it</td></tr>
<tr><td class="h">119</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# impossible to set this attribute when creating a new object.</td></tr>
<tr><td class="h">120</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">121</td><td colspan="5"></td></tr><tr><td class="h">122</td><td></td><td></td><td></td><td></td><td class="s">has &#39;_index_cache&#39; =&gt; (</td></tr>
<tr><td class="h">123</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">124</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef[MySQL::Util::Data::Cache]&#39;,</td></tr>
<tr><td class="h">125</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_arg =&gt; undef,</td></tr>
<tr><td class="h">126</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; sub { {} }</td></tr>
<tr><td class="h">127</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">128</td><td colspan="5"></td></tr><tr><td class="h">129</td><td></td><td></td><td></td><td></td><td class="s">has &#39;_constraint_cache&#39; =&gt; (</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">131</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef[MySQL::Util::Data::Cache]&#39;,</td></tr>
<tr><td class="h">132</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_arg =&gt; undef,</td></tr>
<tr><td class="h">133</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; sub { {} }</td></tr>
<tr><td class="h">134</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">135</td><td colspan="5"></td></tr><tr><td class="h">136</td><td></td><td></td><td></td><td></td><td class="s">has &#39;_depth_cache&#39; =&gt; (</td></tr>
<tr><td class="h">137</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">139</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_arg =&gt; undef,</td></tr>
<tr><td class="h">140</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; sub { {} }</td></tr>
<tr><td class="h">141</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">142</td><td colspan="5"></td></tr><tr><td class="h">143</td><td></td><td></td><td></td><td></td><td class="s">has &#39;_describe_cache&#39; =&gt; (</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">145</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">146</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_arg =&gt; undef,</td></tr>
<tr><td class="h">147</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; sub { {} }</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">149</td><td colspan="5"></td></tr><tr><td class="h">150</td><td></td><td></td><td></td><td></td><td class="s">has &#39;_schema&#39; =&gt; (</td></tr>
<tr><td class="h">151</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">152</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">153</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0,</td></tr>
<tr><td class="h">154</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init_arg =&gt; undef,</td></tr>
<tr><td class="h">155</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">156</td><td colspan="5"></td></tr><tr><td class="h">157</td><td></td><td></td><td></td><td></td><td class="s">has _verbose_funcs =&gt; (</td></tr>
<tr><td class="h">158</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">159</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">160</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0,</td></tr>
<tr><td class="h">161</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; sub { {} },</td></tr>
<tr><td class="h">162</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">163</td><td colspan="5"></td></tr><tr><td class="h">164</td><td></td><td></td><td></td><td></td><td class="s">##############################################################################</td></tr>
<tr><td class="h">165</td><td colspan="5"></td></tr><tr><td class="h">166</td><td></td><td></td><td></td><td></td><td class="s">sub BUILD {</td></tr>
<tr><td class="h">167</td><td><div class="c3">7</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L167">7</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">168</td><td colspan="5"></td></tr><tr><td class="h">169</td><td><div class="c3">7</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L169">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined $ENV{VERBOSE_FUNCS} ) {</td></tr>
<tr><td class="h">170</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $vf = $self-&gt;_verbose_funcs;</td></tr>
<tr><td class="h">171</td><td colspan="5"></td></tr><tr><td class="h">172</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $func ( split /[,|:]/, $ENV{VERBOSE_FUNCS} ) {</td></tr>
<tr><td class="h">173</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$vf-&gt;{$func} = 1;</td></tr>
<tr><td class="h">174</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">175</td><td colspan="5"></td></tr><tr><td class="h">176</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose_funcs($vf);</td></tr>
<tr><td class="h">177</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">178</td><td colspan="5"></td></tr><tr><td class="h">179</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;dbh;</td></tr>
<tr><td class="h">180</td><td colspan="5"></td></tr><tr><td class="h">181</td><td><div class="c3">7</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L181">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$dbh ) {</td></tr>
<tr><td class="h">182</td><td colspan="5"></td></tr><tr><td class="h">183</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh = DBI-&gt;connect(</td></tr>
<tr><td class="h">184</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;dsn,</td></tr>
<tr><td class="h">185</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;user,</td></tr>
<tr><td class="h">186</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;pass,</td></tr>
<tr><td class="h">187</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">188</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RaiseError&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,</td></tr>
<tr><td class="h">189</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FetchHashKeyName =&gt; &#39;NAME_uc&#39;,</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AutoCommit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 0,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# dbd::mysql workaround</td></tr>
<tr><td class="h">191</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PrintError&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 0</td></tr>
<tr><td class="h">192</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">193</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">194</td><td colspan="5"></td></tr><tr><td class="h">195</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;{AutoCommit} = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# dbd::mysql workarounda</td></tr>
<tr><td class="h">196</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">197</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">198</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;{FetchHashKeyName} = &#39;NAME_uc&#39;;</td></tr>
<tr><td class="h">199</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">200</td><td colspan="5"></td></tr><tr><td class="h">201</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $schema = $dbh-&gt;selectrow_arrayref(&quot;select schema()&quot;)-&gt;[0];</td></tr>
<tr><td class="h">202</td><td><div class="c3">5</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L202">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($schema) {</td></tr>
<tr><td class="h">203</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_schema($schema);</td></tr>
<tr><td class="h">204</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">205</td><td colspan="5"></td></tr><tr><td class="h">206</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_set_dbh($dbh);</td></tr>
<tr><td class="h">207</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">208</td><td colspan="5"></td></tr><tr><td class="h">209</td><td></td><td></td><td></td><td></td><td class="s">#################################################################</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td class="s">#################### PRIVATE METHODS ############################</td></tr>
<tr><td class="h">211</td><td></td><td></td><td></td><td></td><td class="s">#################################################################</td></tr>
<tr><td class="h">212</td><td colspan="5"></td></tr><tr><td class="h">213</td><td></td><td></td><td></td><td></td><td class="s">#sub _get_ak_constraint_arrayref {</td></tr>
<tr><td class="h">214</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">215</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">216</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">217</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">218</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">219</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;my $href = $self-&gt;get_ak_constraints($table);</td></tr>
<tr><td class="h">220</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">221</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (defined $href-&gt;{$name}) {</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href-&gt;{$name};</td></tr>
<tr><td class="h">223</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">224</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;can&#39;t find ak constraint: $name&quot;;</td></tr>
<tr><td class="h">226</td><td></td><td></td><td></td><td></td><td class="s">#}</td></tr>
<tr><td class="h">227</td><td colspan="5"></td></tr><tr><td class="h">228</td><td></td><td></td><td></td><td></td><td class="s">sub _get_fk_column {</td></tr>
<tr><td class="h">229</td><td><div class="c3">246</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L229">246</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">230</td><td><div class="c3">246</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %a&nbsp;&nbsp;&nbsp;&nbsp;= @_;</td></tr>
<tr><td class="h">231</td><td colspan="5"></td></tr><tr><td class="h">232</td><td><div class="c3">246</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L232">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;= $a{table}&nbsp;&nbsp;|| confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">233</td><td><div class="c3">246</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L233">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $column = $a{column} || confess &quot;missing column arg&quot;;</td></tr>
<tr><td class="h">234</td><td colspan="5"></td></tr><tr><td class="h">235</td><td><div class="c3">246</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">236</td><td colspan="5"></td></tr><tr><td class="h">237</td><td><div class="c3">246</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_name ( keys %$fks_href ) {</td></tr>
<tr><td class="h">238</td><td colspan="5"></td></tr><tr><td class="h">239</td><td><div class="c3">369</div><div class="c3">369</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_href ( @{ $fks_href-&gt;{$fk_name} } ) {</td></tr>
<tr><td class="h">240</td><td colspan="5"></td></tr><tr><td class="h">241</td><td><div class="c3">369</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L241">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $fk_href-&gt;{COLUMN_NAME} eq $column ) {</td></tr>
<tr><td class="h">242</td><td><div class="c3">246</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $fk_href;</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">244</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">245</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">246</td><td colspan="5"></td></tr><tr><td class="h">247</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;couldn&#39;t find where $table.$column is part of an fk?&quot;;</td></tr>
<tr><td class="h">248</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">249</td><td colspan="5"></td></tr><tr><td class="h">250</td><td></td><td></td><td></td><td></td><td class="s">sub _get_indexes_arrayref {</td></tr>
<tr><td class="h">251</td><td><div class="c3">10</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L251">10</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">252</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift;</td></tr>
<tr><td class="h">253</td><td colspan="5"></td></tr><tr><td class="h">254</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cache = &#39;_index_cache&#39;;</td></tr>
<tr><td class="h">255</td><td colspan="5"></td></tr><tr><td class="h">256</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L256">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined( $self-&gt;$cache-&gt;{$table} ) ) {</td></tr>
<tr><td class="h">257</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;$cache-&gt;{$table}-&gt;data;</td></tr>
<tr><td class="h">258</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">259</td><td colspan="5"></td></tr><tr><td class="h">260</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">261</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $dbh-&gt;prepare(&quot;show indexes in $table&quot;);</td></tr>
<tr><td class="h">262</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute;</td></tr>
<tr><td class="h">263</td><td colspan="5"></td></tr><tr><td class="h">264</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $aref = [];</td></tr>
<tr><td class="h">265</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( my $href = $sth-&gt;fetchrow_hashref ) {</td></tr>
<tr><td class="h">266</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @$aref, {%$href} );</td></tr>
<tr><td class="h">267</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">268</td><td colspan="5"></td></tr><tr><td class="h">269</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;$cache-&gt;{$table} = MySQL::Util::Data::Cache-&gt;new( data =&gt; $aref );</td></tr>
<tr><td class="h">270</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $aref;</td></tr>
<tr><td class="h">271</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">272</td><td colspan="5"></td></tr><tr><td class="h">273</td><td></td><td></td><td></td><td></td><td class="s">sub _fq {</td></tr>
<tr><td class="h">274</td><td><div class="c3">9199</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L274">9199</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">275</td><td colspan="5"></td></tr><tr><td class="h">276</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">277</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">278</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">279</td><td colspan="5"></td></tr><tr><td class="h">280</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">281</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; { isa =&gt; &#39;Int&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optional =&gt; 1, default =&gt; 1 },</td></tr>
<tr><td class="h">282</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $schema =&gt; { isa =&gt; &#39;Str|Undef&#39;, optional =&gt; 1 };</td></tr>
<tr><td class="h">283</td><td colspan="5"></td></tr><tr><td class="h">284</td><td><div class="c3">9199</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L284">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($fq) {</td></tr>
<tr><td class="h">285</td><td><div class="c3">9127</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L285">100</a></div><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L285">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table =~ /\w\.\w/ ) {</td></tr>
<tr><td class="h">286</td><td><div class="c3">6791</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $table;</td></tr>
<tr><td class="h">287</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">288</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ($schema) {</td></tr>
<tr><td class="h">289</td><td><div class="c3">1076</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;$schema.$table&quot;;</td></tr>
<tr><td class="h">290</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">291</td><td colspan="5"></td></tr><tr><td class="h">292</td><td><div class="c3">1260</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">293</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">294</td><td colspan="5"></td></tr><tr><td class="h">295</td><td><div class="c3">72</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L295">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table =~ /^(\w+)\.(\w+)$/ ) {</td></tr>
<tr><td class="h">296</td><td><div class="c3">72</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $curr = $self-&gt;_schema;</td></tr>
<tr><td class="h">297</td><td colspan="5"></td></tr><tr><td class="h">298</td><td><div class="c3">72</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L298">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;can&#39;t remove schema name from table name $table because we &quot;</td></tr>
<tr><td class="h">299</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;are not in the same db context (incoming fq table = $table, &quot;</td></tr>
<tr><td class="h">300</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;current schema = $curr&quot;</td></tr>
<tr><td class="h">301</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $curr ne $1;</td></tr>
<tr><td class="h">302</td><td colspan="5"></td></tr><tr><td class="h">303</td><td><div class="c3">72</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $2;</td></tr>
<tr><td class="h">304</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">305</td><td colspan="5"></td></tr><tr><td class="h">306</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $table;</td></tr>
<tr><td class="h">307</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">308</td><td colspan="5"></td></tr><tr><td class="h">309</td><td></td><td></td><td></td><td></td><td class="s">sub _un_fq {</td></tr>
<tr><td class="h">310</td><td><div class="c3">45</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L310">45</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">311</td><td colspan="5"></td></tr><tr><td class="h">312</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">313</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">314</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">315</td><td colspan="5"></td></tr><tr><td class="h">316</td><td><div class="c3">45</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L316">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table =~ /^(\w+)\.(\w+)$/ ) {</td></tr>
<tr><td class="h">317</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ( $1, $2 );</td></tr>
<tr><td class="h">318</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">319</td><td colspan="5"></td></tr><tr><td class="h">320</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ( $self-&gt;_schema, $table );</td></tr>
<tr><td class="h">321</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">322</td><td colspan="5"></td></tr><tr><td class="h">323</td><td></td><td></td><td></td><td></td><td class="s">sub _get_fk_ddl {</td></tr>
<tr><td class="h">324</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L324">5</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">325</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift;</td></tr>
<tr><td class="h">326</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk&nbsp;&nbsp;&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">327</td><td colspan="5"></td></tr><tr><td class="h">328</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = &quot;show create table $table&quot;;</td></tr>
<tr><td class="h">329</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $self-&gt;_dbh-&gt;prepare($sql);</td></tr>
<tr><td class="h">330</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute;</td></tr>
<tr><td class="h">331</td><td colspan="5"></td></tr><tr><td class="h">332</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( my @a = $sth-&gt;fetchrow_array ) {</td></tr>
<tr><td class="h">333</td><td colspan="5"></td></tr><tr><td class="h">334</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $data (@a) {</td></tr>
<tr><td class="h">335</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @b = split( /\n/, $data );</td></tr>
<tr><td class="h">336</td><td colspan="5"></td></tr><tr><td class="h">337</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $item (@b) {</td></tr>
<tr><td class="h">338</td><td><div class="c3">41</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L338">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $item =~ /CONSTRAINT `$fk` FOREIGN KEY/ ) {</td></tr>
<tr><td class="h">339</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$item =~ s/^\s*//;&nbsp;&nbsp;&nbsp;&nbsp;# remove leading ws</td></tr>
<tr><td class="h">340</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$item =~ s/\s*//;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# remove trailing ws</td></tr>
<tr><td class="h">341</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$item =~ s/,$//;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# remove trailing comma</td></tr>
<tr><td class="h">342</td><td colspan="5"></td></tr><tr><td class="h">343</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &quot;alter table $table add $item&quot;;</td></tr>
<tr><td class="h">344</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">345</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">346</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">347</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">348</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">349</td><td colspan="5"></td></tr><tr><td class="h">350</td><td></td><td></td><td></td><td></td><td class="s">sub _column_exists {</td></tr>
<tr><td class="h">351</td><td><div class="c3">259</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L351">259</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">352</td><td><div class="c3">259</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %a&nbsp;&nbsp;&nbsp;&nbsp;= @_;</td></tr>
<tr><td class="h">353</td><td colspan="5"></td></tr><tr><td class="h">354</td><td><div class="c3">259</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L354">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;= $a{table}&nbsp;&nbsp;or confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">355</td><td><div class="c3">259</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L355">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $column = $a{column} or confess &quot;missing column arg&quot;;</td></tr>
<tr><td class="h">356</td><td colspan="5"></td></tr><tr><td class="h">357</td><td><div class="c3">259</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $desc_aref = $self-&gt;describe_table($table);</td></tr>
<tr><td class="h">358</td><td colspan="5"></td></tr><tr><td class="h">359</td><td><div class="c3">259</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$desc_aref) {</td></tr>
<tr><td class="h">360</td><td colspan="5"></td></tr><tr><td class="h">361</td><td><div class="c3">302</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L361">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $col_href-&gt;{FIELD} eq $column ) {</td></tr>
<tr><td class="h">362</td><td><div class="c3">259</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">363</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">364</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">365</td><td colspan="5"></td></tr><tr><td class="h">366</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">367</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">368</td><td colspan="5"></td></tr><tr><td class="h">369</td><td></td><td></td><td></td><td></td><td class="s">sub _verbose {</td></tr>
<tr><td class="h">370</td><td><div class="c3">6122</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L370">6122</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">371</td><td colspan="5"></td></tr><tr><td class="h">372</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">373</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">374</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $msg&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">375</td><td colspan="5"></td></tr><tr><td class="h">376</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">377</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $func_counter =&gt; { isa =&gt; &#39;Str&#39;, default =&gt; 0, optional =&gt; 1 };</td></tr>
<tr><td class="h">378</td><td colspan="5"></td></tr><tr><td class="h">379</td><td><div class="c3">6122</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $caller_func = ( caller(1) )[3];</td></tr>
<tr><td class="h">380</td><td><div class="c3">6122</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $caller_line = ( caller(0) )[2];</td></tr>
<tr><td class="h">381</td><td colspan="5"></td></tr><tr><td class="h">382</td><td><div class="c3">6122</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @caller_func = split( /\::/, $caller_func );</td></tr>
<tr><td class="h">383</td><td><div class="c3">6122</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $key = pop @caller_func;</td></tr>
<tr><td class="h">384</td><td colspan="5"></td></tr><tr><td class="h">385</td><td><div class="c3">6122</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L385">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;_verbose_funcs-&gt;{$key} ) {</td></tr>
<tr><td class="h">386</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;[VERBOSE] $caller_func ($caller_line) &quot;;</td></tr>
<tr><td class="h">387</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L387">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;[cnt=$func_counter]&quot; if $func_counter;</td></tr>
<tr><td class="h">388</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;\n&quot;;</td></tr>
<tr><td class="h">389</td><td colspan="5"></td></tr><tr><td class="h">390</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chomp $msg;</td></tr>
<tr><td class="h">391</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $nl ( split /\n/, $msg ) {</td></tr>
<tr><td class="h">392</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;\t$nl\n&quot;;</td></tr>
<tr><td class="h">393</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">394</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">395</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">396</td><td colspan="5"></td></tr><tr><td class="h">397</td><td></td><td></td><td></td><td></td><td class="s">sub _verbose_sql {</td></tr>
<tr><td class="h">398</td><td><div class="c3">212</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L398">212</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">399</td><td colspan="5"></td></tr><tr><td class="h">400</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">401</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">402</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">403</td><td colspan="5"></td></tr><tr><td class="h">404</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">405</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $func_counter =&gt; { isa =&gt; &#39;Int&#39;, default =&gt; 0, optional =&gt; 1 };</td></tr>
<tr><td class="h">406</td><td colspan="5"></td></tr><tr><td class="h">407</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $caller_func = ( caller(1) )[3];</td></tr>
<tr><td class="h">408</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $caller_line = ( caller(0) )[2];</td></tr>
<tr><td class="h">409</td><td colspan="5"></td></tr><tr><td class="h">410</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @caller_func = split( /\::/, $caller_func );</td></tr>
<tr><td class="h">411</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $key = pop @caller_func;</td></tr>
<tr><td class="h">412</td><td colspan="5"></td></tr><tr><td class="h">413</td><td><div class="c3">212</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L413">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;_verbose_funcs-&gt;{$key} ) {</td></tr>
<tr><td class="h">414</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;[VERBOSE] $caller_func ($caller_line) &quot;;</td></tr>
<tr><td class="h">415</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L415">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;[cnt=$func_counter]&quot; if $func_counter;</td></tr>
<tr><td class="h">416</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;\n&quot;;</td></tr>
<tr><td class="h">417</td><td colspan="5"></td></tr><tr><td class="h">418</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql = SQL::Beautify-&gt;new( query =&gt; $sql )-&gt;beautify;</td></tr>
<tr><td class="h">419</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $l ( split /\n/, $sql ) {</td></tr>
<tr><td class="h">420</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print STDERR &quot;\t$l\n&quot;;</td></tr>
<tr><td class="h">421</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">422</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">423</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">424</td><td colspan="5"></td></tr><tr><td class="h">425</td><td></td><td></td><td></td><td></td><td class="s">#################################################################</td></tr>
<tr><td class="h">426</td><td></td><td></td><td></td><td></td><td class="s">##################### PUBLIC METHODS ############################</td></tr>
<tr><td class="h">427</td><td></td><td></td><td></td><td></td><td class="s">#################################################################</td></tr>
<tr><td class="h">428</td><td colspan="5"></td></tr><tr><td class="h">429 - 446</td><td colspan="4"></td><td class="s"><pre>=head1 METHODS

All methods croak in the event of failure unless otherwise noted.

=over 

=item new( dsn&nbsp;&nbsp;=&gt; $dsn, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user =&gt; $user, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[pass =&gt; $pass], 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[span =&gt; $span]);

constructor
 * dsn&nbsp;&nbsp;- standard DBI stuff
 * user - db username
 * pass - db password
 * span - follow references that span databases (default 0)

=cut</pre></td></tr>
<tr><td class="h">447</td><td colspan="5"></td></tr><tr><td class="h">448 - 455</td><td colspan="4"></td><td class="s"><pre>=item apply_ddl( [ ... ]) 

Runs arbitrary ddl commands passed in via an array ref.

The advantage of this is it allows you to make ddl changes to the db without
having to worry about the object&#39;s internal cache (see clear_cache()).

=cut</pre></td></tr>
<tr><td class="h">456</td><td colspan="5"></td></tr><tr><td class="h">457</td><td></td><td></td><td></td><td></td><td class="s">sub apply_ddl {</td></tr>
<tr><td class="h">458</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L458">1</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">459</td><td colspan="5"></td></tr><tr><td class="h">460</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">461</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">462</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $stmts_aref =&gt; &#39;ArrayRef&#39;;</td></tr>
<tr><td class="h">463</td><td colspan="5"></td></tr><tr><td class="h">464</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $stmt (@$stmts_aref) {</td></tr>
<tr><td class="h">465</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dbh-&gt;do($stmt);</td></tr>
<tr><td class="h">466</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">467</td><td colspan="5"></td></tr><tr><td class="h">468</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;clear_cache;</td></tr>
<tr><td class="h">469</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">470</td><td colspan="5"></td></tr><tr><td class="h">471 - 486</td><td colspan="4"></td><td class="s"><pre>=item describe_column(table =&gt; $table, column =&gt; $column)

Returns a hashref for the requested column.

Hash elements for each column:

&nbsp;&nbsp;&nbsp;&nbsp;DEFAULT
&nbsp;&nbsp;&nbsp;&nbsp;EXTRA
&nbsp;&nbsp;&nbsp;&nbsp;FIELD
&nbsp;&nbsp;&nbsp;&nbsp;KEY
&nbsp;&nbsp;&nbsp;&nbsp;NULL
&nbsp;&nbsp;&nbsp;&nbsp;TYPE
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
See MySQL documentation for more info on &quot;describe &lt;table&gt;&quot;.
 
=cut</pre></td></tr>
<tr><td class="h">487</td><td colspan="5"></td></tr><tr><td class="h">488</td><td></td><td></td><td></td><td></td><td class="s">sub describe_column {</td></tr>
<tr><td class="h">489</td><td><div class="c3">259</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L489">259</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">490</td><td colspan="5"></td></tr><tr><td class="h">491</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">492</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">493</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">494</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $column =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">495</td><td colspan="5"></td></tr><tr><td class="h">496</td><td><div class="c3">259</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L496">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$self-&gt;_column_exists( table =&gt; $table, column =&gt; $column ) ) {</td></tr>
<tr><td class="h">497</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;column $column does not exist in table $table&quot;;</td></tr>
<tr><td class="h">498</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">499</td><td colspan="5"></td></tr><tr><td class="h">500</td><td><div class="c3">259</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_aref = $self-&gt;describe_table($table);</td></tr>
<tr><td class="h">501</td><td colspan="5"></td></tr><tr><td class="h">502</td><td><div class="c3">259</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$col_aref) {</td></tr>
<tr><td class="h">503</td><td><div class="c3">302</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L503">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $col_href-&gt;{FIELD} =~ /^$column$/i ) {</td></tr>
<tr><td class="h">504</td><td><div class="c3">259</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $col_href;</td></tr>
<tr><td class="h">505</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">506</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">507</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">508</td><td colspan="5"></td></tr><tr><td class="h">509 - 528</td><td colspan="4"></td><td class="s"><pre>=item describe_table($table)

Returns an arrayref of column info for a given table. 

The structure of the returned data is:

$arrayref-&gt;[ { col1 }, { col2 } ]

Hash elements for each column:

&nbsp;&nbsp;&nbsp;&nbsp;DEFAULT
&nbsp;&nbsp;&nbsp;&nbsp;EXTRA
&nbsp;&nbsp;&nbsp;&nbsp;FIELD
&nbsp;&nbsp;&nbsp;&nbsp;KEY
&nbsp;&nbsp;&nbsp;&nbsp;NULL
&nbsp;&nbsp;&nbsp;&nbsp;TYPE
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
See MySQL documentation for more info on &quot;describe &lt;table&gt;&quot;.
 
=cut</pre></td></tr>
<tr><td class="h">529</td><td colspan="5"></td></tr><tr><td class="h">530</td><td></td><td></td><td></td><td></td><td class="s">sub describe_table {</td></tr>
<tr><td class="h">531</td><td><div class="c3">1646</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L531">1646</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">532</td><td><div class="c3">1646</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift;</td></tr>
<tr><td class="h">533</td><td colspan="5"></td></tr><tr><td class="h">534</td><td><div class="c3">1646</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; 1 );</td></tr>
<tr><td class="h">535</td><td colspan="5"></td></tr><tr><td class="h">536</td><td><div class="c3">1646</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cache = &#39;_describe_cache&#39;;</td></tr>
<tr><td class="h">537</td><td colspan="5"></td></tr><tr><td class="h">538</td><td><div class="c3">1646</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L538">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined( $self-&gt;$cache-&gt;{$table} ) ) {</td></tr>
<tr><td class="h">539</td><td><div class="c3">1631</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;$cache-&gt;{$table}-&gt;data;</td></tr>
<tr><td class="h">540</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">541</td><td colspan="5"></td></tr><tr><td class="h">542</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{</td></tr>
<tr><td class="h">543</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;describe $table</td></tr>
<tr><td class="h">544</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">545</td><td colspan="5"></td></tr><tr><td class="h">546</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">547</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $dbh-&gt;prepare($sql);</td></tr>
<tr><td class="h">548</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute;</td></tr>
<tr><td class="h">549</td><td colspan="5"></td></tr><tr><td class="h">550</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @cols;</td></tr>
<tr><td class="h">551</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( my $row = $sth-&gt;fetchrow_hashref ) {</td></tr>
<tr><td class="h">552</td><td><div class="c3">29</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @cols, {%$row} );</td></tr>
<tr><td class="h">553</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">554</td><td colspan="5"></td></tr><tr><td class="h">555</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;$cache-&gt;{$table} = MySQL::Util::Data::Cache-&gt;new( data =&gt; \@cols );</td></tr>
<tr><td class="h">556</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return \@cols;</td></tr>
<tr><td class="h">557</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">558</td><td colspan="5"></td></tr><tr><td class="h">559 - 567</td><td colspan="4"></td><td class="s"><pre>=item drop_fks([$table])

Drops foreign keys for a given table or the entire database if no table is 
provided.

Returns an array ref of alter table statements to rebuild the dropped foreign 
keys on success.&nbsp;&nbsp;Returns an empty array ref if no foreign keys were found.

=cut</pre></td></tr>
<tr><td class="h">568</td><td colspan="5"></td></tr><tr><td class="h">569</td><td></td><td></td><td></td><td></td><td class="s">sub drop_fks {</td></tr>
<tr><td class="h">570</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L570">1</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">571</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift;</td></tr>
<tr><td class="h">572</td><td colspan="5"></td></tr><tr><td class="h">573</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @tables;</td></tr>
<tr><td class="h">574</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L574">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !defined($table) ) {</td></tr>
<tr><td class="h">575</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tables_aref = $self-&gt;get_tables;</td></tr>
<tr><td class="h">576</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L576">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return [] if !defined($tables_aref);</td></tr>
<tr><td class="h">577</td><td colspan="5"></td></tr><tr><td class="h">578</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@tables = @$tables_aref;</td></tr>
<tr><td class="h">579</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">580</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">581</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @tables, $table );</td></tr>
<tr><td class="h">582</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">583</td><td colspan="5"></td></tr><tr><td class="h">584</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @ret;</td></tr>
<tr><td class="h">585</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $table (@tables) {</td></tr>
<tr><td class="h">586</td><td colspan="5"></td></tr><tr><td class="h">587</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fqtn&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">588</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">589</td><td colspan="5"></td></tr><tr><td class="h">590</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk ( keys %$fks_href ) {</td></tr>
<tr><td class="h">591</td><td colspan="5"></td></tr><tr><td class="h">592</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @ret, $self-&gt;_get_fk_ddl( $table, $fk ) );</td></tr>
<tr><td class="h">593</td><td colspan="5"></td></tr><tr><td class="h">594</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{</td></tr>
<tr><td class="h">595</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alter table $table</td></tr>
<tr><td class="h">596</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drop foreign key $fk</td></tr>
<tr><td class="h">597</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">598</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dbh-&gt;do($sql);</td></tr>
<tr><td class="h">599</td><td colspan="5"></td></tr><tr><td class="h">600</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_constraint_cache-&gt;{$fqtn} = undef;</td></tr>
<tr><td class="h">601</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">602</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">603</td><td colspan="5"></td></tr><tr><td class="h">604</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return [@ret];</td></tr>
<tr><td class="h">605</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">606</td><td colspan="5"></td></tr><tr><td class="h">607 - 619</td><td colspan="4"></td><td class="s"><pre>=item get_ak_constraints($table)

Returns a hashref of the alternate key constraints for a given table.&nbsp;&nbsp;Returns
an empty hashref if none were found.&nbsp;&nbsp;The primary key is excluded from the
returned data.&nbsp;&nbsp;

The structure of the returned data is:

$hashref-&gt;{constraint_name}-&gt;[ { col1 }, { col2 } ]

See &quot;get_constraints&quot; for a list of the hash elements in each column.

=cut</pre></td></tr>
<tr><td class="h">620</td><td colspan="5"></td></tr><tr><td class="h">621</td><td></td><td></td><td></td><td></td><td class="s">sub get_ak_constraints {</td></tr>
<tr><td class="h">622</td><td><div class="c3">227</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L622">227</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">623</td><td><div class="c3">227</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L623">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift or confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">624</td><td colspan="5"></td></tr><tr><td class="h">625</td><td><div class="c3">226</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; 1 );</td></tr>
<tr><td class="h">626</td><td colspan="5"></td></tr><tr><td class="h">627</td><td><div class="c3">226</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons = $self-&gt;get_constraints($table);</td></tr>
<tr><td class="h">628</td><td colspan="5"></td></tr><tr><td class="h">629</td><td><div class="c3">224</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ret;</td></tr>
<tr><td class="h">630</td><td><div class="c3">224</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_name ( keys(%$cons) ) {</td></tr>
<tr><td class="h">631</td><td><div class="c3">451</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L631">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $cons-&gt;{$con_name}-&gt;[0]-&gt;{CONSTRAINT_TYPE} eq &#39;UNIQUE&#39; ) {</td></tr>
<tr><td class="h">632</td><td><div class="c3">11</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ret-&gt;{$con_name} = $cons-&gt;{$con_name};</td></tr>
<tr><td class="h">633</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">634</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">635</td><td colspan="5"></td></tr><tr><td class="h">636</td><td><div class="c3">224</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $ret;</td></tr>
<tr><td class="h">637</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">638</td><td colspan="5"></td></tr><tr><td class="h">639 - 650</td><td colspan="4"></td><td class="s"><pre>=item get_ak_indexes($table)

Returns a hashref of the alternate key indexes for a given table.&nbsp;&nbsp;Returns
an empty hashref if one was not found.

The structure of the returned data is:

$href-&gt;{index_name}-&gt;[ { col1 }, { col2 } ]

See get_indexes for a list of hash elements in each column.
&nbsp;&nbsp;&nbsp;&nbsp;
=cut</pre></td></tr>
<tr><td class="h">651</td><td colspan="5"></td></tr><tr><td class="h">652</td><td></td><td></td><td></td><td></td><td class="s">sub get_ak_indexs {</td></tr>
<tr><td class="h">653</td><td colspan="5"></td></tr><tr><td class="h">654</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# for backwards compatibility</td></tr>
<tr><td class="h">655</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L655">1</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">656</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;get_ak_indexes(@_);</td></tr>
<tr><td class="h">657</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">658</td><td colspan="5"></td></tr><tr><td class="h">659</td><td></td><td></td><td></td><td></td><td class="s">sub get_ak_indexes {</td></tr>
<tr><td class="h">660</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L660">4</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">661</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">662</td><td colspan="5"></td></tr><tr><td class="h">663</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L663">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">664</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">665</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">666</td><td colspan="5"></td></tr><tr><td class="h">667</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href&nbsp;&nbsp;&nbsp;&nbsp;= {};</td></tr>
<tr><td class="h">668</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $indexes = $self-&gt;get_indexes($table);</td></tr>
<tr><td class="h">669</td><td colspan="5"></td></tr><tr><td class="h">670</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $index ( keys(%$indexes) ) {</td></tr>
<tr><td class="h">671</td><td><div class="c3">15</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L671">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $indexes-&gt;{$index}-&gt;[0]-&gt;{NON_UNIQUE} == 0 ) {</td></tr>
<tr><td class="h">672</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$href-&gt;{$index} = $indexes-&gt;{$index};</td></tr>
<tr><td class="h">673</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">674</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">675</td><td colspan="5"></td></tr><tr><td class="h">676</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href;</td></tr>
<tr><td class="h">677</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">678</td><td colspan="5"></td></tr><tr><td class="h">679 - 684</td><td colspan="4"></td><td class="s"><pre>=item get_ak_names($table)

Returns an arrayref of alternate key constraints.&nbsp;&nbsp;Returns undef if none
were found.

=cut</pre></td></tr>
<tr><td class="h">685</td><td colspan="5"></td></tr><tr><td class="h">686</td><td></td><td></td><td></td><td></td><td class="s">sub get_ak_names {</td></tr>
<tr><td class="h">687</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L687">2</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">688</td><td><div class="c3">2</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L688">67</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift || confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">689</td><td colspan="5"></td></tr><tr><td class="h">690</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L690">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;has_ak($table) ) {</td></tr>
<tr><td class="h">691</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = $self-&gt;get_ak_constraints($table);</td></tr>
<tr><td class="h">692</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ( keys %$href );</td></tr>
<tr><td class="h">693</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">694</td><td colspan="5"></td></tr><tr><td class="h">695</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">696</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">697</td><td colspan="5"></td></tr><tr><td class="h">698 - 711</td><td colspan="4"></td><td class="s"><pre>=item get_constraint(table =&gt; $table, name =&gt; $constraint_name)

Returns an arrayref for the requested constraints on a given table.&nbsp;&nbsp;Throws
an error if the constraint is not found.

The structure of the returned data is:

$arrayref-&gt;[ { col1 }, { col2 } ]

Hash elements for each column:

&nbsp;&nbsp;&nbsp;&nbsp;see get_constraints()

=cut</pre></td></tr>
<tr><td class="h">712</td><td colspan="5"></td></tr><tr><td class="h">713</td><td></td><td></td><td></td><td></td><td class="s">sub get_constraint {</td></tr>
<tr><td class="h">714</td><td><div class="c3">55</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L714">55</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">715</td><td colspan="5"></td></tr><tr><td class="h">716</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">717</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">718</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">719</td><td colspan="5"></td></tr><tr><td class="h">720</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">721</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $schema =&gt; { isa =&gt; &#39;Str&#39;, optional =&gt; 1 },</td></tr>
<tr><td class="h">722</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;=&gt; { isa =&gt; &#39;Str&#39;, optional =&gt; 1 };</td></tr>
<tr><td class="h">723</td><td colspan="5"></td></tr><tr><td class="h">724</td><td><div class="c3">55</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $unfq_schema, $unfq_table, $fq_table );</td></tr>
<tr><td class="h">725</td><td colspan="5"></td></tr><tr><td class="h">726</td><td><div class="c3">55</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L726">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined $table ) {</td></tr>
<tr><td class="h">727</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( $unfq_schema, $unfq_table ) = $self-&gt;_un_fq($table);</td></tr>
<tr><td class="h">728</td><td><div class="c3">45</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L728">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($schema) {</td></tr>
<tr><td class="h">729</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L729">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $unfq_schema ne $schema ) {</td></tr>
<tr><td class="h">730</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;schema arg $schema does not match table $table&quot;;</td></tr>
<tr><td class="h">731</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">732</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">733</td><td colspan="5"></td></tr><tr><td class="h">734</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fq_table = $self-&gt;_fq(</td></tr>
<tr><td class="h">735</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $unfq_table,</td></tr>
<tr><td class="h">736</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,</td></tr>
<tr><td class="h">737</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema =&gt; $unfq_schema</td></tr>
<tr><td class="h">738</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">739</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">740</td><td colspan="5"></td></tr><tr><td class="h">741</td><td><div class="c3">55</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L741">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined $fq_table ) {</td></tr>
<tr><td class="h">742</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons_href = $self-&gt;get_constraints($fq_table);</td></tr>
<tr><td class="h">743</td><td colspan="5"></td></tr><tr><td class="h">744</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cons_name ( keys %$cons_href ) {</td></tr>
<tr><td class="h">745</td><td><div class="c3">46</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L745">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $cons_name eq $name ) {</td></tr>
<tr><td class="h">746</td><td><div class="c3">45</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $cons_href-&gt;{$cons_name};</td></tr>
<tr><td class="h">747</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">748</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">749</td><td colspan="5"></td></tr><tr><td class="h">750</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;failed to find constraint $name for table $fq_table&quot;;</td></tr>
<tr><td class="h">751</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">752</td><td colspan="5"></td></tr><tr><td class="h">753</td><td><div class="c3">10</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L753">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$schema = $self-&gt;_schema if !$schema;</td></tr>
<tr><td class="h">754</td><td colspan="5"></td></tr><tr><td class="h">755</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">756</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# search cache for the constraint name across tables</td></tr>
<tr><td class="h">757</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">758</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cache = &#39;_constraint_cache&#39;;</td></tr>
<tr><td class="h">759</td><td colspan="5"></td></tr><tr><td class="h">760</td><td><div class="c3">10</div><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $t ( keys %{ $self-&gt;$cache } ) {</td></tr>
<tr><td class="h">761</td><td colspan="5"></td></tr><tr><td class="h">762</td><td><div class="c3">18</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L762">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined( $self-&gt;$cache-&gt;{$t} ) ) {</td></tr>
<tr><td class="h">763</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $data_href = $self-&gt;$cache-&gt;{$t}-&gt;data;</td></tr>
<tr><td class="h">764</td><td colspan="5"></td></tr><tr><td class="h">765</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cons_name ( keys %$data_href ) {</td></tr>
<tr><td class="h">766</td><td><div class="c3">30</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L766">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $cons_name eq $name ) {</td></tr>
<tr><td class="h">767</td><td colspan="5"></td></tr><tr><td class="h">768</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $data_href-&gt;{$cons_name};</td></tr>
<tr><td class="h">769</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">770</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">771</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">772</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">773</td><td colspan="5"></td></tr><tr><td class="h">774</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{</td></tr>
<tr><td class="h">775</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select distinct tc.table_name</td></tr>
<tr><td class="h">776</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from information_schema.table_constraints tc</td></tr>
<tr><td class="h">777</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;&nbsp;tc.constraint_schema = &#39;$schema&#39;</td></tr>
<tr><td class="h">778</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">779</td><td colspan="5"></td></tr><tr><td class="h">780</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L780">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$self-&gt;span ) {</td></tr>
<tr><td class="h">781</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql .= qq{</td></tr>
<tr><td class="h">782</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and (referenced_table_schema = &#39;$schema&#39; or referenced_table_schema is null)</td></tr>
<tr><td class="h">783</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">784</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">785</td><td colspan="5"></td></tr><tr><td class="h">786</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">787</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $dbh-&gt;prepare($sql);</td></tr>
<tr><td class="h">788</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute;</td></tr>
<tr><td class="h">789</td><td colspan="5"></td></tr><tr><td class="h">790</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( my ($t) = $sth-&gt;fetchrow_array ) {</td></tr>
<tr><td class="h">791</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons_href = $self-&gt;get_constraints( table =&gt; $t );</td></tr>
<tr><td class="h">792</td><td colspan="5"></td></tr><tr><td class="h">793</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cons_name ( keys %$cons_href ) {</td></tr>
<tr><td class="h">794</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L794">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $cons_name eq $name ) {</td></tr>
<tr><td class="h">795</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;finish;</td></tr>
<tr><td class="h">796</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $cons_href-&gt;{$cons_name};</td></tr>
<tr><td class="h">797</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">798</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">799</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">800</td><td colspan="5"></td></tr><tr><td class="h">801</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;failed to find constraint name $name&quot;;</td></tr>
<tr><td class="h">802</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">803</td><td colspan="5"></td></tr><tr><td class="h">804 - 826</td><td colspan="4"></td><td class="s"><pre>=item get_constraints($table)

Returns a hashref of the constraints for a given table.&nbsp;&nbsp;Returns
an empty hashref if none were found.

The structure of the returned data is:

$hashref-&gt;{constraint_name}-&gt;[ { col1 }, { col2 } ]

Hash elements for each column:

&nbsp;&nbsp;&nbsp;&nbsp;CONSTRAINT_NAME
&nbsp;&nbsp;&nbsp;&nbsp;TABLE_NAME
&nbsp;&nbsp;&nbsp;&nbsp;CONSTRAINT_SCHEMA
&nbsp;&nbsp;&nbsp;&nbsp;CONSTRAINT_TYPE
&nbsp;&nbsp;&nbsp;&nbsp;COLUMN_NAME
&nbsp;&nbsp;&nbsp;&nbsp;ORDINAL_POSITION
&nbsp;&nbsp;&nbsp;&nbsp;POSITION_IN_UNIQUE_CONSTRAINT
&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_COLUMN_NAME
&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_TABLE_SCHEMA
&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_TABLE_NAME
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
=cut</pre></td></tr>
<tr><td class="h">827</td><td colspan="5"></td></tr><tr><td class="h">828</td><td></td><td></td><td></td><td></td><td class="s">sub get_constraints {</td></tr>
<tr><td class="h">829</td><td><div class="c3">3460</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L829">3460</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">830</td><td><div class="c3">3460</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L830">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift || confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">831</td><td colspan="5"></td></tr><tr><td class="h">832</td><td><div class="c3">3460</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; 1 );</td></tr>
<tr><td class="h">833</td><td colspan="5"></td></tr><tr><td class="h">834</td><td><div class="c3">3460</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $schema, $table_no_schema ) = split( /\./, $table );</td></tr>
<tr><td class="h">835</td><td colspan="5"></td></tr><tr><td class="h">836</td><td><div class="c3">3460</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cache = &#39;_constraint_cache&#39;;</td></tr>
<tr><td class="h">837</td><td colspan="5"></td></tr><tr><td class="h">838</td><td><div class="c3">3460</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L838">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined( $self-&gt;$cache-&gt;{$table} ) ) {</td></tr>
<tr><td class="h">839</td><td><div class="c3">3418</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;$cache-&gt;{$table}-&gt;data;</td></tr>
<tr><td class="h">840</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">841</td><td colspan="5"></td></tr><tr><td class="h">842</td><td><div class="c3">42</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L842">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;table &#39;$table&#39; does not exist: &quot; if !$self-&gt;table_exists($table);</td></tr>
<tr><td class="h">843</td><td colspan="5"></td></tr><tr><td class="h">844</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{</td></tr>
<tr><td class="h">845</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select kcu.constraint_name, tc.constraint_type, column_name, </td></tr>
<tr><td class="h">846</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ordinal_position, position_in_unique_constraint, referenced_table_schema,</td></tr>
<tr><td class="h">847</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;referenced_table_name, referenced_column_name, tc.constraint_schema</td></tr>
<tr><td class="h">848</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from information_schema.table_constraints tc, </td></tr>
<tr><td class="h">849</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;information_schema.key_column_usage kcu </td></tr>
<tr><td class="h">850</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where tc.table_name = &#39;$table_no_schema&#39;</td></tr>
<tr><td class="h">851</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and tc.table_name = kcu.table_name </td></tr>
<tr><td class="h">852</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and tc.constraint_name = kcu.constraint_name </td></tr>
<tr><td class="h">853</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and tc.constraint_schema = &#39;$schema&#39;</td></tr>
<tr><td class="h">854</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and kcu.constraint_schema = tc.constraint_schema </td></tr>
<tr><td class="h">855</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">856</td><td colspan="5"></td></tr><tr><td class="h">857</td><td><div class="c3">36</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L857">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$self-&gt;span ) {</td></tr>
<tr><td class="h">858</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql .= qq{</td></tr>
<tr><td class="h">859</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and (referenced_table_schema = &#39;$schema&#39; or referenced_table_schema is null)</td></tr>
<tr><td class="h">860</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">861</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">862</td><td colspan="5"></td></tr><tr><td class="h">863</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql .= qq{ order by constraint_name, ordinal_position };</td></tr>
<tr><td class="h">864</td><td colspan="5"></td></tr><tr><td class="h">865</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">866</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $dbh-&gt;prepare($sql);</td></tr>
<tr><td class="h">867</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute;</td></tr>
<tr><td class="h">868</td><td colspan="5"></td></tr><tr><td class="h">869</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = {};</td></tr>
<tr><td class="h">870</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( my $row = $sth-&gt;fetchrow_hashref ) {</td></tr>
<tr><td class="h">871</td><td colspan="5"></td></tr><tr><td class="h">872</td><td><div class="c3">72</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name = $row-&gt;{CONSTRAINT_NAME};</td></tr>
<tr><td class="h">873</td><td><div class="c3">72</div><div class="c3">63</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L873">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !defined( $href-&gt;{$name} ) ) { $href-&gt;{$name} = [] }</td></tr>
<tr><td class="h">874</td><td colspan="5"></td></tr><tr><td class="h">875</td><td><div class="c3">72</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$row-&gt;{TABLE_NAME} = $self-&gt;_fq( table =&gt; $table, fq =&gt; 0 );</td></tr>
<tr><td class="h">876</td><td colspan="5"></td></tr><tr><td class="h">877</td><td><div class="c3">72</div><div class="c3">72</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @{ $href-&gt;{$name} }, {%$row} );</td></tr>
<tr><td class="h">878</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">879</td><td colspan="5"></td></tr><tr><td class="h">880</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;$cache-&gt;{$table} = MySQL::Util::Data::Cache-&gt;new( data =&gt; $href );</td></tr>
<tr><td class="h">881</td><td><div class="c3">36</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href;</td></tr>
<tr><td class="h">882</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">883</td><td colspan="5"></td></tr><tr><td class="h">884 - 888</td><td colspan="4"></td><td class="s"><pre>=item get_dbname()

Returns the name of the current schema/database.

=cut</pre></td></tr>
<tr><td class="h">889</td><td colspan="5"></td></tr><tr><td class="h">890</td><td></td><td></td><td></td><td></td><td class="s">sub get_dbname {</td></tr>
<tr><td class="h">891</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L891">8</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">892</td><td><div class="c3">8</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L892">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;get_dbname does not take any parameters&quot; if @_;</td></tr>
<tr><td class="h">893</td><td colspan="5"></td></tr><tr><td class="h">894</td><td><div class="c3">7</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;_schema;</td></tr>
<tr><td class="h">895</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">896</td><td colspan="5"></td></tr><tr><td class="h">897 - 916</td><td colspan="4"></td><td class="s"><pre>=item get_depth($table)

Returns the table depth within the data model hierarchy.&nbsp;&nbsp;The depth is 
zero based. 

For example:

=for text

 -----------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------
 | table A |------&lt;| table B |
 -----------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------


Table A has a depth of 0 and table B has a depth of 1.&nbsp;&nbsp;In other
words, table B is one level down in the model hierarchy.

If a table has multiple parents, the parent with the highest depth wins.

=cut</pre></td></tr>
<tr><td class="h">917</td><td colspan="5"></td></tr><tr><td class="h">918</td><td></td><td></td><td></td><td></td><td class="s">sub get_depth {</td></tr>
<tr><td class="h">919</td><td><div class="c3">290</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L919">290</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">920</td><td><div class="c3">290</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L920">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift or confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">921</td><td colspan="5"></td></tr><tr><td class="h">922</td><td><div class="c3">289</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L922">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">923</td><td><div class="c3">15</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">924</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">925</td><td colspan="5"></td></tr><tr><td class="h">926</td><td><div class="c3">289</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cache = &#39;_depth_cache&#39;;</td></tr>
<tr><td class="h">927</td><td colspan="5"></td></tr><tr><td class="h">928</td><td><div class="c3">289</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L928">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined( $self-&gt;{$cache}-&gt;{$table} ) ) {</td></tr>
<tr><td class="h">929</td><td><div class="c3">270</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $self-&gt;{$cache}-&gt;{$table};</td></tr>
<tr><td class="h">930</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">931</td><td colspan="5"></td></tr><tr><td class="h">932</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">933</td><td colspan="5"></td></tr><tr><td class="h">934</td><td><div class="c3">19</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_cons = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">935</td><td colspan="5"></td></tr><tr><td class="h">936</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $depth = 0;</td></tr>
<tr><td class="h">937</td><td colspan="5"></td></tr><tr><td class="h">938</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_name ( keys(%$fk_cons) ) {</td></tr>
<tr><td class="h">939</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $parent_table =</td></tr>
<tr><td class="h">940</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fk_cons-&gt;{$fk_name}-&gt;[0]-&gt;{REFERENCED_TABLE_SCHEMA} . &#39;.&#39;</td></tr>
<tr><td class="h">941</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. $fk_cons-&gt;{$fk_name}-&gt;[0]-&gt;{REFERENCED_TABLE_NAME};</td></tr>
<tr><td class="h">942</td><td colspan="5"></td></tr><tr><td class="h">943</td><td><div class="c3">12</div><div class="c0">0</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L943">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $parent_table eq $table ) { next }&nbsp;&nbsp;&nbsp;&nbsp;# self referencing table</td></tr>
<tr><td class="h">944</td><td colspan="5"></td></tr><tr><td class="h">945</td><td><div class="c3">12</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $parent_depth = $self-&gt;get_depth($parent_table);</td></tr>
<tr><td class="h">946</td><td><div class="c3">12</div><div class="c3">9</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L946">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $parent_depth &gt;= $depth ) { $depth = $parent_depth + 1 }</td></tr>
<tr><td class="h">947</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">948</td><td colspan="5"></td></tr><tr><td class="h">949</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;{$cache}-&gt;{$table} = $depth;</td></tr>
<tr><td class="h">950</td><td colspan="5"></td></tr><tr><td class="h">951</td><td><div class="c3">18</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $depth;</td></tr>
<tr><td class="h">952</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">953</td><td colspan="5"></td></tr><tr><td class="h">954 - 960</td><td colspan="4"></td><td class="s"><pre>=item get_fk_column_names(table =&gt; $table, [name =&gt; $constraint_name])

If name is specified, returns an array of columns that participate in the
foreign key constraint.&nbsp;&nbsp;If name is not specified, returns an array of columns
that participate an any foreign key constraint on the table.

=cut</pre></td></tr>
<tr><td class="h">961</td><td colspan="5"></td></tr><tr><td class="h">962</td><td></td><td></td><td></td><td></td><td class="s">sub get_fk_column_names {</td></tr>
<tr><td class="h">963</td><td><div class="c3">215</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L963">215</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">964</td><td colspan="5"></td></tr><tr><td class="h">965</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">966</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">967</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">968</td><td colspan="5"></td></tr><tr><td class="h">969</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">970</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name =&gt; { isa =&gt; &#39;Str&#39;, optional =&gt; 1 };</td></tr>
<tr><td class="h">971</td><td colspan="5"></td></tr><tr><td class="h">972</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; 1 );</td></tr>
<tr><td class="h">973</td><td colspan="5"></td></tr><tr><td class="h">974</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @columns;</td></tr>
<tr><td class="h">975</td><td colspan="5"></td></tr><tr><td class="h">976</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">977</td><td colspan="5"></td></tr><tr><td class="h">978</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_name ( keys %$fks_href ) {</td></tr>
<tr><td class="h">979</td><td colspan="5"></td></tr><tr><td class="h">980</td><td><div class="c3">210</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L980">50</a></div></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L980">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if ( $name and $name ne $fk_name );</td></tr>
<tr><td class="h">981</td><td colspan="5"></td></tr><tr><td class="h">982</td><td><div class="c3">210</div><div class="c3">210</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_href ( @{ $fks_href-&gt;{$fk_name} } ) {</td></tr>
<tr><td class="h">983</td><td colspan="5"></td></tr><tr><td class="h">984</td><td><div class="c3">210</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col = $fk_href-&gt;{COLUMN_NAME};</td></tr>
<tr><td class="h">985</td><td><div class="c3">210</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @columns, $col );</td></tr>
<tr><td class="h">986</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">987</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">988</td><td colspan="5"></td></tr><tr><td class="h">989</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return @columns;</td></tr>
<tr><td class="h">990</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">991</td><td colspan="5"></td></tr><tr><td class="h">992 - 1005</td><td colspan="4"></td><td class="s"><pre>=item get_fk_constraints([$table])

Returns the foreign keys for a table or the entire database.

Returns a hashref of the foreign key constraints on success.&nbsp;&nbsp;Returns
an empty hashref if none were found.

The structure of the returned data is:

$hashref-&gt;{constraint_name}-&gt;[ { col1 }, { col2 } ]

See &quot;get_constraints&quot; for a list of the hash elements in each column.

=cut</pre></td></tr>
<tr><td class="h">1006</td><td colspan="5"></td></tr><tr><td class="h">1007</td><td></td><td></td><td></td><td></td><td class="s">sub get_fk_constraints {</td></tr>
<tr><td class="h">1008</td><td><div class="c3">2317</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1008">2317</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">1009</td><td colspan="5"></td></tr><tr><td class="h">1010</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1011</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1012</td><td colspan="5"></td></tr><tr><td class="h">1013</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">1014</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; { isa =&gt; &#39;Str&#39;, optional =&gt; 1 };</td></tr>
<tr><td class="h">1015</td><td colspan="5"></td></tr><tr><td class="h">1016</td><td><div class="c3">2317</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1016">100</a></div></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--condition.html#L1016">100</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( defined($table) and $table !~ /\./ ) {</td></tr>
<tr><td class="h">1017</td><td><div class="c3">252</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1018</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1019</td><td colspan="5"></td></tr><tr><td class="h">1020</td><td><div class="c3">2317</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @tables;</td></tr>
<tr><td class="h">1021</td><td><div class="c3">2317</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1021">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !defined($table) ) {</td></tr>
<tr><td class="h">1022</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tables_aref = $self-&gt;get_tables;</td></tr>
<tr><td class="h">1023</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1023">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return {} if !defined($tables_aref);</td></tr>
<tr><td class="h">1024</td><td colspan="5"></td></tr><tr><td class="h">1025</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@tables = @$tables_aref;</td></tr>
<tr><td class="h">1026</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1027</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1028</td><td><div class="c3">2314</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @tables, $table );</td></tr>
<tr><td class="h">1029</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1030</td><td colspan="5"></td></tr><tr><td class="h">1031</td><td><div class="c3">2317</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = {};</td></tr>
<tr><td class="h">1032</td><td colspan="5"></td></tr><tr><td class="h">1033</td><td><div class="c3">2317</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $table (@tables) {</td></tr>
<tr><td class="h">1034</td><td colspan="5"></td></tr><tr><td class="h">1035</td><td><div class="c3">2341</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons_href = $self-&gt;get_constraints($table);</td></tr>
<tr><td class="h">1036</td><td><div class="c3">2338</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $cons_name ( keys(%$cons_href) ) {</td></tr>
<tr><td class="h">1037</td><td colspan="5"></td></tr><tr><td class="h">1038</td><td><div class="c3">4811</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons_aref = $cons_href-&gt;{$cons_name};</td></tr>
<tr><td class="h">1039</td><td><div class="c3">4811</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$cons_aref) {</td></tr>
<tr><td class="h">1040</td><td colspan="5"></td></tr><tr><td class="h">1041</td><td><div class="c3">5695</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = $col_href-&gt;{CONSTRAINT_TYPE};</td></tr>
<tr><td class="h">1042</td><td colspan="5"></td></tr><tr><td class="h">1043</td><td><div class="c3">5695</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1043">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $type eq &#39;FOREIGN KEY&#39; ) {</td></tr>
<tr><td class="h">1044</td><td><div class="c3">2453</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$href-&gt;{$cons_name} = [@$cons_aref];</td></tr>
<tr><td class="h">1045</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1046</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1047</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1048</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1049</td><td colspan="5"></td></tr><tr><td class="h">1050</td><td><div class="c3">2314</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href;</td></tr>
<tr><td class="h">1051</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1052</td><td colspan="5"></td></tr><tr><td class="h">1053 - 1065</td><td colspan="4"></td><td class="s"><pre>=item get_fk_indexes($table)

Returns a hashref of the foreign key indexes for a given table.&nbsp;&nbsp;Returns
an empty hashref if none were found.&nbsp;&nbsp;In order to qualify as a fk index, 
it must have a corresponding fk constraint.&nbsp;&nbsp;

The structure of the returned data is:

$hashref-&gt;{index_name}-&gt;[ { col1 }, { col2 } ]

See &quot;get_indexes&quot; for a list of the hash elements in each column.

=cut</pre></td></tr>
<tr><td class="h">1066</td><td colspan="5"></td></tr><tr><td class="h">1067</td><td></td><td></td><td></td><td></td><td class="s">sub get_fk_indexes {</td></tr>
<tr><td class="h">1068</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1068">3</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1069</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">1070</td><td colspan="5"></td></tr><tr><td class="h">1071</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1071">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">1072</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1073</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1074</td><td colspan="5"></td></tr><tr><td class="h">1075</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href&nbsp;&nbsp;&nbsp;&nbsp;= {};</td></tr>
<tr><td class="h">1076</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons&nbsp;&nbsp;&nbsp;&nbsp;= $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">1077</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $indexes = $self-&gt;get_indexes($table);</td></tr>
<tr><td class="h">1078</td><td colspan="5"></td></tr><tr><td class="h">1079</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_name ( keys(%$cons) ) {</td></tr>
<tr><td class="h">1080</td><td><div class="c3">2</div><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @con_cols = @{ $cons-&gt;{$con_name} };</td></tr>
<tr><td class="h">1081</td><td colspan="5"></td></tr><tr><td class="h">1082</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $index_name ( keys(%$indexes) ) {</td></tr>
<tr><td class="h">1083</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @index_cols = @{ $indexes-&gt;{$index_name} };</td></tr>
<tr><td class="h">1084</td><td colspan="5"></td></tr><tr><td class="h">1085</td><td><div class="c3">6</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L1085">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( scalar(@con_cols) == scalar(@index_cols) ) {</td></tr>
<tr><td class="h">1086</td><td colspan="5"></td></tr><tr><td class="h">1087</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $match = 1;</td></tr>
<tr><td class="h">1088</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for ( my $i = 0 ; $i &lt; scalar(@con_cols) ; $i++ ) {</td></tr>
<tr><td class="h">1089</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1089">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $index_cols[$i]-&gt;{COLUMN_NAME} ne</td></tr>
<tr><td class="h">1090</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$con_cols[$i]-&gt;{COLUMN_NAME} )</td></tr>
<tr><td class="h">1091</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1092</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$match = 0;</td></tr>
<tr><td class="h">1093</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">1094</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1095</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1096</td><td colspan="5"></td></tr><tr><td class="h">1097</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1097">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($match) {</td></tr>
<tr><td class="h">1098</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$href-&gt;{$index_name} = $indexes-&gt;{$index_name};</td></tr>
<tr><td class="h">1099</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;last;</td></tr>
<tr><td class="h">1100</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1101</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1102</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1103</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1104</td><td colspan="5"></td></tr><tr><td class="h">1105</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href;</td></tr>
<tr><td class="h">1106</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1107</td><td colspan="5"></td></tr><tr><td class="h">1108 - 1132</td><td colspan="4"></td><td class="s"><pre>=item get_indexes($table)

Returns a hashref of the indexes for a given table.&nbsp;&nbsp;Returns
an empty hashref if none were found.

The structure of the returned data is:

$href-&gt;{index_name}-&gt;[ { col1 }, { col2 } ]

Hash elements for each column:

&nbsp;&nbsp;&nbsp;&nbsp;CARDINALITY
&nbsp;&nbsp;&nbsp;&nbsp;COLLATION
&nbsp;&nbsp;&nbsp;&nbsp;COLUMN_NAME
&nbsp;&nbsp;&nbsp;&nbsp;COMMENT
&nbsp;&nbsp;&nbsp;&nbsp;INDEX_TYPE
&nbsp;&nbsp;&nbsp;&nbsp;KEY_NAME
&nbsp;&nbsp;&nbsp;&nbsp;NON_UNIQUE
&nbsp;&nbsp;&nbsp;&nbsp;NULL
&nbsp;&nbsp;&nbsp;&nbsp;PACKED
&nbsp;&nbsp;&nbsp;&nbsp;SEQ_IN_INDEX
&nbsp;&nbsp;&nbsp;&nbsp;SUB_PART
&nbsp;&nbsp;&nbsp;&nbsp;TABLE
&nbsp;&nbsp;&nbsp;&nbsp;
=cut</pre></td></tr>
<tr><td class="h">1133</td><td colspan="5"></td></tr><tr><td class="h">1134</td><td></td><td></td><td></td><td></td><td class="s">sub get_indexes {</td></tr>
<tr><td class="h">1135</td><td><div class="c3">12</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1135">12</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1136</td><td><div class="c3">12</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1136">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift or confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1137</td><td colspan="5"></td></tr><tr><td class="h">1138</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1138">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">1139</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1140</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1141</td><td colspan="5"></td></tr><tr><td class="h">1142</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %h&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= ();</td></tr>
<tr><td class="h">1143</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $indexes = $self-&gt;_get_indexes_arrayref($table);</td></tr>
<tr><td class="h">1144</td><td colspan="5"></td></tr><tr><td class="h">1145</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $index (@$indexes) {</td></tr>
<tr><td class="h">1146</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $key_name = $index-&gt;{KEY_NAME};</td></tr>
<tr><td class="h">1147</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $seq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $index-&gt;{SEQ_IN_INDEX};</td></tr>
<tr><td class="h">1148</td><td colspan="5"></td></tr><tr><td class="h">1149</td><td><div class="c3">41</div><div class="c3">34</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1149">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !exists( $h{$key_name} ) ) { $h{$key_name} = [] }</td></tr>
<tr><td class="h">1150</td><td colspan="5"></td></tr><tr><td class="h">1151</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$h{$key_name}-&gt;[ $seq - 1 ] = $index;</td></tr>
<tr><td class="h">1152</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1153</td><td colspan="5"></td></tr><tr><td class="h">1154</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return \%h;</td></tr>
<tr><td class="h">1155</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1156</td><td colspan="5"></td></tr><tr><td class="h">1157 - 1163</td><td colspan="4"></td><td class="s"><pre>=item get_max_depth()

Returns the max table depth for all tables in the database.

See &quot;get_depth&quot; for additional info.

=cut</pre></td></tr>
<tr><td class="h">1164</td><td colspan="5"></td></tr><tr><td class="h">1165</td><td></td><td></td><td></td><td></td><td class="s">sub get_max_depth {</td></tr>
<tr><td class="h">1166</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1166">1</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1167</td><td colspan="5"></td></tr><tr><td class="h">1168</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">1169</td><td colspan="5"></td></tr><tr><td class="h">1170</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tables = $self-&gt;get_tables();</td></tr>
<tr><td class="h">1171</td><td colspan="5"></td></tr><tr><td class="h">1172</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $max = 0;</td></tr>
<tr><td class="h">1173</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $table (@$tables) {</td></tr>
<tr><td class="h">1174</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $depth = $self-&gt;get_depth($table);</td></tr>
<tr><td class="h">1175</td><td><div class="c3">9</div><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1175">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $depth &gt; $max ) { $max = $depth }</td></tr>
<tr><td class="h">1176</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1177</td><td colspan="5"></td></tr><tr><td class="h">1178</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $max;</td></tr>
<tr><td class="h">1179</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1180</td><td colspan="5"></td></tr><tr><td class="h">1181 - 1192</td><td colspan="4"></td><td class="s"><pre>=item get_other_constraints($table)

Returns a hashref of the constraints that are not pk, ak, or fk&nbsp;&nbsp;
for a given table.&nbsp;&nbsp;Returns an empty hashref if none were found.

The structure of the returned data is:

$hashref-&gt;{constraint_name}-&gt;[ { col1 }, { col2 } ]

See &quot;get_constraints&quot; for a list of the hash elements in each column.

=cut</pre></td></tr>
<tr><td class="h">1193</td><td colspan="5"></td></tr><tr><td class="h">1194</td><td></td><td></td><td></td><td></td><td class="s">sub get_other_constraints {</td></tr>
<tr><td class="h">1195</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1195">2</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1196</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">1197</td><td colspan="5"></td></tr><tr><td class="h">1198</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L1198">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">1199</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1200</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1201</td><td colspan="5"></td></tr><tr><td class="h">1202</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">1203</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ak = $self-&gt;get_ak_constraints($table);</td></tr>
<tr><td class="h">1204</td><td colspan="5"></td></tr><tr><td class="h">1205</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = {};</td></tr>
<tr><td class="h">1206</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons = $self-&gt;get_constraints($table);</td></tr>
<tr><td class="h">1207</td><td colspan="5"></td></tr><tr><td class="h">1208</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_name ( keys(%$cons) ) {</td></tr>
<tr><td class="h">1209</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = $cons-&gt;{$con_name}-&gt;[0]-&gt;{CONSTRAINT_TYPE};</td></tr>
<tr><td class="h">1210</td><td colspan="5"></td></tr><tr><td class="h">1211</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1211">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $type eq &#39;PRIMARY KEY&#39;;</td></tr>
<tr><td class="h">1212</td><td><div class="c3">3</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1212">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $type eq &#39;FOREIGN KEY&#39;;</td></tr>
<tr><td class="h">1213</td><td><div class="c3">2</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L1213">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $type eq &#39;UNIQUE&#39;;</td></tr>
<tr><td class="h">1214</td><td colspan="5"></td></tr><tr><td class="h">1215</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$href-&gt;{$con_name} = $cons-&gt;{$con_name};</td></tr>
<tr><td class="h">1216</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1217</td><td colspan="5"></td></tr><tr><td class="h">1218</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href;</td></tr>
<tr><td class="h">1219</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1220</td><td colspan="5"></td></tr><tr><td class="h">1221 - 1232</td><td colspan="4"></td><td class="s"><pre>=item get_other_indexes($table)

Returns a hashref of the indexes that are not pk, ak, or fk&nbsp;&nbsp;
for a given table.&nbsp;&nbsp;Returns an empty hashref if none were found.

The structure of the returned data is:

$hashref-&gt;{index_name}-&gt;[ { col1 }, { col2 } ]

See &quot;get_indexes&quot; for a list of the hash elements in each column.

=cut</pre></td></tr>
<tr><td class="h">1233</td><td colspan="5"></td></tr><tr><td class="h">1234</td><td></td><td></td><td></td><td></td><td class="s">sub get_other_indexes {</td></tr>
<tr><td class="h">1235</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1235">2</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">1236</td><td colspan="5"></td></tr><tr><td class="h">1237</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1238</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1239</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">1240</td><td colspan="5"></td></tr><tr><td class="h">1241</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L1241">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">1242</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1243</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1244</td><td colspan="5"></td></tr><tr><td class="h">1245</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ak = $self-&gt;get_ak_indexes($table);</td></tr>
<tr><td class="h">1246</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk = $self-&gt;get_fk_indexes($table);</td></tr>
<tr><td class="h">1247</td><td colspan="5"></td></tr><tr><td class="h">1248</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href&nbsp;&nbsp;&nbsp;&nbsp;= {};</td></tr>
<tr><td class="h">1249</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $indexes = $self-&gt;get_indexes($table);</td></tr>
<tr><td class="h">1250</td><td colspan="5"></td></tr><tr><td class="h">1251</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $name ( keys %$indexes ) {</td></tr>
<tr><td class="h">1252</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1252">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $name eq &#39;PRIMARY&#39;;</td></tr>
<tr><td class="h">1253</td><td><div class="c3">4</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1253">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if defined( $ak-&gt;{$name} );</td></tr>
<tr><td class="h">1254</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1254">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if defined( $fk-&gt;{$name} );</td></tr>
<tr><td class="h">1255</td><td colspan="5"></td></tr><tr><td class="h">1256</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$href-&gt;{$name} = $indexes-&gt;{$name};</td></tr>
<tr><td class="h">1257</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1258</td><td colspan="5"></td></tr><tr><td class="h">1259</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href;</td></tr>
<tr><td class="h">1260</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1261</td><td colspan="5"></td></tr><tr><td class="h">1262 - 1273</td><td colspan="4"></td><td class="s"><pre>=item get_pk_constraint($table)

Returns an arrayref of the primary key constraint for a given table.&nbsp;&nbsp;Returns
an empty arrayref if none were found.

The structure of the returned data is:

$aref-&gt;[ { col1 }, { col2 }, ... ]

See &quot;get_constraints&quot; for a list of hash elements in each column.

=cut</pre></td></tr>
<tr><td class="h">1274</td><td colspan="5"></td></tr><tr><td class="h">1275</td><td></td><td></td><td></td><td></td><td class="s">sub get_pk_constraint {</td></tr>
<tr><td class="h">1276</td><td><div class="c3">765</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1276">765</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">1277</td><td><div class="c3">765</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift;</td></tr>
<tr><td class="h">1278</td><td colspan="5"></td></tr><tr><td class="h">1279</td><td><div class="c3">765</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1279">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">1280</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1281</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1282</td><td colspan="5"></td></tr><tr><td class="h">1283</td><td><div class="c3">765</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cons = $self-&gt;get_constraints($table);</td></tr>
<tr><td class="h">1284</td><td colspan="5"></td></tr><tr><td class="h">1285</td><td><div class="c3">764</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_name ( keys(%$cons) ) {</td></tr>
<tr><td class="h">1286</td><td><div class="c3">884</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1286">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $cons-&gt;{$con_name}-&gt;[0]-&gt;{CONSTRAINT_TYPE} eq &#39;PRIMARY KEY&#39; ) {</td></tr>
<tr><td class="h">1287</td><td><div class="c3">764</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $cons-&gt;{$con_name};</td></tr>
<tr><td class="h">1288</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1289</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1290</td><td colspan="5"></td></tr><tr><td class="h">1291</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return [];</td></tr>
<tr><td class="h">1292</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1293</td><td colspan="5"></td></tr><tr><td class="h">1294 - 1305</td><td colspan="4"></td><td class="s"><pre>=item get_pk_index($table)

Returns an arrayref of the primary key index for a given table. Returns
an empty arrayref if none were found.

The structure of the returned data is:

$aref-&gt;[ { col1 }, { col2 }, ... ]

See &quot;get_indexes&quot; for a list of the hash elements in each column.

=cut</pre></td></tr>
<tr><td class="h">1306</td><td colspan="5"></td></tr><tr><td class="h">1307</td><td></td><td></td><td></td><td></td><td class="s">sub get_pk_index {</td></tr>
<tr><td class="h">1308</td><td><div class="c3">2</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1308">2</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">1309</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift;</td></tr>
<tr><td class="h">1310</td><td colspan="5"></td></tr><tr><td class="h">1311</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($table !~ /\./) {</td></tr>
<tr><td class="h">1312</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1313</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1314</td><td colspan="5"></td></tr><tr><td class="h">1315</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = $self-&gt;get_indexes($table);</td></tr>
<tr><td class="h">1316</td><td colspan="5"></td></tr><tr><td class="h">1317</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $name ( keys(%$href) ) {</td></tr>
<tr><td class="h">1318</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1318">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $name eq &#39;PRIMARY&#39; )&nbsp;&nbsp;&nbsp;&nbsp;# mysql forces this naming convention</td></tr>
<tr><td class="h">1319</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1320</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href-&gt;{$name};</td></tr>
<tr><td class="h">1321</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1322</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1323</td><td colspan="5"></td></tr><tr><td class="h">1324</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return [];</td></tr>
<tr><td class="h">1325</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1326</td><td colspan="5"></td></tr><tr><td class="h">1327 - 1332</td><td colspan="4"></td><td class="s"><pre>=item get_pk_name($table)

Returns the primary key constraint name for a given table.&nbsp;&nbsp;Returns undef
if one does not exist.

=cut</pre></td></tr>
<tr><td class="h">1333</td><td colspan="5"></td></tr><tr><td class="h">1334</td><td></td><td></td><td></td><td></td><td class="s">sub get_pk_name {</td></tr>
<tr><td class="h">1335</td><td><div class="c3">116</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1335">116</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1336</td><td><div class="c3">116</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1336">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift || confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1337</td><td colspan="5"></td></tr><tr><td class="h">1338</td><td><div class="c3">116</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L1338">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;has_pk($table) ) {</td></tr>
<tr><td class="h">1339</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return &#39;PRIMARY&#39;;&nbsp;&nbsp;&nbsp;&nbsp;# mysql default</td></tr>
<tr><td class="h">1340</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1341</td><td colspan="5"></td></tr><tr><td class="h">1342</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1343</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1344</td><td colspan="5"></td></tr><tr><td class="h">1345 - 1350</td><td colspan="4"></td><td class="s"><pre>=item get_tables( )

Returns an arrayref of tables in the current database.&nbsp;&nbsp;Returns undef
if no tables were found.

=cut</pre></td></tr>
<tr><td class="h">1351</td><td colspan="5"></td></tr><tr><td class="h">1352</td><td></td><td></td><td></td><td></td><td class="s">sub get_tables {</td></tr>
<tr><td class="h">1353</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1353">9</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1354</td><td colspan="5"></td></tr><tr><td class="h">1355</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">1356</td><td colspan="5"></td></tr><tr><td class="h">1357</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tables = undef;</td></tr>
<tr><td class="h">1358</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $dbh-&gt;prepare(&quot;show full tables where Table_Type = &#39;BASE TABLE&#39;&quot;);</td></tr>
<tr><td class="h">1359</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute;</td></tr>
<tr><td class="h">1360</td><td colspan="5"></td></tr><tr><td class="h">1361</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( my ($table) = $sth-&gt;fetchrow_array ) {</td></tr>
<tr><td class="h">1362</td><td><div class="c3">81</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @$tables, $table );</td></tr>
<tr><td class="h">1363</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1364</td><td colspan="5"></td></tr><tr><td class="h">1365</td><td><div class="c3">9</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $tables;</td></tr>
<tr><td class="h">1366</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1367</td><td colspan="5"></td></tr><tr><td class="h">1368 - 1372</td><td colspan="4"></td><td class="s"><pre>=item has_ak($table)

Returns true if the table has an alternate key or false if not.

=cut</pre></td></tr>
<tr><td class="h">1373</td><td colspan="5"></td></tr><tr><td class="h">1374</td><td></td><td></td><td></td><td></td><td class="s">sub has_ak {</td></tr>
<tr><td class="h">1375</td><td><div class="c3">223</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1375">223</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1376</td><td><div class="c3">223</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1376">67</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift || confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1377</td><td colspan="5"></td></tr><tr><td class="h">1378</td><td><div class="c3">222</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $aks_href = $self-&gt;get_ak_constraints($table);</td></tr>
<tr><td class="h">1379</td><td colspan="5"></td></tr><tr><td class="h">1380</td><td><div class="c3">221</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return scalar keys %$aks_href;</td></tr>
<tr><td class="h">1381</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1382</td><td colspan="5"></td></tr><tr><td class="h">1383 - 1387</td><td colspan="4"></td><td class="s"><pre>=item has_fks($table)
&nbsp;&nbsp;&nbsp;&nbsp;
Returns true if the table has foreign keys or false if not. 
&nbsp;&nbsp;&nbsp;&nbsp;
=cut</pre></td></tr>
<tr><td class="h">1388</td><td colspan="5"></td></tr><tr><td class="h">1389</td><td></td><td></td><td></td><td></td><td class="s">sub has_fks {</td></tr>
<tr><td class="h">1390</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1390">5</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1391</td><td><div class="c3">5</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1391">67</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift || confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1392</td><td colspan="5"></td></tr><tr><td class="h">1393</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">1394</td><td colspan="5"></td></tr><tr><td class="h">1395</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return scalar keys %$fks_href;</td></tr>
<tr><td class="h">1396</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1397</td><td colspan="5"></td></tr><tr><td class="h">1398 - 1402</td><td colspan="4"></td><td class="s"><pre>=item has_pk($table)

Returns true if the table has a primary key or false if it does not.

=cut</pre></td></tr>
<tr><td class="h">1403</td><td colspan="5"></td></tr><tr><td class="h">1404</td><td></td><td></td><td></td><td></td><td class="s">sub has_pk {</td></tr>
<tr><td class="h">1405</td><td><div class="c3">549</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1405">549</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1406</td><td><div class="c3">549</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1406">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift || confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1407</td><td colspan="5"></td></tr><tr><td class="h">1408</td><td><div class="c3">549</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pk_aref = $self-&gt;get_pk_constraint($table);</td></tr>
<tr><td class="h">1409</td><td colspan="5"></td></tr><tr><td class="h">1410</td><td><div class="c3">548</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return scalar @$pk_aref;</td></tr>
<tr><td class="h">1411</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1412</td><td colspan="5"></td></tr><tr><td class="h">1413 - 1418</td><td colspan="4"></td><td class="s"><pre>=item is_pk_auto_inc($table)

Returns true if the primary key is using the auto-increment feature or false
if it does not.

=cut</pre></td></tr>
<tr><td class="h">1419</td><td colspan="5"></td></tr><tr><td class="h">1420</td><td></td><td></td><td></td><td></td><td class="s">sub is_pk_auto_inc {</td></tr>
<tr><td class="h">1421</td><td><div class="c3">216</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1421">216</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1422</td><td><div class="c3">216</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1422">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift || confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1423</td><td colspan="5"></td></tr><tr><td class="h">1424</td><td><div class="c3">216</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-pm--branch.html#L1424">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;has_pk($table) ) {</td></tr>
<tr><td class="h">1425</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $pk_aref = $self-&gt;get_pk_constraint($table);</td></tr>
<tr><td class="h">1426</td><td colspan="5"></td></tr><tr><td class="h">1427</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$pk_aref) {</td></tr>
<tr><td class="h">1428</td><td colspan="5"></td></tr><tr><td class="h">1429</td><td><div class="c3">257</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $col_href-&gt;{COLUMN_NAME};</td></tr>
<tr><td class="h">1430</td><td><div class="c3">257</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_desc_href = $self-&gt;describe_column(</td></tr>
<tr><td class="h">1431</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1432</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col_name</td></tr>
<tr><td class="h">1433</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1434</td><td colspan="5"></td></tr><tr><td class="h">1435</td><td><div class="c3">257</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1435">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $col_desc_href-&gt;{EXTRA} =~ /auto/ ) {</td></tr>
<tr><td class="h">1436</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1437</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1438</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1439</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1440</td><td colspan="5"></td></tr><tr><td class="h">1441</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1442</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1443</td><td colspan="5"></td></tr><tr><td class="h">1444 - 1448</td><td colspan="4"></td><td class="s"><pre>=item is_column_nullable(table =&gt; $table, column =&gt; $column)

Returns true if column is nullable or false if it is not.

=cut</pre></td></tr>
<tr><td class="h">1449</td><td colspan="5"></td></tr><tr><td class="h">1450</td><td></td><td></td><td></td><td></td><td class="s">sub is_column_nullable {</td></tr>
<tr><td class="h">1451</td><td><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1451">3</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1452</td><td colspan="5"></td></tr><tr><td class="h">1453</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1454</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1455</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1456</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $column =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">1457</td><td colspan="5"></td></tr><tr><td class="h">1458</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $desc = $self-&gt;describe_column( table =&gt; $table, column =&gt; $column );</td></tr>
<tr><td class="h">1459</td><td colspan="5"></td></tr><tr><td class="h">1460</td><td><div class="c3">2</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1460">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $desc-&gt;{NULL} eq &#39;YES&#39; ) {</td></tr>
<tr><td class="h">1461</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1462</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1463</td><td colspan="5"></td></tr><tr><td class="h">1464</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1465</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1466</td><td colspan="5"></td></tr><tr><td class="h">1467 - 1471</td><td colspan="4"></td><td class="s"><pre>=item is_fk_column(table =&gt; $table, column =&gt; $column)

Returns true if column participates in a foreign key or false if it does not.

=cut</pre></td></tr>
<tr><td class="h">1472</td><td colspan="5"></td></tr><tr><td class="h">1473</td><td></td><td></td><td></td><td></td><td class="s">sub is_fk_column {</td></tr>
<tr><td class="h">1474</td><td><div class="c3">254</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1474">254</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1475</td><td><div class="c3">254</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %a&nbsp;&nbsp;&nbsp;&nbsp;= @_;</td></tr>
<tr><td class="h">1476</td><td colspan="5"></td></tr><tr><td class="h">1477</td><td><div class="c3">254</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1477">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;= $a{table}&nbsp;&nbsp;|| confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1478</td><td><div class="c3">254</div></td><td></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1478">33</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $column = $a{column} || confess &quot;missing column arg&quot;;</td></tr>
<tr><td class="h">1479</td><td colspan="5"></td></tr><tr><td class="h">1480</td><td><div class="c3">254</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">1481</td><td colspan="5"></td></tr><tr><td class="h">1482</td><td><div class="c3">254</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_name ( keys %$fks_href ) {</td></tr>
<tr><td class="h">1483</td><td colspan="5"></td></tr><tr><td class="h">1484</td><td><div class="c3">374</div><div class="c3">374</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_href ( @{ $fks_href-&gt;{$fk_name} } ) {</td></tr>
<tr><td class="h">1485</td><td colspan="5"></td></tr><tr><td class="h">1486</td><td><div class="c3">374</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1486">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $fk_href-&gt;{COLUMN_NAME} eq $column ) {</td></tr>
<tr><td class="h">1487</td><td><div class="c3">248</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1488</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1489</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1490</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1491</td><td colspan="5"></td></tr><tr><td class="h">1492</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1493</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1494</td><td colspan="5"></td></tr><tr><td class="h">1495 - 1501</td><td colspan="4"></td><td class="s"><pre>=item is_self_referencing($table, [$name =&gt; $constraint_name])

Returns true if the specified table has a self-referencing foreign key or
false if it does not.&nbsp;&nbsp;If a constraint name is passed, it will only check
the constraint provided.

=cut</pre></td></tr>
<tr><td class="h">1502</td><td colspan="5"></td></tr><tr><td class="h">1503</td><td></td><td></td><td></td><td></td><td class="s">sub is_self_referencing {</td></tr>
<tr><td class="h">1504</td><td><div class="c3">554</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1504">554</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1505</td><td colspan="5"></td></tr><tr><td class="h">1506</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1507</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1508</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1509</td><td colspan="5"></td></tr><tr><td class="h">1510</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">1511</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name =&gt; { isa =&gt; &#39;Str&#39;, optional =&gt; 1 };</td></tr>
<tr><td class="h">1512</td><td colspan="5"></td></tr><tr><td class="h">1513</td><td><div class="c3">554</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq_table = $self-&gt;_fq( table =&gt; $table, fq =&gt; 1 );</td></tr>
<tr><td class="h">1514</td><td colspan="5"></td></tr><tr><td class="h">1515</td><td><div class="c3">554</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">1516</td><td colspan="5"></td></tr><tr><td class="h">1517</td><td><div class="c3">554</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_name (%$fks_href) {</td></tr>
<tr><td class="h">1518</td><td><div class="c3">686</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1518">100</a></div></td><td><div class="c0"><a href="blib-lib-MySQL-Util-pm--condition.html#L1518">67</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $name and $name ne $con_name;</td></tr>
<tr><td class="h">1519</td><td colspan="5"></td></tr><tr><td class="h">1520</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#$hashref-&gt;{constraint_name}-&gt;[ { col1 }, { col2 } ]</td></tr>
<tr><td class="h">1521</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1522</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#Hash elements for each column:</td></tr>
<tr><td class="h">1523</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1524</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;CONSTRAINT_SCHEMA</td></tr>
<tr><td class="h">1525</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;CONSTRAINT_TYPE</td></tr>
<tr><td class="h">1526</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;COLUMN_NAME</td></tr>
<tr><td class="h">1527</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;ORDINAL_POSITION</td></tr>
<tr><td class="h">1528</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;POSITION_IN_UNIQUE_CONSTRAINT</td></tr>
<tr><td class="h">1529</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_COLUMN_NAME</td></tr>
<tr><td class="h">1530</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_TABLE_SCHEMA</td></tr>
<tr><td class="h">1531</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_TABLE_NAME</td></tr>
<tr><td class="h">1532</td><td colspan="5"></td></tr><tr><td class="h">1533</td><td><div class="c3">4</div><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $pos_href ( @{ $fks_href-&gt;{$con_name} } ) {</td></tr>
<tr><td class="h">1534</td><td colspan="5"></td></tr><tr><td class="h">1535</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_table&nbsp;&nbsp;= $pos_href-&gt;{REFERENCED_TABLE_NAME};</td></tr>
<tr><td class="h">1536</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_schema = $pos_href-&gt;{REFERENCED_TABLE_SCHEMA};</td></tr>
<tr><td class="h">1537</td><td colspan="5"></td></tr><tr><td class="h">1538</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_fq_table = $self-&gt;_fq(</td></tr>
<tr><td class="h">1539</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $ref_table,</td></tr>
<tr><td class="h">1540</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1,</td></tr>
<tr><td class="h">1541</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema =&gt; $ref_schema</td></tr>
<tr><td class="h">1542</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1543</td><td colspan="5"></td></tr><tr><td class="h">1544</td><td><div class="c3">2</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1544">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $ref_fq_table eq $fq_table ) {</td></tr>
<tr><td class="h">1545</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1546</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1547</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1548</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1549</td><td colspan="5"></td></tr><tr><td class="h">1550</td><td><div class="c3">554</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">1551</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1552</td><td colspan="5"></td></tr><tr><td class="h">1553 - 1557</td><td colspan="4"></td><td class="s"><pre>=item table_exists($table)

Returns true if table exists.&nbsp;&nbsp;Otherwise returns false.

=cut</pre></td></tr>
<tr><td class="h">1558</td><td colspan="5"></td></tr><tr><td class="h">1559</td><td></td><td></td><td></td><td></td><td class="s">sub table_exists {</td></tr>
<tr><td class="h">1560</td><td><div class="c3">48</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1560">48</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1561</td><td><div class="c3">48</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1561">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table = shift or confess &quot;missing table arg&quot;;</td></tr>
<tr><td class="h">1562</td><td colspan="5"></td></tr><tr><td class="h">1563</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq_table = $table;</td></tr>
<tr><td class="h">1564</td><td><div class="c3">47</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1564">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $table !~ /\./ ) {</td></tr>
<tr><td class="h">1565</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$fq_table = $self-&gt;_schema . &quot;.$table&quot;;</td></tr>
<tr><td class="h">1566</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1567</td><td colspan="5"></td></tr><tr><td class="h">1568</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh = $self-&gt;_dbh;</td></tr>
<tr><td class="h">1569</td><td colspan="5"></td></tr><tr><td class="h">1570</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $schema, $nofq_table ) = split( /\./, $fq_table );</td></tr>
<tr><td class="h">1571</td><td><div class="c3">47</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1571">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $schema ne $self-&gt;_schema ) {</td></tr>
<tr><td class="h">1572</td><td colspan="5"></td></tr><tr><td class="h">1573</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# quietly change the schema so &quot;show tables like ...&quot; works</td></tr>
<tr><td class="h">1574</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;do(&quot;use $schema&quot;);</td></tr>
<tr><td class="h">1575</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1576</td><td colspan="5"></td></tr><tr><td class="h">1577</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{show tables like &#39;$nofq_table&#39;};</td></tr>
<tr><td class="h">1578</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sth = $dbh-&gt;prepare($sql);</td></tr>
<tr><td class="h">1579</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sth-&gt;execute;</td></tr>
<tr><td class="h">1580</td><td colspan="5"></td></tr><tr><td class="h">1581</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $cnt = 0;</td></tr>
<tr><td class="h">1582</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ( $sth-&gt;fetchrow_array ) {</td></tr>
<tr><td class="h">1583</td><td><div class="c3">39</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cnt++;</td></tr>
<tr><td class="h">1584</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1585</td><td colspan="5"></td></tr><tr><td class="h">1586</td><td><div class="c3">47</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-pm--branch.html#L1586">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $schema ne $self-&gt;_schema ) {</td></tr>
<tr><td class="h">1587</td><td colspan="5"></td></tr><tr><td class="h">1588</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# quietly change schema back</td></tr>
<tr><td class="h">1589</td><td><div class="c3">2</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;do( &quot;use &quot; . $self-&gt;_schema );</td></tr>
<tr><td class="h">1590</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1591</td><td colspan="5"></td></tr><tr><td class="h">1592</td><td><div class="c3">47</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $cnt;</td></tr>
<tr><td class="h">1593</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1594</td><td colspan="5"></td></tr><tr><td class="h">1595 - 1599</td><td colspan="4"></td><td class="s"><pre>=item use_db($dbname)

Used for switching database context.&nbsp;&nbsp;Returns true on success.

=cut</pre></td></tr>
<tr><td class="h">1600</td><td colspan="5"></td></tr><tr><td class="h">1601</td><td></td><td></td><td></td><td></td><td class="s">sub use_db {</td></tr>
<tr><td class="h">1602</td><td><div class="c3">4</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1602">4</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;= shift;</td></tr>
<tr><td class="h">1603</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbname = shift;</td></tr>
<tr><td class="h">1604</td><td colspan="5"></td></tr><tr><td class="h">1605</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dbh-&gt;do(&quot;use $dbname&quot;);</td></tr>
<tr><td class="h">1606</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_schema($dbname);</td></tr>
<tr><td class="h">1607</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;clear_cache;</td></tr>
<tr><td class="h">1608</td><td colspan="5"></td></tr><tr><td class="h">1609</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">1610</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1611</td><td colspan="5"></td></tr><tr><td class="h">1612</td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1613</td><td colspan="5"></td></tr><tr><td class="h">1614 - 1626</td><td colspan="4"></td><td class="s"><pre>=head1 ADDITIONAL METHODS

=over 

=item clear_cache()

Clears the object&#39;s internal cache.

If you modify the database ddl without going through the object, then you need 
to clear the internal cache so any future object calls don&#39;t return stale 
information.

=cut</pre></td></tr>
<tr><td class="h">1627</td><td colspan="5"></td></tr><tr><td class="h">1628</td><td></td><td></td><td></td><td></td><td class="s">sub clear_cache {</td></tr>
<tr><td class="h">1629</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1629">5</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1630</td><td colspan="5"></td></tr><tr><td class="h">1631</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_index_cache(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{} );</td></tr>
<tr><td class="h">1632</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_constraint_cache( {} );</td></tr>
<tr><td class="h">1633</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_depth_cache(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{} );</td></tr>
<tr><td class="h">1634</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_describe_cache(&nbsp;&nbsp;&nbsp;{} );</td></tr>
<tr><td class="h">1635</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1636</td><td colspan="5"></td></tr><tr><td class="h">1637 - 1644</td><td colspan="4"></td><td class="s"><pre>=item clone_dbh()

Returns a cloned copy of the internal database handle per the DBI::clone 
method.&nbsp;&nbsp;Beware that the database context will be the same as the object&#39;s. 
For example, if you called &quot;use_db&quot; and switched context along the way, the 
returned dbh will also be in that same context.

=cut</pre></td></tr>
<tr><td class="h">1645</td><td colspan="5"></td></tr><tr><td class="h">1646</td><td></td><td></td><td></td><td></td><td class="s">sub clone_dbh {</td></tr>
<tr><td class="h">1647</td><td><div class="c3">5</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-pm--subroutine.html#L1647">5</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self = shift;</td></tr>
<tr><td class="h">1648</td><td colspan="5"></td></tr><tr><td class="h">1649</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dbh =</td></tr>
<tr><td class="h">1650</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_dbh-&gt;clone( { AutoCommit =&gt; 0 } );&nbsp;&nbsp;&nbsp;&nbsp;# workaround dbd:mysql bug</td></tr>
<tr><td class="h">1651</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;{AutoCommit} = 1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# workaround dbd:mysql bug</td></tr>
<tr><td class="h">1652</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$dbh-&gt;do( &quot;use &quot; . $self-&gt;_schema );</td></tr>
<tr><td class="h">1653</td><td colspan="5"></td></tr><tr><td class="h">1654</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $dbh;</td></tr>
<tr><td class="h">1655</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1656</td><td colspan="5"></td></tr><tr><td class="h">1657</td><td></td><td></td><td></td><td></td><td class="s">=back</td></tr>
<tr><td class="h">1658</td><td colspan="5"></td></tr><tr><td class="h">1659 - 1703</td><td colspan="4"></td><td class="s"><pre>=head1 SEE ALSO

MySQL::Util::Data::Create

=head1 AUTHOR

John Gravatt, C&lt;&lt; &lt;gravattj at cpan.org&gt; &gt;&gt;

=head1 BUGS

Please report any bugs or feature requests to C&lt;bug-mysql-util at rt.cpan.org&gt;, or through
the web interface at L&lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=MySQL-Util&gt;.&nbsp;&nbsp;I will be notified, and then you&#39;ll
automatically be notified of progress on your bug as I make changes.


=head1 SUPPORT

You can find documentation for this module with the perldoc command.

&nbsp;&nbsp;&nbsp;&nbsp;perldoc MySQL::Util


You can also look for information at:

=over 4

=item * RT: CPAN&#39;s request tracker

L&lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=MySQL-Util&gt;

=item * AnnoCPAN: Annotated CPAN documentation

L&lt;http://annocpan.org/dist/MySQL-Util&gt;

=item * CPAN Ratings

L&lt;http://cpanratings.perl.org/d/MySQL-Util&gt;

=item * Search CPAN

L&lt;http://search.cpan.org/dist/MySQL-Util/&gt;

=back

=cut</pre></td></tr>
<tr><td class="h">1704</td><td colspan="5"></td></tr><tr><td class="h">1705</td><td></td><td></td><td></td><td></td><td class="s">#=head1 ACKNOWLEDGEMENTS</td></tr>
<tr><td class="h">1706</td><td colspan="5"></td></tr><tr><td class="h">1707 - 1718</td><td colspan="4"></td><td class="s"><pre>=head1 LICENSE AND COPYRIGHT

Copyright 2011 John Gravatt.

This program is free software; you can redistribute it and/or modify it
under the terms of either: the GNU General Public License as published
by the Free Software Foundation; or the Artistic License.

See http://dev.perl.org/licenses/ for more information.


=cut</pre></td></tr>
<tr><td class="h">1719</td><td colspan="5"></td></tr><tr><td class="h">1720</td><td></td><td></td><td></td><td></td><td class="s">__PACKAGE__-&gt;meta-&gt;make_immutable;&nbsp;&nbsp;&nbsp;&nbsp;# moose stuff</td></tr>
<tr><td class="h">1721</td><td colspan="5"></td></tr><tr><td class="h">1722</td><td></td><td></td><td></td><td></td><td class="s">1;</td></tr>
</table>
</body>
</html>
