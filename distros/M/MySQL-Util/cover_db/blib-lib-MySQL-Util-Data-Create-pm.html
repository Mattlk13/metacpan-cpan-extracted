<!DOCTYPE html
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<!--
This file was generated by Devel::Cover Version 1.29
Devel::Cover is copyright 2001-2017, Paul Johnson (paul@pjcj.net)
Devel::Cover is free. It is licensed under the same terms as Perl itself.
The latest version of Devel::Cover should be available from my homepage:
http://www.pjcj.net
-->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <link rel="stylesheet" type="text/css" href="cover.css"></link>
    <title>File Coverage: blib/lib/MySQL/Util/Data/Create.pm</title>
</head>
<body>
<h1>File Coverage</h1>
<table>
<tr><td class="h" align="right">File:</td><td align="left">blib/lib/MySQL/Util/Data/Create.pm</td></tr>
<tr><td class="h" align="right">Coverage:</td><td align="left" class="c1">82.4%</td></tr>
</table>
<div><br/></div>
<table>
<tr><th>line</th><th>stmt</th><th>bran</th><th>cond</th><th>sub</th><th>code</th></tr>
<tr><td class="h">1</td><td></td><td></td><td></td><td></td><td class="s">package MySQL::Util::Data::Create;</td></tr>
<tr><td class="h">2</td><td colspan="5"></td></tr><tr><td class="h">3</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L3">3</a></div></td><td class="s">use Moose::Role;</td></tr>
<tr><td class="h">4</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L4">3</a></div></td><td class="s">use Data::Dumper;</td></tr>
<tr><td class="h">5</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L5">3</a></div></td><td class="s">use SQL::Beautify;</td></tr>
<tr><td class="h">6</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L6">3</a></div></td><td class="s">use Symbol::Util &#39;delete_sub&#39;;</td></tr>
<tr><td class="h">7</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L7">3</a></div></td><td class="s">use Smart::Args;</td></tr>
<tr><td class="h">8</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L8">3</a></div></td><td class="s">use feature &#39;state&#39;;</td></tr>
<tr><td class="h">9</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L9">3</a></div></td><td class="s">use List::MoreUtils &#39;uniq&#39;;</td></tr>
<tr><td class="h">10</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L10">3</a></div></td><td class="s">use Carp &#39;croak&#39;;</td></tr>
<tr><td class="h">11</td><td><div class="c3">3</div><div class="c3">3</div><div class="c3">3</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L11">3</a></div></td><td class="s">use Config::General;</td></tr>
<tr><td class="h">12</td><td colspan="5"></td></tr><tr><td class="h">13 - 22</td><td colspan="4"></td><td class="s"><pre>=head1 NAME

MySQL::Util::Data::Create - A Moose::Role for MySQL::Util.&nbsp;&nbsp;Do not call this
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directly!

=head1 VERSION

Version 0.01

=cut</pre></td></tr>
<tr><td class="h">23</td><td colspan="5"></td></tr><tr><td class="h">24</td><td></td><td></td><td></td><td></td><td class="s">our $VERSION = &#39;0.01&#39;;</td></tr>
<tr><td class="h">25</td><td colspan="5"></td></tr><tr><td class="h">26 - 84</td><td colspan="4"></td><td class="s"><pre>=head1 SYNOPSIS

use MySQL::Util;

my $util = MySQL::Util-&gt;new(...);
&nbsp;&nbsp;&nbsp;&nbsp;
$util-&gt;create_data(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;sometable&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rows&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 500,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaults =&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 10,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enabled_flag =&gt; 1
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});

=head1 SUBROUTINES/METHODS

=head2 create_data( %args )

Creates X number of rows in the specified table.&nbsp;&nbsp;Columns are populated with
random data if it can&#39;t be derived through auto-increment, foreign-keys, or
enum.&nbsp;&nbsp;If defaults are provided they are used in favor over random values.

=head3 Arguments:

=over

=item table

name of table you want to create data in

=item rows

how many rows to create

=item defaults (optional)

A hashref that contains default data values for columns that may be
encountered.&nbsp;&nbsp;If a column default is specified for which no column
exists, it will be ignored.&nbsp;&nbsp;Each key is the column name and
each value is the default value you wish to use.

=back

=head3 Examples:

&nbsp;&nbsp;&nbsp;&nbsp;$util-&gt;create_data(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;mytable&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rows =&gt; 50,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaults&nbsp;&nbsp;=&gt; {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id =&gt; 44,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;age =&gt; 25
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} );

&nbsp;&nbsp;&nbsp;&nbsp;$util-&gt;create_data(
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;students&#39;,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rows =&gt; 1000
&nbsp;&nbsp;&nbsp;&nbsp;);
&nbsp;&nbsp;&nbsp;&nbsp;
=cut</pre></td></tr>
<tr><td class="h">85</td><td colspan="5"></td></tr><tr><td class="h">86</td><td></td><td></td><td></td><td></td><td class="s">has _create_cache =&gt; (</td></tr>
<tr><td class="h">87</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">88</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">89</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0,</td></tr>
<tr><td class="h">90</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; sub { {} },</td></tr>
<tr><td class="h">91</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">92</td><td colspan="5"></td></tr><tr><td class="h">93</td><td></td><td></td><td></td><td></td><td class="s">has _table_aliases =&gt; (</td></tr>
<tr><td class="h">94</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">95</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">96</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0,</td></tr>
<tr><td class="h">97</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; sub { {} },</td></tr>
<tr><td class="h">98</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">99</td><td colspan="5"></td></tr><tr><td class="h">100</td><td></td><td></td><td></td><td></td><td class="s">has _last_table_alias_num =&gt; (</td></tr>
<tr><td class="h">101</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;rw&#39;,</td></tr>
<tr><td class="h">102</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;isa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Int&#39;,</td></tr>
<tr><td class="h">103</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;required =&gt; 0,</td></tr>
<tr><td class="h">104</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;default&nbsp;&nbsp;=&gt; 0</td></tr>
<tr><td class="h">105</td><td></td><td></td><td></td><td></td><td class="s">);</td></tr>
<tr><td class="h">106</td><td colspan="5"></td></tr><tr><td class="h">107</td><td></td><td></td><td></td><td></td><td class="s">sub _get_table_alias {</td></tr>
<tr><td class="h">108</td><td><div class="c3">1007</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L108">1007</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">109</td><td colspan="5"></td></tr><tr><td class="h">110</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">111</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">112</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">113</td><td colspan="5"></td></tr><tr><td class="h">114</td><td><div class="c3">1007</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; 1 );</td></tr>
<tr><td class="h">115</td><td colspan="5"></td></tr><tr><td class="h">116</td><td><div class="c3">1007</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $href = $self-&gt;_table_aliases;</td></tr>
<tr><td class="h">117</td><td colspan="5"></td></tr><tr><td class="h">118</td><td><div class="c3">1007</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L118">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( exists $href-&gt;{$table} ) {</td></tr>
<tr><td class="h">119</td><td><div class="c3">1002</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $href-&gt;{$table};</td></tr>
<tr><td class="h">120</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">121</td><td colspan="5"></td></tr><tr><td class="h">122</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_num&nbsp;&nbsp;&nbsp;= $self-&gt;_last_table_alias_num + 1;</td></tr>
<tr><td class="h">123</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $new_alias = &quot;t$new_num&quot;;</td></tr>
<tr><td class="h">124</td><td colspan="5"></td></tr><tr><td class="h">125</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$href-&gt;{$table} = $new_alias;</td></tr>
<tr><td class="h">126</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_table_aliases($href);</td></tr>
<tr><td class="h">127</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_last_table_alias_num($new_num);</td></tr>
<tr><td class="h">128</td><td colspan="5"></td></tr><tr><td class="h">129</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $new_alias;</td></tr>
<tr><td class="h">130</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">131</td><td colspan="5"></td></tr><tr><td class="h">132</td><td></td><td></td><td></td><td></td><td class="s">sub _create_factory_method {</td></tr>
<tr><td class="h">133</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L133">6</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">134</td><td colspan="5"></td></tr><tr><td class="h">135</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">136</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">137</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">138</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">139</td><td colspan="5"></td></tr><tr><td class="h">140</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $method = &#39;create_factory_data&#39;;</td></tr>
<tr><td class="h">141</td><td colspan="5"></td></tr><tr><td class="h">142</td><td><div class="c3">6</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L142">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( MySQL::Util-&gt;can($method) ) {</td></tr>
<tr><td class="h">143</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete_sub &quot;MySQL::Util::$method&quot;;</td></tr>
<tr><td class="h">144</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">145</td><td colspan="5"></td></tr><tr><td class="h">146</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $col_rules = $self-&gt;_get_column_rules(</td></tr>
<tr><td class="h">147</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">148</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; $col_data_href</td></tr>
<tr><td class="h">149</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">150</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;col_rules:\n&quot; . Dumper($col_rules) );</td></tr>
<tr><td class="h">151</td><td colspan="5"></td></tr><tr><td class="h">152</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $factory = DBIx::DataFactory-&gt;new( { dbh =&gt; $self-&gt;_dbh } );</td></tr>
<tr><td class="h">153</td><td colspan="5"></td></tr><tr><td class="h">154</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# what to do with $fm if anything?</td></tr>
<tr><td class="h">155</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fm = $factory-&gt;create_factory_method(</td></tr>
<tr><td class="h">156</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $method,</td></tr>
<tr><td class="h">157</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">158</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;install_package&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;MySQL::Util&#39;,</td></tr>
<tr><td class="h">159</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto_inserted_columns =&gt; $col_rules</td></tr>
<tr><td class="h">160</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">161</td><td colspan="5"></td></tr><tr><td class="h">162</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $method;</td></tr>
<tr><td class="h">163</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">164</td><td colspan="5"></td></tr><tr><td class="h">165</td><td></td><td></td><td></td><td></td><td class="s">sub _parse_fq_col {</td></tr>
<tr><td class="h">166</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L166">1</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">167</td><td colspan="5"></td></tr><tr><td class="h">168</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">169</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self =&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">170</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col&nbsp;&nbsp;=&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">171</td><td colspan="5"></td></tr><tr><td class="h">172</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @a = split( /\./, $col );</td></tr>
<tr><td class="h">173</td><td colspan="5"></td></tr><tr><td class="h">174</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L174">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;unable to parse column name: $col&quot; if @a &gt; 3;</td></tr>
<tr><td class="h">175</td><td colspan="5"></td></tr><tr><td class="h">176</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L176">50</a></div><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L176">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( @a == 3 ) {</td></tr>
<tr><td class="h">177</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return @a;</td></tr>
<tr><td class="h">178</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">179</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;elsif ( @a == 2 ) {</td></tr>
<tr><td class="h">180</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ( undef, @a );</td></tr>
<tr><td class="h">181</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">182</td><td colspan="5"></td></tr><tr><td class="h">183</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return ( &#39;&#39;, &#39;&#39;, $a[0] );</td></tr>
<tr><td class="h">184</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">185</td><td colspan="5"></td></tr><tr><td class="h">186</td><td></td><td></td><td></td><td></td><td class="s">sub _apply_defaults {</td></tr>
<tr><td class="h">187</td><td><div class="c3">8</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L187">8</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">188</td><td colspan="5"></td></tr><tr><td class="h">189</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">190</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">191</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">192</td><td colspan="5"></td></tr><tr><td class="h">193</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">194</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $defaults =&gt; { isa =&gt; &#39;HashRef&#39;, default =&gt; {}, optional =&gt; 1 },</td></tr>
<tr><td class="h">195</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $conf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; { isa =&gt; &#39;Str|Undef&#39;, optional =&gt; 1};</td></tr>
<tr><td class="h">196</td><td colspan="5"></td></tr><tr><td class="h">197</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $defaults_href;</td></tr>
<tr><td class="h">198</td><td colspan="5"></td></tr><tr><td class="h">199</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L199">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($conf) {</td></tr>
<tr><td class="h">200</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $config = new Config::General($conf);</td></tr>
<tr><td class="h">201</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %config = $config-&gt;getall;</td></tr>
<tr><td class="h">202</td><td colspan="5"></td></tr><tr><td class="h">203</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col ( keys %config ) {</td></tr>
<tr><td class="h">204</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $val = $config{$col};</td></tr>
<tr><td class="h">205</td><td colspan="5"></td></tr><tr><td class="h">206</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $dbname, $t, $c ) = $self-&gt;_parse_fq_col($col);</td></tr>
<tr><td class="h">207</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L207">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $t eq $table ) {</td></tr>
<tr><td class="h">208</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaults_href-&gt;{$c} = $val;</td></tr>
<tr><td class="h">209</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">210</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">211</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaults_href-&gt;{$col} = $val;</td></tr>
<tr><td class="h">212</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">213</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">214</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">215</td><td colspan="5"></td></tr><tr><td class="h">216</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col ( keys %$defaults ) {</td></tr>
<tr><td class="h">217</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# command line overrides conf file values</td></tr>
<tr><td class="h">218</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $dbname, $t, $c ) = $self-&gt;_parse_fq_col($col);</td></tr>
<tr><td class="h">219</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L219">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $t eq $table ) {</td></tr>
<tr><td class="h">220</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaults_href-&gt;{$c} = $defaults-&gt;{$col};</td></tr>
<tr><td class="h">221</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">222</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">223</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaults_href-&gt;{$col} = $defaults-&gt;{$col};</td></tr>
<tr><td class="h">224</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">225</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">226</td><td colspan="5"></td></tr><tr><td class="h">227</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $defaults_href;</td></tr>
<tr><td class="h">228</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">229</td><td colspan="5"></td></tr><tr><td class="h">230</td><td></td><td></td><td></td><td></td><td class="s">sub create_data {</td></tr>
<tr><td class="h">231</td><td><div class="c3">9</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L231">9</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">232</td><td colspan="5"></td></tr><tr><td class="h">233</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">234</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">235</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">236</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $rows&nbsp;&nbsp;=&gt; &#39;Int&#39;,</td></tr>
<tr><td class="h">237</td><td colspan="5"></td></tr><tr><td class="h">238</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">239</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $defaults =&gt; { isa =&gt; &#39;HashRef&#39;, default&nbsp;&nbsp;=&gt; {}, optional =&gt; 1 },</td></tr>
<tr><td class="h">240</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $conf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; { isa =&gt; &#39;Str&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optional =&gt; 1 };</td></tr>
<tr><td class="h">241</td><td colspan="5"></td></tr><tr><td class="h">242</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $defaults_href = $self-&gt;_apply_defaults(</td></tr>
<tr><td class="h">243</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">244</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaults =&gt; $defaults,</td></tr>
<tr><td class="h">245</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $conf</td></tr>
<tr><td class="h">246</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">247</td><td colspan="5"></td></tr><tr><td class="h">248</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# table MUST be in the current schema</td></tr>
<tr><td class="h">249</td><td><div class="c3">8</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L249">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $table =~ /^(\w+)\.(\w+)/ ) {</td></tr>
<tr><td class="h">250</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L250">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $1 ne $self-&gt;_schema ) {</td></tr>
<tr><td class="h">251</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;table $table is not in the current schema&quot;;</td></tr>
<tr><td class="h">252</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">253</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">254</td><td colspan="5"></td></tr><tr><td class="h">255</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# convert null to undef</td></tr>
<tr><td class="h">256</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_name ( keys %$defaults_href ) {</td></tr>
<tr><td class="h">257</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L257">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $defaults_href-&gt;{$col_name} =~ /^null$/i ) {</td></tr>
<tr><td class="h">258</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$defaults_href-&gt;{$col_name} = undef;</td></tr>
<tr><td class="h">259</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">260</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">261</td><td colspan="5"></td></tr><tr><td class="h">262</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $method;</td></tr>
<tr><td class="h">263</td><td colspan="5"></td></tr><tr><td class="h">264</td><td><div class="c3">8</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;for ( my $i = 0; $i &lt; $rows; $i++ ) {</td></tr>
<tr><td class="h">265</td><td><div class="c3">217</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %col_data = %$defaults_href;</td></tr>
<tr><td class="h">266</td><td><div class="c3">217</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;default data\n&quot; . Dumper( \%col_data ) );</td></tr>
<tr><td class="h">267</td><td colspan="5"></td></tr><tr><td class="h">268</td><td><div class="c3">217</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_get_pk_data( table =&gt; $table, col_data_href =&gt; \%col_data );</td></tr>
<tr><td class="h">269</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;after pk data\n&quot; . Dumper( \%col_data ) );</td></tr>
<tr><td class="h">270</td><td colspan="5"></td></tr><tr><td class="h">271</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_get_ak_data( table =&gt; $table, col_data_href =&gt; \%col_data );</td></tr>
<tr><td class="h">272</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;after ak data\n&quot; . Dumper( \%col_data ) );</td></tr>
<tr><td class="h">273</td><td colspan="5"></td></tr><tr><td class="h">274</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_get_fk_data( table =&gt; $table, col_data_href =&gt; \%col_data );</td></tr>
<tr><td class="h">275</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;after fk data\n&quot; . Dumper( \%col_data ) );</td></tr>
<tr><td class="h">276</td><td colspan="5"></td></tr><tr><td class="h">277</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_get_enum_data( table =&gt; $table, col_data_href =&gt; \%col_data );</td></tr>
<tr><td class="h">278</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;after enum data\n&quot; . Dumper( \%col_data ) );</td></tr>
<tr><td class="h">279</td><td colspan="5"></td></tr><tr><td class="h">280</td><td><div class="c3">215</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L280">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !defined($method) ) {</td></tr>
<tr><td class="h">281</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$method = $self-&gt;_create_factory_method(</td></tr>
<tr><td class="h">282</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">283</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; \%col_data</td></tr>
<tr><td class="h">284</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">285</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">286</td><td colspan="5"></td></tr><tr><td class="h">287</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $values = $self-&gt;$method(%col_data);</td></tr>
<tr><td class="h">288</td><td><div class="c3">215</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L288">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;got undef?&quot; if !$values;</td></tr>
<tr><td class="h">289</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">290</td><td colspan="5"></td></tr><tr><td class="h">291</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $rows;</td></tr>
<tr><td class="h">292</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">293</td><td colspan="5"></td></tr><tr><td class="h">294</td><td></td><td></td><td></td><td></td><td class="s">sub _get_table2alias_lookup {</td></tr>
<tr><td class="h">295</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L295">41</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">296</td><td colspan="5"></td></tr><tr><td class="h">297</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">298</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">299</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">300</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $constraint_name =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">301</td><td colspan="5"></td></tr><tr><td class="h">302</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">303</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">304</td><td colspan="5"></td></tr><tr><td class="h">305</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; $fq );</td></tr>
<tr><td class="h">306</td><td colspan="5"></td></tr><tr><td class="h">307</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %tables;</td></tr>
<tr><td class="h">308</td><td colspan="5"></td></tr><tr><td class="h">309</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $i&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= 1;</td></tr>
<tr><td class="h">310</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $con_aref = $self-&gt;get_constraints($table)-&gt;{$constraint_name};</td></tr>
<tr><td class="h">311</td><td colspan="5"></td></tr><tr><td class="h">312</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_col_href (@$con_aref) {</td></tr>
<tr><td class="h">313</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = $con_col_href-&gt;{COLUMN_NAME};</td></tr>
<tr><td class="h">314</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_table;</td></tr>
<tr><td class="h">315</td><td colspan="5"></td></tr><tr><td class="h">316</td><td><div class="c3">82</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L316">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;is_fk_column( table =&gt; $table, column =&gt; $col_name ) ) {</td></tr>
<tr><td class="h">317</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_col_href = $self-&gt;_get_fk_column(</td></tr>
<tr><td class="h">318</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">319</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col_name</td></tr>
<tr><td class="h">320</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">321</td><td colspan="5"></td></tr><tr><td class="h">322</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %parm = (</td></tr>
<tr><td class="h">323</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table =&gt; $fk_col_href-&gt;{REFERENCED_TABLE_NAME},</td></tr>
<tr><td class="h">324</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $fq</td></tr>
<tr><td class="h">325</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">326</td><td colspan="5"></td></tr><tr><td class="h">327</td><td><div class="c3">82</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L327">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($fq) {</td></tr>
<tr><td class="h">328</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parm{schema} = $fk_col_href-&gt;{REFERENCED_TABLE_SCHEMA};</td></tr>
<tr><td class="h">329</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">330</td><td colspan="5"></td></tr><tr><td class="h">331</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref_table = $self-&gt;_fq( %parm, fq =&gt; $fq );</td></tr>
<tr><td class="h">332</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">333</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">334</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref_table = $self-&gt;_fq( table =&gt; $table, fq =&gt; $fq );</td></tr>
<tr><td class="h">335</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">336</td><td colspan="5"></td></tr><tr><td class="h">337</td><td><div class="c3">82</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L337">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$tables{$ref_table} ) {</td></tr>
<tr><td class="h">338</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias = &#39;t&#39; . $i;</td></tr>
<tr><td class="h">339</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tables{$ref_table} = $alias;</td></tr>
<tr><td class="h">340</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$i++;</td></tr>
<tr><td class="h">341</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">342</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">343</td><td colspan="5"></td></tr><tr><td class="h">344</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return \%tables;</td></tr>
<tr><td class="h">345</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">346</td><td colspan="5"></td></tr><tr><td class="h">347</td><td></td><td></td><td></td><td></td><td class="s">sub _get_where_not_exists {</td></tr>
<tr><td class="h">348</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L348">41</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">349</td><td colspan="5"></td></tr><tr><td class="h">350</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">351</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">352</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">353</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $constraint_name =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">354</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias_href&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">355</td><td colspan="5"></td></tr><tr><td class="h">356</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">357</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">358</td><td colspan="5"></td></tr><tr><td class="h">359</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; $fq );</td></tr>
<tr><td class="h">360</td><td colspan="5"></td></tr><tr><td class="h">361</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $con_aref = $self-&gt;get_constraints($table)-&gt;{$constraint_name};</td></tr>
<tr><td class="h">362</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @where;</td></tr>
<tr><td class="h">363</td><td colspan="5"></td></tr><tr><td class="h">364</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_href (@$con_aref) {</td></tr>
<tr><td class="h">365</td><td colspan="5"></td></tr><tr><td class="h">366</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $schema&nbsp;&nbsp;&nbsp;= $con_href-&gt;{CONSTRAINT_SCHEMA};</td></tr>
<tr><td class="h">367</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = $con_href-&gt;{COLUMN_NAME};</td></tr>
<tr><td class="h">368</td><td colspan="5"></td></tr><tr><td class="h">369</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_alias;</td></tr>
<tr><td class="h">370</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_col;</td></tr>
<tr><td class="h">371</td><td colspan="5"></td></tr><tr><td class="h">372</td><td><div class="c3">82</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L372">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;is_fk_column( table =&gt; $table, column =&gt; $col_name ) ) {</td></tr>
<tr><td class="h">373</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $con_fk_href = $self-&gt;_get_fk_column(</td></tr>
<tr><td class="h">374</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">375</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col_name</td></tr>
<tr><td class="h">376</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">377</td><td colspan="5"></td></tr><tr><td class="h">378</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_schema = $con_fk_href-&gt;{REFERENCED_TABLE_SCHEMA};</td></tr>
<tr><td class="h">379</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_table&nbsp;&nbsp;= $con_fk_href-&gt;{REFERENCED_TABLE_NAME};</td></tr>
<tr><td class="h">380</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $joined&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= join &#39;.&#39;, ( $ref_schema, $ref_table );</td></tr>
<tr><td class="h">381</td><td colspan="5"></td></tr><tr><td class="h">382</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref_alias = $alias_href-&gt;{$joined};</td></tr>
<tr><td class="h">383</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref_col&nbsp;&nbsp;&nbsp;= $con_fk_href-&gt;{REFERENCED_COLUMN_NAME};</td></tr>
<tr><td class="h">384</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">385</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">386</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref_alias = $alias_href-&gt;{$table};</td></tr>
<tr><td class="h">387</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref_col&nbsp;&nbsp;&nbsp;= $col_name;</td></tr>
<tr><td class="h">388</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">389</td><td colspan="5"></td></tr><tr><td class="h">390</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push @where, &quot;x.$col_name = $ref_alias.$ref_col&quot;;</td></tr>
<tr><td class="h">391</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">392</td><td colspan="5"></td></tr><tr><td class="h">393</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $where = join &quot; and\n&quot;, @where;</td></tr>
<tr><td class="h">394</td><td colspan="5"></td></tr><tr><td class="h">395</td><td><div class="c3">41</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L395">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return qq{</td></tr>
<tr><td class="h">396</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select *</td></tr>
<tr><td class="h">397</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from $table x</td></tr>
<tr><td class="h">398</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where $where</td></tr>
<tr><td class="h">399</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} if $where;</td></tr>
<tr><td class="h">400</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">401</td><td colspan="5"></td></tr><tr><td class="h">402</td><td></td><td></td><td></td><td></td><td class="s">sub _get_where_clause {</td></tr>
<tr><td class="h">403</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L403">42</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">404</td><td colspan="5"></td></tr><tr><td class="h">405</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">406</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">407</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">408</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">409</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias_href&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">410</td><td colspan="5"></td></tr><tr><td class="h">411</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">412</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# apply any known data to columns for tables in the from clause</td></tr>
<tr><td class="h">413</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">414</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @where;</td></tr>
<tr><td class="h">415</td><td colspan="5"></td></tr><tr><td class="h">416</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $table ( keys %$alias_href ) {</td></tr>
<tr><td class="h">417</td><td><div class="c3">83</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $desc_aref = $self-&gt;describe_table($table);</td></tr>
<tr><td class="h">418</td><td colspan="5"></td></tr><tr><td class="h">419</td><td><div class="c3">83</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $column_href (@$desc_aref) {</td></tr>
<tr><td class="h">420</td><td><div class="c3">125</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = $column_href-&gt;{FIELD};</td></tr>
<tr><td class="h">421</td><td colspan="5"></td></tr><tr><td class="h">422</td><td><div class="c3">125</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L422">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( exists $col_data_href-&gt;{$col_name} ) {</td></tr>
<tr><td class="h">423</td><td colspan="5"></td></tr><tr><td class="h">424</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table_alias = $alias_href-&gt;{$table};</td></tr>
<tr><td class="h">425</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $val&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $col_data_href-&gt;{$col_name};</td></tr>
<tr><td class="h">426</td><td colspan="5"></td></tr><tr><td class="h">427</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L427">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($self-&gt;_column_exists(</td></tr>
<tr><td class="h">428</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">429</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col_name</td></tr>
<tr><td class="h">430</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">431</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">432</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">433</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L433">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !defined $val ) {</td></tr>
<tr><td class="h">434</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L434">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($self-&gt;is_column_nullable(</td></tr>
<tr><td class="h">435</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">436</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col_name</td></tr>
<tr><td class="h">437</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">438</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">439</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">440</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @where, &quot;$table_alias.$col_name is NULL&quot; );</td></tr>
<tr><td class="h">441</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">442</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">443</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess</td></tr>
<tr><td class="h">444</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;tried to set a non-nullable column to null ($table.$col_name)&quot;;</td></tr>
<tr><td class="h">445</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">446</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">447</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">448</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @where, &quot;$table_alias.$col_name = $val&quot; );</td></tr>
<tr><td class="h">449</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">450</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">451</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">452</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">453</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">454</td><td colspan="5"></td></tr><tr><td class="h">455</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join &#39; and &#39;, @where;</td></tr>
<tr><td class="h">456</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">457</td><td colspan="5"></td></tr><tr><td class="h">458</td><td></td><td></td><td></td><td></td><td class="s">sub _is_table_empty {</td></tr>
<tr><td class="h">459</td><td><div class="c3">1</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L459">1</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">460</td><td colspan="5"></td></tr><tr><td class="h">461</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">462</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">463</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">464</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">465</td><td colspan="5"></td></tr><tr><td class="h">466</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $alias_href = { $table =&gt; &#39;t1&#39; };</td></tr>
<tr><td class="h">467</td><td colspan="5"></td></tr><tr><td class="h">468</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $from = $self-&gt;_get_from_clause($alias_href);</td></tr>
<tr><td class="h">469</td><td colspan="5"></td></tr><tr><td class="h">470</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $where = $self-&gt;_get_where_clause(</td></tr>
<tr><td class="h">471</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">472</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; $col_data_href,</td></tr>
<tr><td class="h">473</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias_href&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $alias_href</td></tr>
<tr><td class="h">474</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">475</td><td colspan="5"></td></tr><tr><td class="h">476</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{</td></tr>
<tr><td class="h">477</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select count(*)</td></tr>
<tr><td class="h">478</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from $from</td></tr>
<tr><td class="h">479</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">480</td><td colspan="5"></td></tr><tr><td class="h">481</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L481">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($where) {</td></tr>
<tr><td class="h">482</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql .= &quot; where $where &quot;;</td></tr>
<tr><td class="h">483</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">484</td><td colspan="5"></td></tr><tr><td class="h">485</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cnt = $self-&gt;_dbh-&gt;selectrow_arrayref($sql)-&gt;[0];</td></tr>
<tr><td class="h">486</td><td colspan="5"></td></tr><tr><td class="h">487</td><td><div class="c3">1</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L487">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( !$cnt ) {</td></tr>
<tr><td class="h">488</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1;</td></tr>
<tr><td class="h">489</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">490</td><td colspan="5"></td></tr><tr><td class="h">491</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return 0;</td></tr>
<tr><td class="h">492</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">493</td><td colspan="5"></td></tr><tr><td class="h">494</td><td></td><td></td><td></td><td></td><td class="s">sub _get_from_clause {</td></tr>
<tr><td class="h">495</td><td><div class="c3">42</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L495">42</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args_pos</td></tr>
<tr><td class="h">496</td><td colspan="5"></td></tr><tr><td class="h">497</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">498</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">499</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias_href =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">500</td><td colspan="5"></td></tr><tr><td class="h">501</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @tables;</td></tr>
<tr><td class="h">502</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $t ( keys %$alias_href ) {</td></tr>
<tr><td class="h">503</td><td><div class="c3">83</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @tables, &quot;$t $alias_href-&gt;{$t}&quot; );</td></tr>
<tr><td class="h">504</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">505</td><td colspan="5"></td></tr><tr><td class="h">506</td><td><div class="c3">42</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join &#39;, &#39;, @tables;</td></tr>
<tr><td class="h">507</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">508</td><td colspan="5"></td></tr><tr><td class="h">509</td><td></td><td></td><td></td><td></td><td class="s">sub _get_func_cache {</td></tr>
<tr><td class="h">510</td><td><div class="c3">116</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L510">116</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">511</td><td colspan="5"></td></tr><tr><td class="h">512</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">513</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self =&gt; &#39;Object&#39;;</td></tr>
<tr><td class="h">514</td><td colspan="5"></td></tr><tr><td class="h">515</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $func = ( caller(1) )[3];</td></tr>
<tr><td class="h">516</td><td colspan="5"></td></tr><tr><td class="h">517</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $c = $self-&gt;_create_cache;</td></tr>
<tr><td class="h">518</td><td colspan="5"></td></tr><tr><td class="h">519</td><td><div class="c3">116</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L519">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( !exists $c-&gt;{$func} ) {</td></tr>
<tr><td class="h">520</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$c-&gt;{$func} = {};</td></tr>
<tr><td class="h">521</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_create_cache($c);</td></tr>
<tr><td class="h">522</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">523</td><td colspan="5"></td></tr><tr><td class="h">524</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $c-&gt;{$func};</td></tr>
<tr><td class="h">525</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">526</td><td colspan="5"></td></tr><tr><td class="h">527</td><td></td><td></td><td></td><td></td><td class="s">sub _get_constraint_non_fk_columns {</td></tr>
<tr><td class="h">528</td><td><div class="c3">116</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L528">116</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">529</td><td colspan="5"></td></tr><tr><td class="h">530</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">531</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">532</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">533</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $constraint_name =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">534</td><td colspan="5"></td></tr><tr><td class="h">535</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $c = $self-&gt;_get_func_cache;</td></tr>
<tr><td class="h">536</td><td colspan="5"></td></tr><tr><td class="h">537</td><td><div class="c3">116</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L537">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( defined $c-&gt;{$table}-&gt;{$constraint_name} ) {</td></tr>
<tr><td class="h">538</td><td><div class="c3">112</div><div class="c3">112</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return @{ $c-&gt;{$table}-&gt;{$constraint_name} };</td></tr>
<tr><td class="h">539</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">540</td><td colspan="5"></td></tr><tr><td class="h">541</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# $hashref-&gt;{constraint_name}-&gt;[ { col1 }, { col2 } ]</td></tr>
<tr><td class="h">542</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">543</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#Hash elements for each column:</td></tr>
<tr><td class="h">544</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">545</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;CONSTRAINT_SCHEMA</td></tr>
<tr><td class="h">546</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;CONSTRAINT_TYPE</td></tr>
<tr><td class="h">547</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;COLUMN_NAME</td></tr>
<tr><td class="h">548</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;ORDINAL_POSITION</td></tr>
<tr><td class="h">549</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;POSITION_IN_UNIQUE_CONSTRAINT</td></tr>
<tr><td class="h">550</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_COLUMN_NAME</td></tr>
<tr><td class="h">551</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_TABLE_SCHEMA</td></tr>
<tr><td class="h">552</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;REFERENCED_TABLE_NAME</td></tr>
<tr><td class="h">553</td><td colspan="5"></td></tr><tr><td class="h">554</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @columns;</td></tr>
<tr><td class="h">555</td><td colspan="5"></td></tr><tr><td class="h">556</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $con_aref</td></tr>
<tr><td class="h">557</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $self-&gt;get_constraint( table =&gt; $table, name =&gt; $constraint_name );</td></tr>
<tr><td class="h">558</td><td colspan="5"></td></tr><tr><td class="h">559</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$con_aref) {</td></tr>
<tr><td class="h">560</td><td colspan="5"></td></tr><tr><td class="h">561</td><td><div class="c3">5</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = $col_href-&gt;{COLUMN_NAME};</td></tr>
<tr><td class="h">562</td><td colspan="5"></td></tr><tr><td class="h">563</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L563">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$self-&gt;is_fk_column( table =&gt; $table, column =&gt; $col_name ) ) {</td></tr>
<tr><td class="h">564</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @columns, $col_name );</td></tr>
<tr><td class="h">565</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">566</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">567</td><td colspan="5"></td></tr><tr><td class="h">568</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$c-&gt;{$table}-&gt;{$constraint_name} = \@columns;</td></tr>
<tr><td class="h">569</td><td><div class="c3">4</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @columns;</td></tr>
<tr><td class="h">570</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">571</td><td colspan="5"></td></tr><tr><td class="h">572</td><td></td><td></td><td></td><td></td><td class="s">sub _get_uniq_constraint_data_sql {</td></tr>
<tr><td class="h">573</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L573">41</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">574</td><td colspan="5"></td></tr><tr><td class="h">575</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">576</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">577</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">578</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">579</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $constraint_name =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">580</td><td colspan="5"></td></tr><tr><td class="h">581</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#optional</td></tr>
<tr><td class="h">582</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">583</td><td colspan="5"></td></tr><tr><td class="h">584</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $alias_href = $self-&gt;_get_table2alias_lookup(</td></tr>
<tr><td class="h">585</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">586</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $constraint_name,</td></tr>
<tr><td class="h">587</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1</td></tr>
<tr><td class="h">588</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">589</td><td colspan="5"></td></tr><tr><td class="h">590</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $tables = $self-&gt;_get_from_clause($alias_href);</td></tr>
<tr><td class="h">591</td><td colspan="5"></td></tr><tr><td class="h">592</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $cols = $self-&gt;_get_select_clause(</td></tr>
<tr><td class="h">593</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">594</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $constraint_name,</td></tr>
<tr><td class="h">595</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias_href&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $alias_href,</td></tr>
<tr><td class="h">596</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $fq</td></tr>
<tr><td class="h">597</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">598</td><td colspan="5"></td></tr><tr><td class="h">599</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $where = $self-&gt;_get_where_not_exists(</td></tr>
<tr><td class="h">600</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">601</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $constraint_name,</td></tr>
<tr><td class="h">602</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias_href&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $alias_href</td></tr>
<tr><td class="h">603</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">604</td><td colspan="5"></td></tr><tr><td class="h">605</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $extra_criteria = $self-&gt;_get_where_clause(</td></tr>
<tr><td class="h">606</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">607</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; $col_data_href,</td></tr>
<tr><td class="h">608</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias_href&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $alias_href,</td></tr>
<tr><td class="h">609</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">610</td><td><div class="c3">41</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L610">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$extra_criteria = &quot; and $extra_criteria &quot; if $extra_criteria;</td></tr>
<tr><td class="h">611</td><td colspan="5"></td></tr><tr><td class="h">612</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# TODO: implement this for randomness:</td></tr>
<tr><td class="h">613</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">614</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#SELECT name</td></tr>
<tr><td class="h">615</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;FROM random AS r1 JOIN</td></tr>
<tr><td class="h">616</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SELECT (RAND() *</td></tr>
<tr><td class="h">617</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(SELECT MAX(id)</td></tr>
<tr><td class="h">618</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FROM random)) AS id)</td></tr>
<tr><td class="h">619</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AS r2</td></tr>
<tr><td class="h">620</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# WHERE r1.id &gt;= r2.id</td></tr>
<tr><td class="h">621</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# ORDER BY r1.id ASC</td></tr>
<tr><td class="h">622</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# LIMIT 1</td></tr>
<tr><td class="h">623</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">624</td><td colspan="5"></td></tr><tr><td class="h">625</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{</td></tr>
<tr><td class="h">626</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select distinct $cols</td></tr>
<tr><td class="h">627</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from $tables</td></tr>
<tr><td class="h">628</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where not exists ($where)</td></tr>
<tr><td class="h">629</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$extra_criteria</td></tr>
<tr><td class="h">630</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;limit 1</td></tr>
<tr><td class="h">631</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">632</td><td colspan="5"></td></tr><tr><td class="h">633</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $sql;</td></tr>
<tr><td class="h">634</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">635</td><td colspan="5"></td></tr><tr><td class="h">636</td><td></td><td></td><td></td><td></td><td class="s">sub _get_uniq_constraint_data {</td></tr>
<tr><td class="h">637</td><td><div class="c3">116</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L637">116</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">638</td><td colspan="5"></td></tr><tr><td class="h">639</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#required</td></tr>
<tr><td class="h">640</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">641</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">642</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">643</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $constraint_name =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">644</td><td colspan="5"></td></tr><tr><td class="h">645</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#optional</td></tr>
<tr><td class="h">646</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">647</td><td colspan="5"></td></tr><tr><td class="h">648</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; $fq );</td></tr>
<tr><td class="h">649</td><td colspan="5"></td></tr><tr><td class="h">650</td><td><div class="c3">116</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L650">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if (!$self-&gt;_get_constraint_non_fk_columns(</td></tr>
<tr><td class="h">651</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">652</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $constraint_name</td></tr>
<tr><td class="h">653</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">654</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">655</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">656</td><td colspan="5"></td></tr><tr><td class="h">657</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">658</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# the data for each column, in the uniq constraint, has to come from</td></tr>
<tr><td class="h">659</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# a reference table</td></tr>
<tr><td class="h">660</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">661</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = $self-&gt;_get_uniq_constraint_data_sql(</td></tr>
<tr><td class="h">662</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">663</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href&nbsp;&nbsp;&nbsp;=&gt; $col_data_href,</td></tr>
<tr><td class="h">664</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $constraint_name,</td></tr>
<tr><td class="h">665</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $fq</td></tr>
<tr><td class="h">666</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">667</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose_sql($sql);</td></tr>
<tr><td class="h">668</td><td colspan="5"></td></tr><tr><td class="h">669</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = $self-&gt;_dbh-&gt;selectrow_hashref($sql);</td></tr>
<tr><td class="h">670</td><td><div class="c3">41</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L670">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$href ) {</td></tr>
<tr><td class="h">671</td><td><div class="c3">1</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L671">50</a></div><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L671">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;is_self_referencing( table =&gt; $table ) ) {</td></tr>
<tr><td class="h">672</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;self referencing tables not implemented&quot;;</td></tr>
<tr><td class="h">673</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">674</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif (</td></tr>
<tr><td class="h">675</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_is_table_empty(</td></tr>
<tr><td class="h">676</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">677</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; $col_data_href</td></tr>
<tr><td class="h">678</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">679</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">680</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">681</td><td colspan="5"></td></tr><tr><td class="h">682</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# let it go through</td></tr>
<tr><td class="h">683</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">684</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">685</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot;not enough data in parent table(s) to create a &quot;</td></tr>
<tr><td class="h">686</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;new row due to constraint $constraint_name&quot;;</td></tr>
<tr><td class="h">687</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">688</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">689</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">690</td><td><div class="c3">40</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col ( keys %$href ) {</td></tr>
<tr><td class="h">691</td><td colspan="5"></td></tr><tr><td class="h">692</td><td><div class="c3">80</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L692">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !exists $col_data_href-&gt;{ lc $col } ) {</td></tr>
<tr><td class="h">693</td><td colspan="5"></td></tr><tr><td class="h">694</td><td><div class="c3">80</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$col_data_href-&gt;{ lc $col } = $href-&gt;{$col};</td></tr>
<tr><td class="h">695</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">696</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">697</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">698</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">699</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">700</td><td colspan="5"></td></tr><tr><td class="h">701</td><td></td><td></td><td></td><td></td><td class="s">sub _join_tables {</td></tr>
<tr><td class="h">702</td><td><div class="c3">50</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L702">50</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">703</td><td colspan="5"></td></tr><tr><td class="h">704</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">705</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">706</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $child_table&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">707</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $parent_table =&gt; &#39;Str&#39;;</td></tr>
<tr><td class="h">708</td><td colspan="5"></td></tr><tr><td class="h">709</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">710</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# debug stuff</td></tr>
<tr><td class="h">711</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">712</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift;</td></tr>
<tr><td class="h">713</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;enter:\n&quot; . Dumper( \@_ ) );</td></tr>
<tr><td class="h">714</td><td colspan="5"></td></tr><tr><td class="h">715</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$child_table = $self-&gt;_fq( table =&gt; $child_table, fq =&gt; 1 );</td></tr>
<tr><td class="h">716</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $child_alias = $self-&gt;_get_table_alias( table =&gt; $child_table );</td></tr>
<tr><td class="h">717</td><td colspan="5"></td></tr><tr><td class="h">718</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$parent_table = $self-&gt;_fq( table =&gt; $parent_table, fq =&gt; 1 );</td></tr>
<tr><td class="h">719</td><td colspan="5"></td></tr><tr><td class="h">720</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $join_sql;</td></tr>
<tr><td class="h">721</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($child_table);</td></tr>
<tr><td class="h">722</td><td colspan="5"></td></tr><tr><td class="h">723</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_name ( keys %$fks_href ) {</td></tr>
<tr><td class="h">724</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_aref&nbsp;&nbsp;&nbsp;&nbsp;= $fks_href-&gt;{$fk_name};</td></tr>
<tr><td class="h">725</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_table&nbsp;&nbsp;= $fk_aref-&gt;[0]-&gt;{REFERENCED_TABLE_NAME};</td></tr>
<tr><td class="h">726</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_schema = $fk_aref-&gt;[0]-&gt;{REFERENCED_TABLE_SCHEMA};</td></tr>
<tr><td class="h">727</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $self-&gt;_fq(</td></tr>
<tr><td class="h">728</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $ref_table,</td></tr>
<tr><td class="h">729</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema =&gt; $ref_schema,</td></tr>
<tr><td class="h">730</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1</td></tr>
<tr><td class="h">731</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">732</td><td colspan="5"></td></tr><tr><td class="h">733</td><td><div class="c3">100</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose(&quot;ref_fq=$ref_fq\nparent_table=$parent_table&quot;);</td></tr>
<tr><td class="h">734</td><td colspan="5"></td></tr><tr><td class="h">735</td><td><div class="c3">100</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L735">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $ref_fq eq $parent_table ) {</td></tr>
<tr><td class="h">736</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_alias = $self-&gt;_get_table_alias( table =&gt; $ref_fq );</td></tr>
<tr><td class="h">737</td><td colspan="5"></td></tr><tr><td class="h">738</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$fk_aref) {</td></tr>
<tr><td class="h">739</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$join_sql .= sprintf( &quot;%s.%s = %s.%s\n&quot;,</td></tr>
<tr><td class="h">740</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ref_alias,&nbsp;&nbsp;&nbsp;$col_href-&gt;{REFERENCED_COLUMN_NAME},</td></tr>
<tr><td class="h">741</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$child_alias, $col_href-&gt;{COLUMN_NAME} );</td></tr>
<tr><td class="h">742</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">743</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">744</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">745</td><td colspan="5"></td></tr><tr><td class="h">746</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose($join_sql);</td></tr>
<tr><td class="h">747</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $join_sql;</td></tr>
<tr><td class="h">748</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">749</td><td colspan="5"></td></tr><tr><td class="h">750</td><td></td><td></td><td></td><td></td><td class="s">sub _build_select_clause {</td></tr>
<tr><td class="h">751</td><td><div class="c3">171</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L751">171</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">752</td><td colspan="5"></td></tr><tr><td class="h">753</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">754</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">755</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">756</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_tree =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">757</td><td colspan="5"></td></tr><tr><td class="h">758</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">759</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# debug stuff</td></tr>
<tr><td class="h">760</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">761</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift;</td></tr>
<tr><td class="h">762</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;enter:\n&quot; . Dumper( \@_ ) );</td></tr>
<tr><td class="h">763</td><td colspan="5"></td></tr><tr><td class="h">764</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; 1 );</td></tr>
<tr><td class="h">765</td><td colspan="5"></td></tr><tr><td class="h">766</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @select;</td></tr>
<tr><td class="h">767</td><td colspan="5"></td></tr><tr><td class="h">768</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">769</td><td colspan="5"></td></tr><tr><td class="h">770</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_name ( keys %$fks_href ) {</td></tr>
<tr><td class="h">771</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_aref = $fks_href-&gt;{$fk_name};</td></tr>
<tr><td class="h">772</td><td colspan="5"></td></tr><tr><td class="h">773</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_table_fq = $self-&gt;_fq(</td></tr>
<tr><td class="h">774</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $fk_aref-&gt;[0]-&gt;{REFERENCED_TABLE_NAME},</td></tr>
<tr><td class="h">775</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema =&gt; $fk_aref-&gt;[0]-&gt;{REFERENCED_TABLE_SCHEMA},</td></tr>
<tr><td class="h">776</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1</td></tr>
<tr><td class="h">777</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">778</td><td colspan="5"></td></tr><tr><td class="h">779</td><td><div class="c3">212</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L779">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( exists $fk_tree-&gt;{$ref_table_fq} ) {</td></tr>
<tr><td class="h">780</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_alias = $self-&gt;_get_table_alias( table =&gt; $ref_table_fq );</td></tr>
<tr><td class="h">781</td><td colspan="5"></td></tr><tr><td class="h">782</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$fk_aref) {</td></tr>
<tr><td class="h">783</td><td colspan="5"></td></tr><tr><td class="h">784</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @select,</td></tr>
<tr><td class="h">785</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;$ref_alias.&quot; . $col_href-&gt;{REFERENCED_COLUMN_NAME} );</td></tr>
<tr><td class="h">786</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">787</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">788</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">789</td><td colspan="5"></td></tr><tr><td class="h">790</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $select = join &#39;, &#39;, @select;</td></tr>
<tr><td class="h">791</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose(&quot;return:\n$select&quot;);</td></tr>
<tr><td class="h">792</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return $select;</td></tr>
<tr><td class="h">793</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">794</td><td colspan="5"></td></tr><tr><td class="h">795</td><td></td><td></td><td></td><td></td><td class="s">sub _build_from_clause {</td></tr>
<tr><td class="h">796</td><td><div class="c3">221</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L796">221</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">797</td><td colspan="5"></td></tr><tr><td class="h">798</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">799</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">800</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">801</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_tree =&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">802</td><td colspan="5"></td></tr><tr><td class="h">803</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">804</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $depth =&gt; { isa =&gt; &#39;Int&#39;, optional =&gt; 1, default =&gt; 0 };</td></tr>
<tr><td class="h">805</td><td colspan="5"></td></tr><tr><td class="h">806</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">807</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# debug stuff</td></tr>
<tr><td class="h">808</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">809</td><td><div class="c3">221</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift;</td></tr>
<tr><td class="h">810</td><td><div class="c3">221</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;enter:\n&quot; . Dumper( \@_ ) );</td></tr>
<tr><td class="h">811</td><td colspan="5"></td></tr><tr><td class="h">812</td><td><div class="c3">221</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %from;</td></tr>
<tr><td class="h">813</td><td colspan="5"></td></tr><tr><td class="h">814</td><td><div class="c3">221</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L814">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( !$depth ) {</td></tr>
<tr><td class="h">815</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $parent_table ( keys %$fk_tree ) {</td></tr>
<tr><td class="h">816</td><td colspan="5"></td></tr><tr><td class="h">817</td><td><div class="c3">212</div><div class="c3">212</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L817">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( scalar keys %{ $fk_tree-&gt;{$parent_table} } ) {</td></tr>
<tr><td class="h">818</td><td colspan="5"></td></tr><tr><td class="h">819</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %tmp = $self-&gt;_build_from_clause(</td></tr>
<tr><td class="h">820</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;=&gt; $parent_table,</td></tr>
<tr><td class="h">821</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fk_tree =&gt; $fk_tree-&gt;{$parent_table},</td></tr>
<tr><td class="h">822</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth&nbsp;&nbsp;&nbsp;=&gt; $depth + 1</td></tr>
<tr><td class="h">823</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">824</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $key ( keys %tmp ) {</td></tr>
<tr><td class="h">825</td><td><div class="c3">100</div><div class="c3">100</div><div class="c3">100</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @{ $from{$key} }, @{ $tmp{$key} } );</td></tr>
<tr><td class="h">826</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">827</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">828</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">829</td><td><div class="c3">162</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias = $self-&gt;_get_table_alias( table =&gt; $parent_table );</td></tr>
<tr><td class="h">830</td><td><div class="c3">162</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from{&quot;$parent_table $alias&quot;} = [];</td></tr>
<tr><td class="h">831</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">832</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">833</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">834</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">835</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $parent_table ( keys %$fk_tree ) {</td></tr>
<tr><td class="h">836</td><td colspan="5"></td></tr><tr><td class="h">837</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $join = $self-&gt;_join_tables(</td></tr>
<tr><td class="h">838</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;child_table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">839</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parent_table =&gt; $parent_table</td></tr>
<tr><td class="h">840</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">841</td><td colspan="5"></td></tr><tr><td class="h">842</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias = $self-&gt;_get_table_alias( table =&gt; $table );</td></tr>
<tr><td class="h">843</td><td><div class="c3">50</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L843">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$from{&quot;$table $alias&quot;} ) {</td></tr>
<tr><td class="h">844</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from{&quot;$table $alias&quot;} = [];</td></tr>
<tr><td class="h">845</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">846</td><td colspan="5"></td></tr><tr><td class="h">847</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$alias = $self-&gt;_get_table_alias( table =&gt; $parent_table );</td></tr>
<tr><td class="h">848</td><td><div class="c3">50</div><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @{ $from{&quot;$parent_table $alias&quot;} }, $join );</td></tr>
<tr><td class="h">849</td><td colspan="5"></td></tr><tr><td class="h">850</td><td><div class="c3">50</div><div class="c3">50</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L850">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( scalar keys %{ $fk_tree-&gt;{$parent_table} } ) {</td></tr>
<tr><td class="h">851</td><td colspan="5"></td></tr><tr><td class="h">852</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %tmp = $self-&gt;_build_from_clause(</td></tr>
<tr><td class="h">853</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;=&gt; $parent_table,</td></tr>
<tr><td class="h">854</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fk_tree =&gt; $fk_tree-&gt;{$parent_table},</td></tr>
<tr><td class="h">855</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth&nbsp;&nbsp;&nbsp;=&gt; $depth + 1</td></tr>
<tr><td class="h">856</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">857</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $key ( keys %tmp ) {</td></tr>
<tr><td class="h">858</td><td><div class="c0">0</div><div class="c0">0</div><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @{ $from{$key} }, @{ $tmp{$key} } );</td></tr>
<tr><td class="h">859</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">860</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">861</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">862</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">863</td><td colspan="5"></td></tr><tr><td class="h">864</td><td><div class="c3">221</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;return:\n&quot; . Dumper( \%from ) );</td></tr>
<tr><td class="h">865</td><td><div class="c3">221</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return %from;</td></tr>
<tr><td class="h">866</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">867</td><td colspan="5"></td></tr><tr><td class="h">868</td><td></td><td></td><td></td><td></td><td class="s">sub _build_where_clause {</td></tr>
<tr><td class="h">869</td><td><div class="c3">433</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L869">433</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">870</td><td colspan="5"></td></tr><tr><td class="h">871</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">872</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">873</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">874</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_tree&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">875</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">876</td><td colspan="5"></td></tr><tr><td class="h">877</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">878</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $depth =&gt; { isa =&gt; &#39;Int&#39;, optional =&gt; 1, default =&gt; 0 };</td></tr>
<tr><td class="h">879</td><td colspan="5"></td></tr><tr><td class="h">880</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">881</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# debug stuff</td></tr>
<tr><td class="h">882</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">883</td><td><div class="c3">433</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift;</td></tr>
<tr><td class="h">884</td><td><div class="c3">433</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;enter:\n&quot; . Dumper( \@_ ) );</td></tr>
<tr><td class="h">885</td><td colspan="5"></td></tr><tr><td class="h">886</td><td><div class="c3">433</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @where;</td></tr>
<tr><td class="h">887</td><td colspan="5"></td></tr><tr><td class="h">888</td><td><div class="c3">433</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L888">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($depth) {</td></tr>
<tr><td class="h">889</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $desc = $self-&gt;describe_table($table);</td></tr>
<tr><td class="h">890</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias = $self-&gt;_get_table_alias( table =&gt; $table );</td></tr>
<tr><td class="h">891</td><td colspan="5"></td></tr><tr><td class="h">892</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$desc) {</td></tr>
<tr><td class="h">893</td><td><div class="c3">453</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = lc $col_href-&gt;{FIELD};</td></tr>
<tr><td class="h">894</td><td colspan="5"></td></tr><tr><td class="h">895</td><td><div class="c3">453</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L895">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( exists $col_data_href-&gt;{$col_name} ) {</td></tr>
<tr><td class="h">896</td><td><div class="c3">130</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @where,</td></tr>
<tr><td class="h">897</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;$alias.$col_name = $col_data_href-&gt;{$col_name}&quot; );</td></tr>
<tr><td class="h">898</td><td colspan="5"></td></tr><tr><td class="h">899</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $col_data_href-&gt;{$col_name};</td></tr>
<tr><td class="h">900</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">901</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">902</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">903</td><td colspan="5"></td></tr><tr><td class="h">904</td><td><div class="c3">433</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $parent_table ( keys %$fk_tree ) {</td></tr>
<tr><td class="h">905</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push(</td></tr>
<tr><td class="h">906</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@where,</td></tr>
<tr><td class="h">907</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_build_where_clause(</td></tr>
<tr><td class="h">908</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $parent_table,</td></tr>
<tr><td class="h">909</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fk_tree&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $fk_tree-&gt;{$parent_table},</td></tr>
<tr><td class="h">910</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; $col_data_href,</td></tr>
<tr><td class="h">911</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $depth + 1</td></tr>
<tr><td class="h">912</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">913</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">914</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">915</td><td colspan="5"></td></tr><tr><td class="h">916</td><td><div class="c3">433</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose(&quot;@where&quot;);</td></tr>
<tr><td class="h">917</td><td><div class="c3">433</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return @where;</td></tr>
<tr><td class="h">918</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">919</td><td colspan="5"></td></tr><tr><td class="h">920</td><td></td><td></td><td></td><td></td><td class="s">sub _get_fk_data {</td></tr>
<tr><td class="h">921</td><td><div class="c3">216</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L921">216</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">922</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">923</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">924</td><td colspan="5"></td></tr><tr><td class="h">925</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fk_tree = $self-&gt;_get_fk_tree(</td></tr>
<tr><td class="h">926</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">927</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remaining_data_href =&gt; {%$col_data_href},</td></tr>
<tr><td class="h">928</td><td colspan="5"></td></tr><tr><td class="h">929</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">930</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;fk_tree:\n &quot; . Dumper($fk_tree) );</td></tr>
<tr><td class="h">931</td><td colspan="5"></td></tr><tr><td class="h">932</td><td><div class="c3">216</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L932">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( scalar keys %$fk_tree ) {</td></tr>
<tr><td class="h">933</td><td colspan="5"></td></tr><tr><td class="h">934</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $select = $self-&gt;_build_select_clause(</td></tr>
<tr><td class="h">935</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">936</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fk_tree =&gt; $fk_tree</td></tr>
<tr><td class="h">937</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">938</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose($select);</td></tr>
<tr><td class="h">939</td><td colspan="5"></td></tr><tr><td class="h">940</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %from = $self-&gt;_build_from_clause(</td></tr>
<tr><td class="h">941</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">942</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fk_tree =&gt; $fk_tree</td></tr>
<tr><td class="h">943</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">944</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias = $self-&gt;_get_table_alias( table =&gt; $table );</td></tr>
<tr><td class="h">945</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $from = &#39;&#39;;</td></tr>
<tr><td class="h">946</td><td colspan="5"></td></tr><tr><td class="h">947</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %depth_chart;</td></tr>
<tr><td class="h">948</td><td colspan="5"></td></tr><tr><td class="h">949</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $t ( keys %from ) {</td></tr>
<tr><td class="h">950</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my ( $tname, $talias ) = split( /\s+/, $t );</td></tr>
<tr><td class="h">951</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $dep = $self-&gt;get_depth($tname);</td></tr>
<tr><td class="h">952</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$depth_chart{$dep}-&gt;{$t} = 1;</td></tr>
<tr><td class="h">953</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">954</td><td colspan="5"></td></tr><tr><td class="h">955</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @from_tables;</td></tr>
<tr><td class="h">956</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @no_join_tables;</td></tr>
<tr><td class="h">957</td><td colspan="5"></td></tr><tr><td class="h">958</td><td><div class="c3">171</div><div class="c3">91</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $depth ( sort { $b &lt;=&gt; $a } keys(%depth_chart) ) {</td></tr>
<tr><td class="h">959</td><td colspan="5"></td></tr><tr><td class="h">960</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ptr = $depth_chart{$depth};</td></tr>
<tr><td class="h">961</td><td colspan="5"></td></tr><tr><td class="h">962</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $t ( keys %$ptr ) {</td></tr>
<tr><td class="h">963</td><td colspan="5"></td></tr><tr><td class="h">964</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;foreach my $t ( keys %from ) {</td></tr>
<tr><td class="h">965</td><td><div class="c3">262</div><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @a = @{ $from{$t} };</td></tr>
<tr><td class="h">966</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@a = uniq @a;</td></tr>
<tr><td class="h">967</td><td><div class="c3">262</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L967">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !@a ) {</td></tr>
<tr><td class="h">968</td><td><div class="c3">212</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @no_join_tables, $t );</td></tr>
<tr><td class="h">969</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">970</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">971</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from .= &quot;inner join $t on &quot; . join( &#39; and &#39;, @a );</td></tr>
<tr><td class="h">972</td><td><div class="c3">50</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from .= &quot;\n&quot;;</td></tr>
<tr><td class="h">973</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">974</td><td colspan="5"></td></tr><tr><td class="h">975</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @from_tables, $t );</td></tr>
<tr><td class="h">976</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">977</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">978</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $tmp = $from;</td></tr>
<tr><td class="h">979</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from = join( &quot;\ninner join\n&quot;, @no_join_tables );</td></tr>
<tr><td class="h">980</td><td><div class="c3">171</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L980">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from .= &quot;\n$tmp&quot; if $tmp;</td></tr>
<tr><td class="h">981</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose($from);</td></tr>
<tr><td class="h">982</td><td colspan="5"></td></tr><tr><td class="h">983</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @where = $self-&gt;_build_where_clause(</td></tr>
<tr><td class="h">984</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">985</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fk_tree&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $fk_tree,</td></tr>
<tr><td class="h">986</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; {%$col_data_href}</td></tr>
<tr><td class="h">987</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">988</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $where = join( &#39; and &#39;, uniq @where );</td></tr>
<tr><td class="h">989</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose($where);</td></tr>
<tr><td class="h">990</td><td colspan="5"></td></tr><tr><td class="h">991</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $sql = qq{</td></tr>
<tr><td class="h">992</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;select</td></tr>
<tr><td class="h">993</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$select</td></tr>
<tr><td class="h">994</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from</td></tr>
<tr><td class="h">995</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$from</td></tr>
<tr><td class="h">996</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">997</td><td><div class="c3">171</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L997">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql .= qq{</td></tr>
<tr><td class="h">998</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where</td></tr>
<tr><td class="h">999</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$where</td></tr>
<tr><td class="h">1000</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} if $where;</td></tr>
<tr><td class="h">1001</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql .= q{</td></tr>
<tr><td class="h">1002</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;limit 1</td></tr>
<tr><td class="h">1003</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</td></tr>
<tr><td class="h">1004</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose_sql($sql);</td></tr>
<tr><td class="h">1005</td><td colspan="5"></td></tr><tr><td class="h">1006</td><td><div class="c3">171</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = $self-&gt;_dbh-&gt;selectrow_hashref($sql);</td></tr>
<tr><td class="h">1007</td><td><div class="c3">171</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1007">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$href ) {</td></tr>
<tr><td class="h">1008</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $msg</td></tr>
<tr><td class="h">1009</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= &quot;not enough data in one (or more) parent table(s) to create &quot;</td></tr>
<tr><td class="h">1010</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. &quot;a new row in table $table\n\nparent tables:\n&quot;;</td></tr>
<tr><td class="h">1011</td><td colspan="5"></td></tr><tr><td class="h">1012</td><td><div class="c3">1</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $t ( sort uniq @from_tables ) {</td></tr>
<tr><td class="h">1013</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$msg .= &quot;\t$t\n\n&quot;;</td></tr>
<tr><td class="h">1014</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1015</td><td colspan="5"></td></tr><tr><td class="h">1016</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;croak $msg;</td></tr>
<tr><td class="h">1017</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1018</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1019</td><td><div class="c3">170</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col ( keys %$href ) {</td></tr>
<tr><td class="h">1020</td><td><div class="c3">210</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1020">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !exists $col_data_href-&gt;{ lc $col } ) {</td></tr>
<tr><td class="h">1021</td><td><div class="c3">130</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1021">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !defined( $href-&gt;{$col} ) ) {</td></tr>
<tr><td class="h">1022</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1022">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!$self-&gt;is_column_nullable(</td></tr>
<tr><td class="h">1023</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1024</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col</td></tr>
<tr><td class="h">1025</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1026</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1027</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1028</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess</td></tr>
<tr><td class="h">1029</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;tried to set a non-nullable column to null ($table.$col)&quot;;</td></tr>
<tr><td class="h">1030</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1031</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1032</td><td colspan="5"></td></tr><tr><td class="h">1033</td><td><div class="c3">130</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$col_data_href-&gt;{ lc $col } = $href-&gt;{$col};</td></tr>
<tr><td class="h">1034</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1035</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1036</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1037</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1038</td><td colspan="5"></td></tr><tr><td class="h">1039</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_convert_missing_fk_cols_to_undef(</td></tr>
<tr><td class="h">1040</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1041</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href =&gt; $col_data_href</td></tr>
<tr><td class="h">1042</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1043</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1044</td><td colspan="5"></td></tr><tr><td class="h">1045</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">1046</td><td></td><td></td><td></td><td></td><td class="s"># find foreign key _tables_ that we are missing data for return in a</td></tr>
<tr><td class="h">1047</td><td></td><td></td><td></td><td></td><td class="s"># hierarchical structure</td></tr>
<tr><td class="h">1048</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">1049</td><td></td><td></td><td></td><td></td><td class="s">sub _get_fk_tree {</td></tr>
<tr><td class="h">1050</td><td><div class="c3">769</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1050">769</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1051</td><td colspan="5"></td></tr><tr><td class="h">1052</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1053</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1054</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $remaining_data_href =&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">1055</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1056</td><td colspan="5"></td></tr><tr><td class="h">1057</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">1058</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $depth =&gt; { isa =&gt; &#39;Int&#39;, optional =&gt; 1, default =&gt; 0 };</td></tr>
<tr><td class="h">1059</td><td colspan="5"></td></tr><tr><td class="h">1060</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $node = {};</td></tr>
<tr><td class="h">1061</td><td colspan="5"></td></tr><tr><td class="h">1062</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1063</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# debug stuff</td></tr>
<tr><td class="h">1064</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1065</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @a = @_;</td></tr>
<tr><td class="h">1066</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift @a;</td></tr>
<tr><td class="h">1067</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( Dumper( \@a ) );</td></tr>
<tr><td class="h">1068</td><td colspan="5"></td></tr><tr><td class="h">1069</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">1070</td><td></td><td></td><td></td><td></td><td class="s"># all data qualifications satisfied</td></tr>
<tr><td class="h">1071</td><td></td><td></td><td></td><td></td><td class="s">#</td></tr>
<tr><td class="h">1072</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td class="h">1073</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if</td></tr>
<tr><td class="h">1074</td><td></td><td></td><td></td><td></td><td class="s">#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keys %$remaining_data_href == 0;&nbsp;&nbsp;# no reason to continue up the chain</td></tr>
<tr><td class="h">1075</td><td colspan="5"></td></tr><tr><td class="h">1076</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1077</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# does this table have any columns for which we have data left?</td></tr>
<tr><td class="h">1078</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1079</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $hit;</td></tr>
<tr><td class="h">1080</td><td colspan="5"></td></tr><tr><td class="h">1081</td><td><div class="c3">769</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1081">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $depth != 0 ) {&nbsp;&nbsp;&nbsp;&nbsp;# skip root table</td></tr>
<tr><td class="h">1082</td><td colspan="5"></td></tr><tr><td class="h">1083</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $desc = $self-&gt;describe_table($table);</td></tr>
<tr><td class="h">1084</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href (@$desc) {</td></tr>
<tr><td class="h">1085</td><td colspan="5"></td></tr><tr><td class="h">1086</td><td><div class="c3">794</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = $col_href-&gt;{FIELD};</td></tr>
<tr><td class="h">1087</td><td colspan="5"></td></tr><tr><td class="h">1088</td><td><div class="c3">794</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1088">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( exists( $remaining_data_href-&gt;{$col_name} ) ) {</td></tr>
<tr><td class="h">1089</td><td colspan="5"></td></tr><tr><td class="h">1090</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# we have a hit</td></tr>
<tr><td class="h">1091</td><td><div class="c3">130</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete $remaining_data_href-&gt;{$col_name};</td></tr>
<tr><td class="h">1092</td><td><div class="c3">130</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose(&quot;removed col $col_name&quot;);</td></tr>
<tr><td class="h">1093</td><td><div class="c3">130</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hit++;</td></tr>
<tr><td class="h">1094</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1095</td><td colspan="5"></td></tr><tr><td class="h">1096</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( keys %$remaining_data_href == 0 ) {</td></tr>
<tr><td class="h">1097</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $node;</td></tr>
<tr><td class="h">1098</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1099</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1100</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1101</td><td colspan="5"></td></tr><tr><td class="h">1102</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1103</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# if we get here we are still in search of columns to match with</td></tr>
<tr><td class="h">1104</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# remaining_data_href.&nbsp;&nbsp;through recursion, keep walking the foreign keys</td></tr>
<tr><td class="h">1105</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# up the hierarchy.</td></tr>
<tr><td class="h">1106</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1107</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %seen;</td></tr>
<tr><td class="h">1108</td><td colspan="5"></td></tr><tr><td class="h">1109</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $fks_href = $self-&gt;get_fk_constraints($table);</td></tr>
<tr><td class="h">1110</td><td colspan="5"></td></tr><tr><td class="h">1111</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $fk_name ( keys %$fks_href ) {</td></tr>
<tr><td class="h">1112</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose(&quot;fk=$fk_name&quot;);</td></tr>
<tr><td class="h">1113</td><td colspan="5"></td></tr><tr><td class="h">1114</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_aref = $fks_href-&gt;{$fk_name};</td></tr>
<tr><td class="h">1115</td><td colspan="5"></td></tr><tr><td class="h">1116</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_href = shift @$fk_aref;&nbsp;&nbsp;&nbsp;&nbsp;# only need one column from fk</td></tr>
<tr><td class="h">1117</td><td colspan="5"></td></tr><tr><td class="h">1118</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_table&nbsp;&nbsp;= $col_href-&gt;{REFERENCED_TABLE_NAME};</td></tr>
<tr><td class="h">1119</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_schema = $col_href-&gt;{REFERENCED_TABLE_SCHEMA};</td></tr>
<tr><td class="h">1120</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $self-&gt;_fq(</td></tr>
<tr><td class="h">1121</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $ref_table,</td></tr>
<tr><td class="h">1122</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;schema =&gt; $ref_schema,</td></tr>
<tr><td class="h">1123</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; 1</td></tr>
<tr><td class="h">1124</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1125</td><td colspan="5"></td></tr><tr><td class="h">1126</td><td><div class="c3">553</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1126">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($self-&gt;is_self_referencing(</td></tr>
<tr><td class="h">1127</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table =&gt; $ref_fq,</td></tr>
<tr><td class="h">1128</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;=&gt; $fk_name</td></tr>
<tr><td class="h">1129</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1130</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1131</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1132</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose(&quot;$fk_name is self referencing&quot;);</td></tr>
<tr><td class="h">1133</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1134</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1135</td><td colspan="5"></td></tr><tr><td class="h">1136</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;next if $seen{$ref_fq};</td></tr>
<tr><td class="h">1137</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;$seen{$ref_fq} = 1;</td></tr>
<tr><td class="h">1138</td><td colspan="5"></td></tr><tr><td class="h">1139</td><td><div class="c3">553</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $href = $self-&gt;_get_fk_tree(</td></tr>
<tr><td class="h">1140</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remaining_data_href =&gt; {%$remaining_data_href},</td></tr>
<tr><td class="h">1141</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $ref_fq,</td></tr>
<tr><td class="h">1142</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;depth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $depth + 1</td></tr>
<tr><td class="h">1143</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1144</td><td><div class="c3">553</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1144">100</a></div></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--condition.html#L1144">100</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $href or $depth == 0 ) {</td></tr>
<tr><td class="h">1145</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hit++;&nbsp;&nbsp;&nbsp;&nbsp;# if a parent has a hit, we automatically do too</td></tr>
<tr><td class="h">1146</td><td><div class="c3">262</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1146">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !$href ) {</td></tr>
<tr><td class="h">1147</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$href = {};</td></tr>
<tr><td class="h">1148</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1149</td><td colspan="5"></td></tr><tr><td class="h">1150</td><td><div class="c3">262</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$node-&gt;{$ref_fq} = $href;</td></tr>
<tr><td class="h">1151</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1152</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1153</td><td colspan="5"></td></tr><tr><td class="h">1154</td><td><div class="c3">769</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( Dumper($node) );</td></tr>
<tr><td class="h">1155</td><td><div class="c3">769</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1155">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ($hit) {</td></tr>
<tr><td class="h">1156</td><td><div class="c3">351</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return $node;</td></tr>
<tr><td class="h">1157</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1158</td><td colspan="5"></td></tr><tr><td class="h">1159</td><td><div class="c3">418</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1160</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1161</td><td colspan="5"></td></tr><tr><td class="h">1162</td><td></td><td></td><td></td><td></td><td class="s">sub _convert_missing_fk_cols_to_undef {</td></tr>
<tr><td class="h">1163</td><td><div class="c3">215</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1163">215</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1164</td><td colspan="5"></td></tr><tr><td class="h">1165</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1166</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1167</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1168</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">1169</td><td colspan="5"></td></tr><tr><td class="h">1170</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1171</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;# debugging stuff</td></tr>
<tr><td class="h">1172</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1173</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;state $cnt++;</td></tr>
<tr><td class="h">1174</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift @_;</td></tr>
<tr><td class="h">1175</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;enter\n\nargs:\n&quot; . Dumper(@_), $cnt );</td></tr>
<tr><td class="h">1176</td><td colspan="5"></td></tr><tr><td class="h">1177</td><td><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col ( $self-&gt;get_fk_column_names( table =&gt; $table ) ) {</td></tr>
<tr><td class="h">1178</td><td><div class="c3">210</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1178">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( !exists $col_data_href-&gt;{$col} ) {</td></tr>
<tr><td class="h">1179</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1179">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!$self-&gt;is_column_nullable(</td></tr>
<tr><td class="h">1180</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1181</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col</td></tr>
<tr><td class="h">1182</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1183</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1184</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1185</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess</td></tr>
<tr><td class="h">1186</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;tried to set a non-nullable column to null ($table.$col)\n\n&quot;</td></tr>
<tr><td class="h">1187</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;. Dumper($col_data_href);</td></tr>
<tr><td class="h">1188</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1189</td><td colspan="5"></td></tr><tr><td class="h">1190</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$col_data_href-&gt;{$col} = undef;</td></tr>
<tr><td class="h">1191</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1192</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1193</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1194</td><td colspan="5"></td></tr><tr><td class="h">1195</td><td></td><td></td><td></td><td></td><td class="s">sub _get_ak_data {</td></tr>
<tr><td class="h">1196</td><td><div class="c3">216</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1196">216</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1197</td><td colspan="5"></td></tr><tr><td class="h">1198</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1199</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1200</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1201</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">1202</td><td colspan="5"></td></tr><tr><td class="h">1203</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#optional</td></tr>
<tr><td class="h">1204</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">1205</td><td colspan="5"></td></tr><tr><td class="h">1206</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; $fq );</td></tr>
<tr><td class="h">1207</td><td colspan="5"></td></tr><tr><td class="h">1208</td><td><div class="c3">216</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1208">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;has_ak($table) ) {</td></tr>
<tr><td class="h">1209</td><td colspan="5"></td></tr><tr><td class="h">1210</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $aks_href = $self-&gt;get_ak_constraints($table);</td></tr>
<tr><td class="h">1211</td><td colspan="5"></td></tr><tr><td class="h">1212</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach my $ak_name ( keys %$aks_href ) {</td></tr>
<tr><td class="h">1213</td><td colspan="5"></td></tr><tr><td class="h">1214</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_get_uniq_constraint_data(</td></tr>
<tr><td class="h">1215</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1216</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href&nbsp;&nbsp;&nbsp;=&gt; $col_data_href,</td></tr>
<tr><td class="h">1217</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $ak_name</td></tr>
<tr><td class="h">1218</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1219</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1220</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1221</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1222</td><td colspan="5"></td></tr><tr><td class="h">1223</td><td></td><td></td><td></td><td></td><td class="s">sub _get_pk_data {</td></tr>
<tr><td class="h">1224</td><td><div class="c3">217</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1224">217</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1225</td><td colspan="5"></td></tr><tr><td class="h">1226</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1227</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1228</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1229</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">1230</td><td colspan="5"></td></tr><tr><td class="h">1231</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">1232</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">1233</td><td colspan="5"></td></tr><tr><td class="h">1234</td><td><div class="c3">217</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; $fq );</td></tr>
<tr><td class="h">1235</td><td colspan="5"></td></tr><tr><td class="h">1236</td><td><div class="c3">217</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1236">100</a></div></td><td><div class="c0"><a href="blib-lib-MySQL-Util-Data-Create-pm--condition.html#L1236">67</a></div></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;if ( $self-&gt;has_pk($table) and !$self-&gt;is_pk_auto_inc($table) ) {</td></tr>
<tr><td class="h">1237</td><td colspan="5"></td></tr><tr><td class="h">1238</td><td><div class="c3">116</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_get_uniq_constraint_data(</td></tr>
<tr><td class="h">1239</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1240</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;col_data_href&nbsp;&nbsp;&nbsp;=&gt; $col_data_href,</td></tr>
<tr><td class="h">1241</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $self-&gt;get_pk_name($table)</td></tr>
<tr><td class="h">1242</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1243</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1244</td><td colspan="5"></td></tr><tr><td class="h">1245</td><td><div class="c3">216</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td class="h">1246</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1247</td><td colspan="5"></td></tr><tr><td class="h">1248</td><td></td><td></td><td></td><td></td><td class="s">sub _get_column_rules {</td></tr>
<tr><td class="h">1249</td><td><div class="c3">6</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1249">6</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1250</td><td colspan="5"></td></tr><tr><td class="h">1251</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1252</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1253</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1254</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">1255</td><td colspan="5"></td></tr><tr><td class="h">1256</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;state $cnt++;</td></tr>
<tr><td class="h">1257</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;shift @_;</td></tr>
<tr><td class="h">1258</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;enter($cnt)\nargs:\n\n&quot; . Dumper(@_), $cnt );</td></tr>
<tr><td class="h">1259</td><td colspan="5"></td></tr><tr><td class="h">1260</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %rules;</td></tr>
<tr><td class="h">1261</td><td colspan="5"></td></tr><tr><td class="h">1262</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;&nbsp;$arrayref-&gt;[ { col1 }, { col2 } ]</td></tr>
<tr><td class="h">1263</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1264</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#Hash elements for each column:</td></tr>
<tr><td class="h">1265</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#</td></tr>
<tr><td class="h">1266</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;DEFAULT</td></tr>
<tr><td class="h">1267</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;EXTRA</td></tr>
<tr><td class="h">1268</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;FIELD</td></tr>
<tr><td class="h">1269</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;KEY</td></tr>
<tr><td class="h">1270</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;NULL</td></tr>
<tr><td class="h">1271</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;&nbsp;TYPE</td></tr>
<tr><td class="h">1272</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#mysql&gt; DESCRIBE pet;</td></tr>
<tr><td class="h">1273</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#+---------+-------------+------+-----+---------+-------+</td></tr>
<tr><td class="h">1274</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#| Field&nbsp;&nbsp;&nbsp;| Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| Null | Key | Default | Extra |</td></tr>
<tr><td class="h">1275</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#+---------+-------------+------+-----+---------+-------+</td></tr>
<tr><td class="h">1276</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#| name&nbsp;&nbsp;&nbsp;&nbsp;| varchar(20) | YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1277</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#| owner&nbsp;&nbsp;&nbsp;| varchar(20) | YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1278</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#| species | varchar(20) | YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1279</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#| sex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| char(1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1280</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#| birth&nbsp;&nbsp;&nbsp;| date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1281</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#| death&nbsp;&nbsp;&nbsp;| date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| YES&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| NULL&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</td></tr>
<tr><td class="h">1282</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;#+---------+-------------+------+-----+---------+-------+</td></tr>
<tr><td class="h">1283</td><td colspan="5"></td></tr><tr><td class="h">1284</td><td><div class="c3">6</div><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col ( @{ $self-&gt;describe_table($table) } ) {</td></tr>
<tr><td class="h">1285</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose(&quot;col = $col&quot;);</td></tr>
<tr><td class="h">1286</td><td colspan="5"></td></tr><tr><td class="h">1287</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name = $col-&gt;{FIELD};</td></tr>
<tr><td class="h">1288</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = $col-&gt;{TYPE};</td></tr>
<tr><td class="h">1289</td><td><div class="c3">10</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $size;</td></tr>
<tr><td class="h">1290</td><td colspan="5"></td></tr><tr><td class="h">1291</td><td><div class="c3">10</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1291">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if exists $col_data_href-&gt;{$name};</td></tr>
<tr><td class="h">1292</td><td><div class="c3">5</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1292">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $col-&gt;{EXTRA} =~ /auto/;</td></tr>
<tr><td class="h">1293</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next</td></tr>
<tr><td class="h">1294</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1294">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if $self-&gt;is_fk_column( table =&gt; $table, column =&gt; $col );</td></tr>
<tr><td class="h">1295</td><td colspan="5"></td></tr><tr><td class="h">1296</td><td><div class="c3">3</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1296">50</a></div><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1296">50</a></div><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1296">50</a></div><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1296">0</a></div><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1296">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $type =~ /varchar\((\d+)\)/ ) {</td></tr>
<tr><td class="h">1297</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type = &#39;Str&#39;;</td></tr>
<tr><td class="h">1298</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$size = int( $1 / 2 );</td></tr>
<tr><td class="h">1299</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1300</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( $type =~ /char\((\d+)\)/ ) {</td></tr>
<tr><td class="h">1301</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type = &#39;Str&#39;;</td></tr>
<tr><td class="h">1302</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$size = $1;</td></tr>
<tr><td class="h">1303</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1304</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( $type =~ /int\((\d+)\)/ ) {</td></tr>
<tr><td class="h">1305</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$type = &#39;Int&#39;;</td></tr>
<tr><td class="h">1306</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$size = int( $1 / 2 );</td></tr>
<tr><td class="h">1307</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1308</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( $type =~ /date/ ) {</td></tr>
<tr><td class="h">1309</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1310</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1311</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elsif ( $type =~ /^enum\((.+)\)$/ ) {</td></tr>
<tr><td class="h">1312</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next;</td></tr>
<tr><td class="h">1313</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1314</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1315</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;confess &quot; unhandled column type : $type &quot;;</td></tr>
<tr><td class="h">1316</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1317</td><td colspan="5"></td></tr><tr><td class="h">1318</td><td><div class="c3">3</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$rules{$name} = { type =&gt; $type, size =&gt; $size };</td></tr>
<tr><td class="h">1319</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1320</td><td colspan="5"></td></tr><tr><td class="h">1321</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$self-&gt;_verbose( &quot;leave&quot;, $cnt );</td></tr>
<tr><td class="h">1322</td><td colspan="5"></td></tr><tr><td class="h">1323</td><td><div class="c3">6</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return \%rules;</td></tr>
<tr><td class="h">1324</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1325</td><td colspan="5"></td></tr><tr><td class="h">1326</td><td></td><td></td><td></td><td></td><td class="s">sub _get_enum_data {</td></tr>
<tr><td class="h">1327</td><td><div class="c3">215</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1327">215</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1328</td><td colspan="5"></td></tr><tr><td class="h">1329</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1330</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1331</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1332</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_data_href =&gt; &#39;HashRef&#39;;</td></tr>
<tr><td class="h">1333</td><td colspan="5"></td></tr><tr><td class="h">1334</td><td><div class="c3">215</div><div class="c3">215</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col_href ( @{ $self-&gt;describe_table($table) } ) {</td></tr>
<tr><td class="h">1335</td><td colspan="5"></td></tr><tr><td class="h">1336</td><td><div class="c3">385</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = $col_href-&gt;{FIELD};</td></tr>
<tr><td class="h">1337</td><td colspan="5"></td></tr><tr><td class="h">1338</td><td><div class="c3">385</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1338">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if $col_href-&gt;{EXTRA} =~ /auto/;</td></tr>
<tr><td class="h">1339</td><td><div class="c3">285</div></td><td><div class="c3" title="T/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1339">100</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next if exists $col_data_href-&gt;{$col_name};</td></tr>
<tr><td class="h">1340</td><td colspan="5"></td></tr><tr><td class="h">1341</td><td><div class="c3">75</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $name = $col_href-&gt;{FIELD};</td></tr>
<tr><td class="h">1342</td><td><div class="c3">75</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $type = $col_href-&gt;{TYPE};</td></tr>
<tr><td class="h">1343</td><td><div class="c3">75</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $size;</td></tr>
<tr><td class="h">1344</td><td colspan="5"></td></tr><tr><td class="h">1345</td><td><div class="c3">75</div></td><td><div class="c0" title="-/F"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1345">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( $type =~ /^enum\((.+)\)$/ ) {</td></tr>
<tr><td class="h">1346</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my @a = split /,/, $type;</td></tr>
<tr><td class="h">1347</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $i = int( rand( scalar @a ) );</td></tr>
<tr><td class="h">1348</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$a[$i] =~ /&#39;(\w+)&#39;/;</td></tr>
<tr><td class="h">1349</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $val = $1;</td></tr>
<tr><td class="h">1350</td><td colspan="5"></td></tr><tr><td class="h">1351</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$col_data_href-&gt;{$col_name} = $val;</td></tr>
<tr><td class="h">1352</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1353</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1354</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1355</td><td colspan="5"></td></tr><tr><td class="h">1356</td><td></td><td></td><td></td><td></td><td class="s">sub _get_column2alias_lookup {</td></tr>
<tr><td class="h">1357</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1357">41</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1358</td><td colspan="5"></td></tr><tr><td class="h">1359</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1360</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1361</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1362</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $constraint_name =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1363</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias_href&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">1364</td><td colspan="5"></td></tr><tr><td class="h">1365</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">1366</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">1367</td><td colspan="5"></td></tr><tr><td class="h">1368</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;$table = $self-&gt;_fq( table =&gt; $table, fq =&gt; $fq );</td></tr>
<tr><td class="h">1369</td><td colspan="5"></td></tr><tr><td class="h">1370</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @cols;</td></tr>
<tr><td class="h">1371</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my %cols2alias;</td></tr>
<tr><td class="h">1372</td><td colspan="5"></td></tr><tr><td class="h">1373</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $con_aref = $self-&gt;get_constraint(</td></tr>
<tr><td class="h">1374</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table =&gt; $table,</td></tr>
<tr><td class="h">1375</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;=&gt; $constraint_name</td></tr>
<tr><td class="h">1376</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1377</td><td colspan="5"></td></tr><tr><td class="h">1378</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $con_col_href (@$con_aref) {</td></tr>
<tr><td class="h">1379</td><td colspan="5"></td></tr><tr><td class="h">1380</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my %parm;</td></tr>
<tr><td class="h">1381</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $col_name = $con_col_href-&gt;{COLUMN_NAME};</td></tr>
<tr><td class="h">1382</td><td colspan="5"></td></tr><tr><td class="h">1383</td><td><div class="c3">82</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1383">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($self-&gt;is_fk_column(</td></tr>
<tr><td class="h">1384</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1385</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col_name</td></tr>
<tr><td class="h">1386</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1387</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</td></tr>
<tr><td class="h">1388</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</td></tr>
<tr><td class="h">1389</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fk_col_href = $self-&gt;_get_fk_column(</td></tr>
<tr><td class="h">1390</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1391</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;column =&gt; $col_name</td></tr>
<tr><td class="h">1392</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1393</td><td colspan="5"></td></tr><tr><td class="h">1394</td><td><div class="c3">82</div></td><td><div class="c0" title="T/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1394">50</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($fq) {</td></tr>
<tr><td class="h">1395</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parm{schema} = $fk_col_href-&gt;{REFERENCED_TABLE_SCHEMA};</td></tr>
<tr><td class="h">1396</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1397</td><td colspan="5"></td></tr><tr><td class="h">1398</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parm{table} = $fk_col_href-&gt;{REFERENCED_TABLE_NAME};</td></tr>
<tr><td class="h">1399</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$col_name</td></tr>
<tr><td class="h">1400</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= $fk_col_href-&gt;{REFERENCED_COLUMN_NAME} . &quot; as $col_name&quot;;</td></tr>
<tr><td class="h">1401</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1402</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {</td></tr>
<tr><td class="h">1403</td><td><div class="c0">0</div></td><td><div class="c0" title="-/-"><a href="blib-lib-MySQL-Util-Data-Create-pm--branch.html#L1403">0</a></div></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ($fq) {</td></tr>
<tr><td class="h">1404</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parm{schema} = $con_col_href-&gt;{CONSTRAINT_SCHEMA};</td></tr>
<tr><td class="h">1405</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1406</td><td colspan="5"></td></tr><tr><td class="h">1407</td><td><div class="c0">0</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$parm{table} = $table;</td></tr>
<tr><td class="h">1408</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1409</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $ref_table = $self-&gt;_fq( %parm, fq =&gt; $fq );</td></tr>
<tr><td class="h">1410</td><td colspan="5"></td></tr><tr><td class="h">1411</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$cols2alias{$col_name} = $alias_href-&gt;{$ref_table};</td></tr>
<tr><td class="h">1412</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1413</td><td colspan="5"></td></tr><tr><td class="h">1414</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return \%cols2alias;</td></tr>
<tr><td class="h">1415</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1416</td><td colspan="5"></td></tr><tr><td class="h">1417</td><td></td><td></td><td></td><td></td><td class="s">sub _get_select_clause {</td></tr>
<tr><td class="h">1418</td><td><div class="c3">41</div></td><td></td><td></td><td><div class="c3"><a href="blib-lib-MySQL-Util-Data-Create-pm--subroutine.html#L1418">41</a></div></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;args</td></tr>
<tr><td class="h">1419</td><td colspan="5"></td></tr><tr><td class="h">1420</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# required</td></tr>
<tr><td class="h">1421</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $self&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Object&#39;,</td></tr>
<tr><td class="h">1422</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1423</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $constraint_name =&gt; &#39;Str&#39;,</td></tr>
<tr><td class="h">1424</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $alias_href&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; &#39;HashRef&#39;,</td></tr>
<tr><td class="h">1425</td><td colspan="5"></td></tr><tr><td class="h">1426</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# optional</td></tr>
<tr><td class="h">1427</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my $fq =&gt; { isa =&gt; &#39;Bool&#39;, optional =&gt; 1, default =&gt; 1 };</td></tr>
<tr><td class="h">1428</td><td colspan="5"></td></tr><tr><td class="h">1429</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my $col2alias = $self-&gt;_get_column2alias_lookup(</td></tr>
<tr><td class="h">1430</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;table&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $table,</td></tr>
<tr><td class="h">1431</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;constraint_name =&gt; $constraint_name,</td></tr>
<tr><td class="h">1432</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alias_href&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $alias_href,</td></tr>
<tr><td class="h">1433</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fq&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; $fq</td></tr>
<tr><td class="h">1434</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;);</td></tr>
<tr><td class="h">1435</td><td colspan="5"></td></tr><tr><td class="h">1436</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;my @cols;</td></tr>
<tr><td class="h">1437</td><td colspan="5"></td></tr><tr><td class="h">1438</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;foreach my $col ( keys %$col2alias ) {</td></tr>
<tr><td class="h">1439</td><td><div class="c3">82</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;push( @cols, sprintf &quot;%s.%s&quot;, $col2alias-&gt;{$col}, $col );</td></tr>
<tr><td class="h">1440</td><td></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;}</td></tr>
<tr><td class="h">1441</td><td colspan="5"></td></tr><tr><td class="h">1442</td><td><div class="c3">41</div></td><td></td><td></td><td></td><td class="s">&nbsp;&nbsp;&nbsp;&nbsp;return join &#39;, &#39;, @cols;</td></tr>
<tr><td class="h">1443</td><td></td><td></td><td></td><td></td><td class="s">}</td></tr>
<tr><td class="h">1444</td><td colspan="5"></td></tr><tr><td class="h">1445 - 1532</td><td colspan="4"></td><td class="s"><pre>=head1 AUTHOR

John Gravatt, C&lt;&lt; &lt;john at gravatt.org&gt; &gt;&gt;

=head1 BUGS

Please report any bugs or feature requests to C&lt;bug-mysql-util-data-create at rt.cpan.org&gt;, or through
the web interface at L&lt;http://rt.cpan.org/NoAuth/ReportBug.html?Queue=MySQL-Util-Data-Create&gt;.&nbsp;&nbsp;I will be notified, and then you&#39;ll
automatically be notified of progress on your bug as I make changes.




=head1 SUPPORT

You can find documentation for this module with the perldoc command.

&nbsp;&nbsp;&nbsp;&nbsp;perldoc MySQL::Util::Data::Create


You can also look for information at:

=over 4

=item * RT: CPAN&#39;s request tracker (report bugs here)

L&lt;http://rt.cpan.org/NoAuth/Bugs.html?Dist=MySQL-Util-Data-Create&gt;

=item * AnnoCPAN: Annotated CPAN documentation

L&lt;http://annocpan.org/dist/MySQL-Util-Data-Create&gt;

=item * CPAN Ratings

L&lt;http://cpanratings.perl.org/d/MySQL-Util-Data-Create&gt;

=item * Search CPAN

L&lt;http://search.cpan.org/dist/MySQL-Util-Data-Create/&gt;

=back


=head1 ACKNOWLEDGEMENTS


=head1 LICENSE AND COPYRIGHT

Copyright 2013 John Gravatt.

This program is free software; you can redistribute it and/or modify it
under the terms of the the Artistic License (2.0). You may obtain a
copy of the full license at:

L&lt;http://www.perlfoundation.org/artistic_license_2_0&gt;

Any use, modification, and distribution of the Standard or Modified
Versions is governed by this Artistic License. By using, modifying or
distributing the Package, you accept this license. Do not use, modify,
or distribute the Package, if you do not accept this license.

If your Modified Version has been derived from a Modified Version made
by someone other than you, you are nevertheless required to ensure that
your Modified Version complies with the requirements of this license.

This license does not grant you the right to use any trademark, service
mark, tradename, or logo of the Copyright Holder.

This license includes the non-exclusive, worldwide, free-of-charge
patent license to make, have made, use, offer to sell, sell, import and
otherwise transfer the Package with respect to any patent claims
licensable by the Copyright Holder that are necessarily infringed by the
Package. If you institute patent litigation (including a cross-claim or
counterclaim) against any party alleging that the Package constitutes
direct or contributory patent infringement, then this Artistic License
to you shall terminate on the date that such litigation is filed.

Disclaimer of Warranty: THE PACKAGE IS PROVIDED BY THE COPYRIGHT HOLDER
AND CONTRIBUTORS &quot;AS IS&#39; AND WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES.
THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR
PURPOSE, OR NON-INFRINGEMENT ARE DISCLAIMED TO THE EXTENT PERMITTED BY
YOUR LOCAL LAW. UNLESS REQUIRED BY LAW, NO COPYRIGHT HOLDER OR
CONTRIBUTOR WILL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, OR
CONSEQUENTIAL DAMAGES ARISING IN ANY WAY OUT OF THE USE OF THE PACKAGE,
EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


=cut</pre></td></tr>
<tr><td class="h">1533</td><td colspan="5"></td></tr><tr><td class="h">1534</td><td></td><td></td><td></td><td></td><td class="s">1;&nbsp;&nbsp;&nbsp;&nbsp;# End of MySQL::Util::Data::Create</td></tr>
<tr><td class="h">1535</td><td colspan="5"></td></tr></table>
</body>
</html>
