<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" href="defaultstyle.css" type="text/css">
<title>Testfile Template Toolkit</title>
</head>
<body>
<div class="index" width="25%">
</br>
<h2>Index</h2>
<a href="#24">if&nbsp;($debug)&nbsp;{</a></br>
<a href="#28">sub&nbsp;new&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#33">$self-&gt;{COMMANDS}&nbsp;=&nbsp;{</a></br>
<a href="#49">sub&nbsp;AppendText&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#51">unless&nbsp;($self-&gt;Broadcast('append</a></br>
<a href="#56">sub&nbsp;Broadcast&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#60">foreach&nbsp;(@$plugs)&nbsp;{</a></br>
<a href="#68">sub&nbsp;Call2Remove&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#70">if&nbsp;($call&nbsp;=~&nbsp;/.*remove$/)&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#72">}&nbsp;else&nbsp;{</a></br>
<a href="#78">sub&nbsp;Call2Replace&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#80">if&nbsp;($call&nbsp;=~&nbsp;/.*replace$/)&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#82">}&nbsp;else&nbsp;{</a></br>
<a href="#88">sub&nbsp;Call2WriteText&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#90">if&nbsp;($call&nbsp;=~&nbsp;/.*write$/)&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#92">}&nbsp;else&nbsp;{</a></br>
<a href="#98">sub&nbsp;Callback&nbsp;{</a></br>
<a href="#104">sub&nbsp;CanUndo&nbsp;{</a></br>
<a href="#109">sub&nbsp;CanRedo&nbsp;{</a></br>
<a href="#114">sub&nbsp;Clear&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#116">unless&nbsp;($self-&gt;Broadcast('clear'</a></br>
<a href="#121">sub&nbsp;ClearSelection&nbsp;{</a></br>
<a href="#127">sub&nbsp;Command&nbsp;{</a></br>
<a href="#134">sub&nbsp;Copy&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#136">unless&nbsp;($self-&gt;Broadcast('copy')</a></br>
<a href="#141">sub&nbsp;Cut&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#143">unless&nbsp;($self-&gt;Broadcast('cut'))</a></br>
<a href="#148">sub&nbsp;DoRemove&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#153">if&nbsp;(defined($ins))&nbsp;{</a></br>
<a href="#159">sub&nbsp;DoReplace&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#163">if&nbsp;($sel)&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#166">if&nbsp;(defined($ins))&nbsp;{</a></br>
<a href="#172">sub&nbsp;DoWrite&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#177">if&nbsp;($sel)&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#180">if&nbsp;(defined($ins))&nbsp;{</a></br>
<a href="#186">sub&nbsp;FindPluginId&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#190">foreach&nbsp;(@$plgs)&nbsp;{</a></br>
<a href="#200">sub&nbsp;FindPlugin&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#203">foreach&nbsp;(@$plgs)&nbsp;{</a></br>
<a href="#211">sub&nbsp;GetClipboardText&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#214">if&nbsp;(wxTheClipboard-&gt;Open)&nbsp;{</a></br>
<a href="#227">sub&nbsp;GetLineNumber&nbsp;{</a></br>
<a href="#234">sub&nbsp;HasSelection&nbsp;{</a></br>
<a href="#241">sub&nbsp;IsWriteable&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#243">if&nbsp;((($key&nbsp;&gt;=&nbsp;32)&nbsp;and&nbsp;($key&nbsp;&lt;&nbsp;12</a></br>
<a href="#249">sub&nbsp;Listening&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#251">if&nbsp;(@_)&nbsp;{</a></br>
<a href="#266">sub&nbsp;LoadFile&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#268">unless&nbsp;($self-&gt;Broadcast('load',</a></br>
<a href="#273">sub&nbsp;LoadPlugin&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#280">if&nbsp;(defined($plug))&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#282">}&nbsp;else&nbsp;{</a></br>
<a href="#287">sub&nbsp;Name&nbsp;{</a></br>
<a href="#295">sub&nbsp;OnChar&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#298">if&nbsp;($k&nbsp;eq&nbsp;322)&nbsp;{&nbsp;#Insert&nbsp;key&nbsp;pre</a></br>
&nbsp;&nbsp;&nbsp;<a href="#305">unless&nbsp;($self-&gt;Broadcast('key',&nbsp;</a></br>
<a href="#312">sub&nbsp;OvrMode&nbsp;{</a></br>
<a href="#318">sub&nbsp;Paste&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#320">unless&nbsp;($self-&gt;Broadcast('paste'</a></br>
<a href="#325">sub&nbsp;Plugin&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#329">unless&nbsp;($id&nbsp;=~&nbsp;/^\d+$/)&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#332">if&nbsp;(@_)&nbsp;{</a></br>
<a href="#338">sub&nbsp;Receive&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#342">if&nbsp;(exists&nbsp;$self-&gt;{COMMANDS}-&gt;{$</a></br>
<a href="#350">sub&nbsp;Redo&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#352">unless&nbsp;($self-&gt;Broadcast('redo')</a></br>
<a href="#357">sub&nbsp;RegisterPlugin&nbsp;{</a></br>
<a href="#363">sub&nbsp;Remove&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#366">unless&nbsp;($self-&gt;Broadcast(@call))</a></br>
<a href="#371">sub&nbsp;Remove2Call&nbsp;{</a></br>
<a href="#379">sub&nbsp;Replace&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#382">unless&nbsp;($self-&gt;Broadcast(@call))</a></br>
<a href="#387">sub&nbsp;Replace2Call&nbsp;{</a></br>
<a href="#395">sub&nbsp;SaveFile&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#397">unless&nbsp;($self-&gt;Broadcast('save',</a></br>
<a href="#402">sub&nbsp;NativePlugins&nbsp;{</a></br>
<a href="#407">sub&nbsp;Syntax&nbsp;{</a></br>
<a href="#412">sub&nbsp;Undo&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#414">unless&nbsp;($self-&gt;Broadcast('undo')</a></br>
<a href="#419">sub&nbsp;WriteText&nbsp;{</a></br>
&nbsp;&nbsp;&nbsp;<a href="#422">unless&nbsp;($self-&gt;Broadcast(@call))</a></br>
<a href="#427">sub&nbsp;WriteText2Call&nbsp;{</a></br>
</div>

<div class="content" width="75%">
<h2>Content</h2>
001&nbsp;<font class="Keyword">package</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">;</font></br>
002&nbsp;</br>
003&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Keyword">strict</font><font class="Normal">;</font></br>
004&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Keyword">warnings</font><font class="Normal">;</font></br>
005&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;Carp;</font></br>
006&nbsp;</br>
007&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Keyword">vars</font><font class="Normal">&nbsp;</font><font class="Operator">qw(</font><font class="Normal">$VERSION</font><font class="Operator">)</font><font class="Normal">;</font></br>
008&nbsp;<font class="DataType">$VERSION</font><font class="Normal">=</font><font class="Operator">&quot;</font><font class="SpecialString">0.01</font><font class="Operator">&quot;</font><font class="Normal">;</font></br>
009&nbsp;</br>
010&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;Wx&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;:textctrl&nbsp;:font&nbsp;:colour&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font></br>
011&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Function">Wx::DND</font><font class="Normal">;</font></br>
012&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;Wx&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;wxTheClipboard&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font></br>
013&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;base&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;Wx::TextCtrl&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font></br>
014&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Function">Wx::Event</font><font class="Normal">&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;EVT_CHAR&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font></br>
015&nbsp;</br>
016&nbsp;<font class="Function">require</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">::</font><font class="Function">KeyEchoes</font><font class="Normal">;</font></br>
017&nbsp;<font class="Function">require</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">::</font><font class="Function">UndoRedo</font><font class="Normal">;</font></br>
018&nbsp;<font class="Function">require</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">::</font><font class="Function">Highlighter</font><font class="Normal">;</font></br>
019&nbsp;</br>
020&nbsp;<font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$defaultfont</font><font class="Normal">&nbsp;=&nbsp;[</font><font class="DecVal">10</font><font class="Normal">,&nbsp;wxFONTFAMILY_MODERN,&nbsp;wxFONTSTYLE_NORMAL,&nbsp;wxFONTWEIGHT_NORMAL,&nbsp;</font><font class="DecVal">0</font><font class="Normal">];</font></br>
021&nbsp;</br>
022&nbsp;<font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$debug</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font></br>
023&nbsp;</br>
<a name="24"></a>024&nbsp;<font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{</font></br>
025&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Function">Data::Dumper</font><font class="Normal">;</font></br>
026&nbsp;<font class="Normal">}</font></br>
027&nbsp;</br>
<a name="28"></a>028&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">new</font><font class="Normal">&nbsp;{</font></br>
029&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$class</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
030&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$class</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">new</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
031&nbsp;</br>
032&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{CALLBACK}&nbsp;=&nbsp;</font><font class="Keyword">sub&nbsp;</font><font class="Normal">{};</font></br>
<a name="33"></a>033&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}&nbsp;=&nbsp;{</font></br>
034&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Operator">'</font><font class="String">doremove</font><font class="Operator">'</font><font class="Normal">&nbsp;=&gt;&nbsp;\&amp;DoRemove,</font></br>
035&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Operator">'</font><font class="String">doreplace</font><font class="Operator">'</font><font class="Normal">&nbsp;=&gt;&nbsp;\&amp;DoReplace,</font></br>
036&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Operator">'</font><font class="String">dowrite</font><font class="Operator">'</font><font class="Normal">&nbsp;=&gt;&nbsp;\&amp;DoWrite,</font></br>
037&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;};</font></br>
038&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING}&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font></br>
039&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font></br>
040&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{OVRMODE}&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font></br>
041&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS}&nbsp;=&nbsp;[];</font></br>
042&nbsp;</br>
043&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetFont</font><font class="Normal">(&nbsp;</font><font class="Function">Wx::Font</font><font class="Normal">-&gt;new(</font><font class="DataType">@$defaultfont</font><font class="Normal">)&nbsp;);</font></br>
044&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;EVT_CHAR(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;\&amp;OnChar);</font></br>
045&nbsp;</br>
046&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">;</font></br>
047&nbsp;<font class="Normal">}</font></br>
048&nbsp;</br>
<a name="49"></a>049&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">AppendText</font><font class="Normal">&nbsp;{</font></br>
050&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="51"></a>051&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">append</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font></br>
052&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Append</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
053&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
054&nbsp;<font class="Normal">}</font></br>
055&nbsp;</br>
<a name="56"></a>056&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Broadcast</font><font class="Normal">&nbsp;{</font></br>
057&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
058&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plugs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font></br>
059&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$flag</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font></br>
<a name="60"></a>060&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">foreach</font><font class="Normal">&nbsp;(</font><font class="DataType">@$plugs</font><font class="Normal">)&nbsp;{</font></br>
061&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Preprocessor">$_</font><font class="Normal">-&gt;</font><font class="DataType">Receive</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font></br>
062&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$flag</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">1</font><font class="Normal">;</font></br>
063&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></br>
064&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
065&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$flag</font><font class="Normal">;</font></br>
066&nbsp;<font class="Normal">}</font></br>
067&nbsp;</br>
<a name="68"></a>068&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Call2Remove</font><font class="Normal">&nbsp;{</font></br>
069&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$call</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
<a name="70"></a>070&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$call</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">remove</font><font class="Char">$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font></br>
071&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">))</font></br>
<a name="72"></a>072&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font></br>
073&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Call&nbsp;'</font><font class="DataType">$call</font><font class="Operator">'</font><font class="SpecialString">&nbsp;is&nbsp;not&nbsp;a&nbsp;remove&nbsp;type</font><font class="Operator">&quot;</font><font class="Normal">;</font></br>
074&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font></br>
075&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
076&nbsp;<font class="Normal">}</font></br>
077&nbsp;</br>
<a name="78"></a>078&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Call2Replace</font><font class="Normal">&nbsp;{</font></br>
079&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$call</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$old</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
<a name="80"></a>080&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$call</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">replace</font><font class="Char">$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font></br>
081&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$old</font><font class="Normal">),&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)</font></br>
<a name="82"></a>082&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font></br>
083&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Call&nbsp;'</font><font class="DataType">$call</font><font class="Operator">'</font><font class="SpecialString">&nbsp;is&nbsp;not&nbsp;a&nbsp;replace&nbsp;type</font><font class="Operator">&quot;</font><font class="Normal">;</font></br>
084&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font></br>
085&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
086&nbsp;<font class="Normal">}</font></br>
087&nbsp;</br>
<a name="88"></a>088&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Call2WriteText</font><font class="Normal">&nbsp;{</font></br>
089&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$call</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
<a name="90"></a>090&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$call</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">write</font><font class="Char">$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font></br>
091&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$txt</font></br>
<a name="92"></a>092&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font></br>
093&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Call&nbsp;'</font><font class="DataType">$call</font><font class="Operator">'</font><font class="SpecialString">&nbsp;is&nbsp;not&nbsp;a&nbsp;write&nbsp;type</font><font class="Operator">&quot;</font><font class="Normal">;</font></br>
094&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font></br>
095&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
096&nbsp;<font class="Normal">}</font></br>
097&nbsp;</br>
<a name="98"></a>098&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Callback</font><font class="Normal">&nbsp;{</font></br>
099&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
100&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{CALLBACK}&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;&nbsp;}</font></br>
101&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{CALLBACK};</font></br>
102&nbsp;<font class="Normal">}</font></br>
103&nbsp;</br>
<a name="104"></a>104&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">CanUndo</font><font class="Normal">&nbsp;{</font></br>
105&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
106&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">canundo</font><font class="Operator">'</font><font class="Normal">);</font></br>
107&nbsp;<font class="Normal">}</font></br>
108&nbsp;</br>
<a name="109"></a>109&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">CanRedo</font><font class="Normal">&nbsp;{</font></br>
110&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
111&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">canredo</font><font class="Operator">'</font><font class="Normal">);</font></br>
112&nbsp;<font class="Normal">}</font></br>
113&nbsp;</br>
<a name="114"></a>114&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Clear</font><font class="Normal">&nbsp;{</font></br>
115&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="116"></a>116&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">clear</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font></br>
117&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Clear</font><font class="Normal">;</font></br>
118&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
119&nbsp;<font class="Normal">}</font></br>
120&nbsp;</br>
<a name="121"></a>121&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">ClearSelection</font><font class="Normal">&nbsp;{</font></br>
122&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
123&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$ins</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetInsertionPoint</font><font class="Normal">;</font></br>
124&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetSelection</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">);</font></br>
125&nbsp;<font class="Normal">}</font></br>
126&nbsp;</br>
<a name="127"></a>127&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Command</font><font class="Normal">&nbsp;{</font></br>
128&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
129&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
130&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}</font><font class="Operator">-</font><font class="Normal">&gt;{</font><font class="DataType">$name</font><font class="Normal">}&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">&nbsp;}</font></br>
131&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}</font><font class="Operator">-</font><font class="Normal">&gt;{</font><font class="DataType">$name</font><font class="Normal">}</font></br>
132&nbsp;<font class="Normal">}</font></br>
133&nbsp;</br>
<a name="134"></a>134&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Copy</font><font class="Normal">&nbsp;{</font></br>
135&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="136"></a>136&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">copy</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font></br>
137&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Copy</font><font class="Normal">;</font></br>
138&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
139&nbsp;<font class="Normal">}</font></br>
140&nbsp;</br>
<a name="141"></a>141&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Cut</font><font class="Normal">&nbsp;{</font></br>
142&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="143"></a>143&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">cut</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font></br>
144&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Cut</font><font class="Normal">;</font></br>
145&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
146&nbsp;<font class="Normal">}</font></br>
147&nbsp;</br>
<a name="148"></a>148&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">DoRemove</font><font class="Normal">&nbsp;{</font></br>
149&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
150&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
151&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">ClearSelection</font><font class="Normal">;</font></br>
152&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Remove</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">));</font></br>
<a name="153"></a>153&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">))&nbsp;{</font></br>
154&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">);</font></br>
155&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
156&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font></br>
157&nbsp;<font class="Normal">}</font></br>
158&nbsp;</br>
<a name="159"></a>159&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">DoReplace</font><font class="Normal">&nbsp;{</font></br>
160&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$old</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
161&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">ClearSelection</font><font class="Normal">;</font></br>
162&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Replace</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$old</font><font class="Normal">),&nbsp;</font><font class="DataType">$txt</font><font class="Normal">);</font></br>
<a name="163"></a>163&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$sel</font><font class="Normal">)&nbsp;{</font></br>
164&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetSelection</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">));</font></br>
165&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
<a name="166"></a>166&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">))&nbsp;{</font></br>
167&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">);</font></br>
168&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
169&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font></br>
170&nbsp;<font class="Normal">}</font></br>
171&nbsp;</br>
<a name="172"></a>172&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">DoWrite</font><font class="Normal">&nbsp;{</font></br>
173&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
174&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">ClearSelection</font><font class="Normal">;</font></br>
175&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">);</font></br>
176&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">WriteText</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">);</font></br>
<a name="177"></a>177&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$sel</font><font class="Normal">)&nbsp;{</font></br>
178&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetSelection</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">));</font></br>
179&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
<a name="180"></a>180&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">))&nbsp;{</font></br>
181&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">);</font></br>
182&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
183&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font></br>
184&nbsp;<font class="Normal">}</font></br>
185&nbsp;</br>
<a name="186"></a>186&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">FindPluginId</font><font class="Normal">&nbsp;{</font></br>
187&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$name</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
188&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font></br>
189&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font></br>
<a name="190"></a>190&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">foreach</font><font class="Normal">&nbsp;(</font><font class="DataType">@$plgs</font><font class="Normal">)&nbsp;{</font></br>
191&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$name</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">-&gt;[</font><font class="DataType">$index</font><font class="Normal">]</font><font class="Operator">-</font><font class="Normal">&gt;Name)&nbsp;{</font></br>
192&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$index</font></br>
193&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></br>
194&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;++;</font></br>
195&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
196&nbsp;<font class="Comment">#&nbsp;&nbsp;&nbsp;carp&nbsp;&quot;Plugin&nbsp;$name&nbsp;is&nbsp;not&nbsp;loaded\n&quot;;</font></br>
197&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font></br>
198&nbsp;<font class="Normal">}</font></br>
199&nbsp;</br>
<a name="200"></a>200&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">FindPlugin</font><font class="Normal">&nbsp;{</font></br>
201&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$name</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
202&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font></br>
<a name="203"></a>203&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">foreach</font><font class="Normal">&nbsp;(</font><font class="DataType">@$plgs</font><font class="Normal">)&nbsp;{</font></br>
204&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$name</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="Preprocessor">$_</font><font class="Normal">-&gt;</font><font class="DataType">Name</font><font class="Normal">)&nbsp;{</font></br>
205&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Preprocessor">$_</font></br>
206&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></br>
207&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
208&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font></br>
209&nbsp;<font class="Normal">}</font></br>
210&nbsp;</br>
<a name="211"></a>211&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">GetClipboardText</font><font class="Normal">&nbsp;{</font></br>
212&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
213&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$txt</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font></br>
<a name="214"></a>214&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(wxTheClipboard-&gt;Open)&nbsp;{</font></br>
215&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Clipboard&nbsp;open</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font></br>
216&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$textdata</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">Wx::TextDataObject</font><font class="Normal">-&gt;new;</font></br>
217&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$ok</font><font class="Normal">&nbsp;=&nbsp;wxTheClipboard-&gt;GetData(&nbsp;</font><font class="DataType">$textdata</font><font class="Normal">&nbsp;);</font></br>
218&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">(&nbsp;</font><font class="DataType">$ok</font><font class="Normal">&nbsp;)&nbsp;{</font></br>
219&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$txt</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$textdata</font><font class="Normal">-&gt;</font><font class="DataType">GetText</font><font class="Normal">;</font></br>
220&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></br>
221&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Clipboard&nbsp;text:&nbsp;</font><font class="DataType">$txt</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font></br>
222&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wxTheClipboard-&gt;Close;</font></br>
223&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
224&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$txt</font><font class="Normal">;</font></br>
225&nbsp;<font class="Normal">}</font></br>
226&nbsp;</br>
<a name="227"></a>227&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">GetLineNumber</font><font class="Normal">&nbsp;{</font></br>
228&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
229&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetInsertionPoint</font><font class="Normal">&nbsp;};</font></br>
230&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$col</font><font class="Normal">,&nbsp;</font><font class="DataType">$line</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">PositionToXY</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">);</font></br>
231&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$line</font><font class="Normal">;</font></br>
232&nbsp;<font class="Normal">}</font></br>
233&nbsp;</br>
<a name="234"></a>234&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">HasSelection</font><font class="Normal">&nbsp;{</font></br>
235&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
236&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">,&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetSelection</font><font class="Normal">;</font></br>
237&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">&nbsp;</font><font class="Operator">ne</font><font class="Normal">&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)</font></br>
238&nbsp;<font class="Normal">}</font></br>
239&nbsp;</br>
240&nbsp;<font class="Comment">#&nbsp;</font><font class="Alert">TODO</font><font class="Comment">&nbsp;make&nbsp;this&nbsp;unicode&nbsp;compatible</font></br>
<a name="241"></a>241&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">IsWriteable</font><font class="Normal">&nbsp;{</font></br>
242&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$key</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
<a name="243"></a>243&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(((</font><font class="DataType">$key</font><font class="Normal">&nbsp;&gt;=&nbsp;</font><font class="DecVal">32</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$key</font><font class="Normal">&nbsp;&lt;&nbsp;</font><font class="DecVal">127</font><font class="Normal">))&nbsp;</font><font class="Operator">or</font><font class="Normal">&nbsp;((</font><font class="DataType">$key</font><font class="Normal">&nbsp;&gt;&nbsp;</font><font class="DecVal">127</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$key</font><font class="Normal">&nbsp;&lt;&nbsp;</font><font class="DecVal">256</font><font class="Normal">)))&nbsp;{</font></br>
244&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font></br>
245&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
246&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">0</font></br>
247&nbsp;<font class="Normal">}</font></br>
248&nbsp;</br>
<a name="249"></a>249&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Listening</font><font class="Normal">&nbsp;{</font></br>
250&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="251"></a>251&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{</font></br>
252&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$new</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
253&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$new</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING})&nbsp;{</font></br>
254&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font></br>
255&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$new</font><font class="Normal">)&nbsp;{</font></br>
256&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Function">unshift</font><font class="Normal">&nbsp;</font><font class="DataType">@$plgs</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font></br>
257&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font></br>
258&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Function">shift</font><font class="Normal">&nbsp;</font><font class="DataType">@$plgs</font></br>
259&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></br>
260&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING}&nbsp;=&nbsp;</font><font class="DataType">$new</font></br>
261&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></br>
262&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
263&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING}</font></br>
264&nbsp;<font class="Normal">}</font></br>
265&nbsp;</br>
<a name="266"></a>266&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">LoadFile</font><font class="Normal">&nbsp;{</font></br>
267&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="268"></a>268&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">load</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font></br>
269&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">LoadFile</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
270&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
271&nbsp;<font class="Normal">}</font></br>
272&nbsp;</br>
<a name="273"></a>273&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">LoadPlugin</font><font class="Normal">&nbsp;{</font></br>
274&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
275&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plug</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font></br>
276&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
277&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Comment">#Does&nbsp;anybody&nbsp;have&nbsp;a&nbsp;better&nbsp;idea&nbsp;for&nbsp;this?</font></br>
278&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Syntax::Kamelon::Wx::PluggableTextCtrl::</font><font class="DataType">$name</font><font class="Operator">&quot;</font><font class="Normal">;</font></br>
279&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$plug</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$name</font><font class="Normal">-&gt;</font><font class="DataType">new</font><font class="Normal">(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">);</font></br>
<a name="280"></a>280&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$plug</font><font class="Normal">))&nbsp;{</font></br>
281&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">RegisterPlugin</font><font class="Normal">(</font><font class="DataType">$plug</font><font class="Normal">);</font></br>
<a name="282"></a>282&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font></br>
283&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">unable&nbsp;to&nbsp;load&nbsp;plugin&nbsp;</font><font class="DataType">$name</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">;</font></br>
284&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
285&nbsp;<font class="Normal">}</font></br>
286&nbsp;</br>
<a name="287"></a>287&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Name</font><font class="Normal">&nbsp;{</font></br>
288&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
289&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">ref</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">;</font></br>
290&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=~</font><font class="Operator">s/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">::</font><font class="Operator">//</font><font class="Normal">;</font></br>
291&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">plugin&nbsp;name&nbsp;is&nbsp;</font><font class="DataType">$name</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font></br>
292&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font></br>
293&nbsp;<font class="Normal">}</font></br>
294&nbsp;</br>
<a name="295"></a>295&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">OnChar</font><font class="Normal">&nbsp;{</font></br>
296&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$event</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
297&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$k</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$event</font><font class="Normal">-&gt;</font><font class="DataType">GetKeyCode</font><font class="Normal">;</font></br>
<a name="298"></a>298&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$k</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DecVal">322</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Comment">#Insert&nbsp;key&nbsp;pressed,&nbsp;record&nbsp;flip&nbsp;insert/ovr&nbsp;mode.</font></br>
299&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">OvrMode</font><font class="Normal">)&nbsp;{</font></br>
300&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">OvrMode</font><font class="Normal">(</font><font class="DecVal">0</font><font class="Normal">)</font></br>
301&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font></br>
302&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">OvrMode</font><font class="Normal">(</font><font class="DecVal">1</font><font class="Normal">)</font></br>
303&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font></br>
304&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
<a name="305"></a>305&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">key</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$event</font><font class="Normal">))&nbsp;{</font></br>
306&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$event</font><font class="Normal">-&gt;</font><font class="DataType">Skip</font><font class="Normal">;</font></br>
307&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
308&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$callback</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Callback</font><font class="Normal">;</font></br>
309&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&amp;</font><font class="DataType">$callback</font><font class="Normal">;</font></br>
310&nbsp;<font class="Normal">}</font></br>
311&nbsp;</br>
<a name="312"></a>312&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">OvrMode</font><font class="Normal">&nbsp;{</font></br>
313&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
314&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{OVRMODE}&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;&nbsp;}</font></br>
315&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{OVRMODE};</font></br>
316&nbsp;<font class="Normal">}</font></br>
317&nbsp;</br>
<a name="318"></a>318&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Paste</font><font class="Normal">&nbsp;{</font></br>
319&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="320"></a>320&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">paste</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font></br>
321&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Paste</font><font class="Normal">;</font></br>
322&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
323&nbsp;<font class="Normal">}</font></br>
324&nbsp;</br>
<a name="325"></a>325&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Plugin</font><font class="Normal">&nbsp;{</font></br>
326&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
327&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$id</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
328&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font></br>
<a name="329"></a>329&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$id</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Char">^</font><font class="BaseN">\d</font><font class="Char">+$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font></br>
330&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$id</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">FindPluginId</font><font class="Normal">(</font><font class="DataType">$id</font><font class="Normal">);</font></br>
331&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
<a name="332"></a>332&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font></br>
333&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS}</font><font class="Operator">-</font><font class="Normal">&gt;[</font><font class="DataType">$id</font><font class="Normal">]&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;&nbsp;</font></br>
334&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
335&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS}</font><font class="Operator">-</font><font class="Normal">&gt;[</font><font class="DataType">$id</font><font class="Normal">];</font></br>
336&nbsp;<font class="Normal">}</font></br>
337&nbsp;</br>
<a name="338"></a>338&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Receive</font><font class="Normal">&nbsp;{</font></br>
339&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
340&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
341&nbsp;<font class="Comment">#&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($debug)&nbsp;{&nbsp;print&nbsp;&quot;received&nbsp;$name\n&quot;;&nbsp;print&nbsp;Dumper&nbsp;$self-&gt;{COMMANDS}&nbsp;}</font></br>
<a name="342"></a>342&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">exists</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}</font><font class="Operator">-</font><font class="Normal">&gt;{</font><font class="DataType">$name</font><font class="Normal">})&nbsp;{</font></br>
343&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">executing&nbsp;</font><font class="DataType">$name</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font></br>
344&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$cmd</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Command</font><font class="Normal">(</font><font class="DataType">$name</font><font class="Normal">);</font></br>
345&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;&amp;</font><font class="DataType">$cmd</font><font class="Normal">(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">);</font></br>
346&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
347&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">0</font></br>
348&nbsp;<font class="Normal">}</font></br>
349&nbsp;</br>
<a name="350"></a>350&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Redo</font><font class="Normal">&nbsp;{</font></br>
351&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="352"></a>352&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">redo</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font></br>
353&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Redo</font><font class="Normal">;</font></br>
354&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
355&nbsp;<font class="Normal">}</font></br>
356&nbsp;</br>
<a name="357"></a>357&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">RegisterPlugin</font><font class="Normal">&nbsp;{</font></br>
358&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$plug</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
359&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$pl</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font></br>
360&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Function">push</font><font class="Normal">&nbsp;</font><font class="DataType">@$pl</font><font class="Normal">,&nbsp;</font><font class="DataType">$plug</font><font class="Normal">;</font></br>
361&nbsp;<font class="Normal">}</font></br>
362&nbsp;</br>
<a name="363"></a>363&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Remove</font><font class="Normal">&nbsp;{</font></br>
364&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
365&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">@call</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Remove2Call</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
<a name="366"></a>366&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="DataType">@call</font><font class="Normal">))&nbsp;{</font></br>
367&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Remove</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
368&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
369&nbsp;<font class="Normal">}</font></br>
370&nbsp;</br>
<a name="371"></a>371&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Remove2Call</font><font class="Normal">&nbsp;{</font></br>
372&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
373&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font></br>
374&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">,&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetSelection</font><font class="Normal">;</font></br>
375&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;((</font><font class="DataType">$selb</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$begin</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$sele</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$end</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">1</font><font class="Normal">&nbsp;}</font></br>
376&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="Operator">'</font><font class="String">remove</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetRange</font><font class="Normal">(</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">),&nbsp;</font><font class="DataType">$sel</font><font class="Normal">)</font></br>
377&nbsp;<font class="Normal">}</font></br>
378&nbsp;</br>
<a name="379"></a>379&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Replace</font><font class="Normal">&nbsp;{</font></br>
380&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
381&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">@call</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Replace2Call</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
<a name="382"></a>382&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="DataType">@call</font><font class="Normal">))&nbsp;{</font></br>
383&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Replace</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
384&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
385&nbsp;<font class="Normal">}</font></br>
386&nbsp;</br>
<a name="387"></a>387&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Replace2Call</font><font class="Normal">&nbsp;{</font></br>
388&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
389&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font></br>
390&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">,&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetSelection</font><font class="Normal">;</font></br>
391&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;((</font><font class="DataType">$selb</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$begin</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$sele</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$end</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">1</font><font class="Normal">&nbsp;}</font></br>
392&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="Operator">'</font><font class="String">replace</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetRange</font><font class="Normal">(</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">),&nbsp;</font><font class="DataType">$sel</font><font class="Normal">)</font></br>
393&nbsp;<font class="Normal">}</font></br>
394&nbsp;</br>
<a name="395"></a>395&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">SaveFile</font><font class="Normal">&nbsp;{</font></br>
396&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="397"></a>397&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">save</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font></br>
398&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">SaveFile</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
399&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
400&nbsp;<font class="Normal">}</font></br>
401&nbsp;</br>
<a name="402"></a>402&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">NativePlugins</font><font class="Normal">&nbsp;{</font></br>
403&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
404&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Operator">qw[</font><font class="Normal">&nbsp;Highlighter&nbsp;KeyEchoes&nbsp;UndoRedo&nbsp;&nbsp;&nbsp;</font><font class="Operator">]</font></br>
405&nbsp;<font class="Normal">}</font></br>
406&nbsp;</br>
<a name="407"></a>407&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Syntax</font><font class="Normal">&nbsp;{</font></br>
408&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
409&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">syntax</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">);</font></br>
410&nbsp;<font class="Normal">}</font></br>
411&nbsp;</br>
<a name="412"></a>412&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Undo</font><font class="Normal">&nbsp;{</font></br>
413&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
<a name="414"></a>414&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">undo</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font></br>
415&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Undo</font><font class="Normal">;</font></br>
416&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
417&nbsp;<font class="Normal">}</font></br>
418&nbsp;</br>
<a name="419"></a>419&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">WriteText</font><font class="Normal">&nbsp;{</font></br>
420&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font></br>
421&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">@call</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">WriteText2Call</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
<a name="422"></a>422&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="DataType">@call</font><font class="Normal">))&nbsp;{</font></br>
423&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">WriteText</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font></br>
424&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font></br>
425&nbsp;<font class="Normal">}</font></br>
426&nbsp;</br>
<a name="427"></a>427&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">WriteText2Call</font><font class="Normal">&nbsp;{</font></br>
428&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font></br>
429&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="Operator">'</font><font class="String">write</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetInsertionPoint</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DecVal">0</font><font class="Normal">);</font></br>
430&nbsp;<font class="Normal">}</font></br>
431&nbsp;</br>
432&nbsp;</br>
433&nbsp;<font class="DecVal">1</font><font class="Normal">;</font></br>
434&nbsp;<font class="Keyword">__END__</font></br>
</div>
</body>
</html>
