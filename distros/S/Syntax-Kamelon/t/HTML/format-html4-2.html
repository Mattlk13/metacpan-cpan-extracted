<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<style>#content {
  width: 944px;
  font-family: "Monospace";
  font-size: 1em;
  background: #3f3f3f;
  color: White;
  padding: 20px;
  height: 100%;
  margin-left: auto;
  margin-right: auto;
}
font.Alert {
	color: Yellow;
	font-weight: bold;
}
font.Annotation {
   color: Yellow;
	font-style: italic;
}
font.Attribute {
   color: LightPink;
}
font.BaseN {
   color: Gold;
}
font.BuiltIn {
   color: Coral;
}
font.Char {
   color: Cyan;
}
font.Comment {
   color: Beige;
	font-style: italic;
}
font.CommentVar {
   color: LightBlue;
	font-style: italic;
}
font.Constant {
   color: White;
	font-weight: bold;
}
font.ControlFlow {
   color: DeepPink;
}
font.DataType {
   color: CadetBlue;
}
font.DecVal {
   color: MediumPurple;
	font-weight: bold;
}
font.Documentation {
   color: Gold;
	font-style: italic;
}
font.Error {
   color: Red;
	font-weight: bold;
}
font.Extension {
   color: DarkGray;
	font-weight: bold;
}
font.Float {
   color: DarkViolet;
	font-weight: bold;
}
font.Function {
   color: RosyBrown;
}
font.Import {
   color: PaleVioletRed;
}
font.Information {
   color: LightGreen;
	font-style: italic;
}
font.Keyword {
   color: LightGreen;
	font-weight: bold;
}
font.Normal {
   color: White;
}
font.Operator {
   color: Magenta;
}
font.Others {
   color: GreenYellow;
}
font.Preprocessor {
   color: DarkSeaGreen ;
	font-weight: bold;
}
font.RegionMarker {
   color: Plum;
}
font.SpecialChar {
   color: Plum;
	font-weight: bold;
}
font.SpecialString {
   color: LightBlue;
}
font.String {
   color: MediumAquaMarine;
}
font.Variable {
   color: Turquoise;
	font-weight: bold;
}
font.VerbatimString {
   color: LightSkyBlue;
}
font.Warning {
   color: Brown;
	font-weight: bold;
}

</style>
<title>Testing line numbers</title>
</head>
<body>

<div id="content">
0001&nbsp;<font class="Keyword">package</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">;</font><br>
0002&nbsp;<br>
0003&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Keyword">strict</font><font class="Normal">;</font><br>
0004&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Keyword">warnings</font><font class="Normal">;</font><br>
0005&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;Carp;</font><br>
0006&nbsp;<br>
0007&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Keyword">vars</font><font class="Normal">&nbsp;</font><font class="Operator">qw(</font><font class="Normal">$VERSION</font><font class="Operator">)</font><font class="Normal">;</font><br>
0008&nbsp;<font class="DataType">$VERSION</font><font class="Normal">=</font><font class="Operator">&quot;</font><font class="SpecialString">0.01</font><font class="Operator">&quot;</font><font class="Normal">;</font><br>
0009&nbsp;<br>
0010&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;Wx&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;:textctrl&nbsp;:font&nbsp;:colour&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font><br>
0011&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Function">Wx::DND</font><font class="Normal">;</font><br>
0012&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;Wx&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;wxTheClipboard&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font><br>
0013&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;base&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;Wx::TextCtrl&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font><br>
0014&nbsp;<font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Function">Wx::Event</font><font class="Normal">&nbsp;</font><font class="Operator">qw(</font><font class="Normal">&nbsp;EVT_CHAR&nbsp;</font><font class="Operator">)</font><font class="Normal">;</font><br>
0015&nbsp;<br>
0016&nbsp;<font class="Function">require</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">::</font><font class="Function">KeyEchoes</font><font class="Normal">;</font><br>
0017&nbsp;<font class="Function">require</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">::</font><font class="Function">UndoRedo</font><font class="Normal">;</font><br>
0018&nbsp;<font class="Function">require</font><font class="Normal">&nbsp;</font><font class="Function">Syntax::Kamelon</font><font class="Normal">::</font><font class="Function">Wx</font><font class="Normal">::</font><font class="Function">PluggableTextCtrl</font><font class="Normal">::</font><font class="Function">Highlighter</font><font class="Normal">;</font><br>
0019&nbsp;<br>
0020&nbsp;<font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$defaultfont</font><font class="Normal">&nbsp;=&nbsp;[</font><font class="DecVal">10</font><font class="Normal">,&nbsp;wxFONTFAMILY_MODERN,&nbsp;wxFONTSTYLE_NORMAL,&nbsp;wxFONTWEIGHT_NORMAL,&nbsp;</font><font class="DecVal">0</font><font class="Normal">];</font><br>
0021&nbsp;<br>
0022&nbsp;<font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$debug</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font><br>
0023&nbsp;<br>
0024&nbsp;<font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{</font><br>
0025&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Function">use</font><font class="Normal">&nbsp;</font><font class="Function">Data::Dumper</font><font class="Normal">;</font><br>
0026&nbsp;<font class="Normal">}</font><br>
0027&nbsp;<br>
0028&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">new</font><font class="Normal">&nbsp;{</font><br>
0029&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$class</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0030&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$class</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">new</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0031&nbsp;<br>
0032&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{CALLBACK}&nbsp;=&nbsp;</font><font class="Keyword">sub&nbsp;</font><font class="Normal">{};</font><br>
0033&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}&nbsp;=&nbsp;{</font><br>
0034&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Operator">'</font><font class="String">doremove</font><font class="Operator">'</font><font class="Normal">&nbsp;=&gt;&nbsp;\&amp;DoRemove,</font><br>
0035&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Operator">'</font><font class="String">doreplace</font><font class="Operator">'</font><font class="Normal">&nbsp;=&gt;&nbsp;\&amp;DoReplace,</font><br>
0036&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Operator">'</font><font class="String">dowrite</font><font class="Operator">'</font><font class="Normal">&nbsp;=&gt;&nbsp;\&amp;DoWrite,</font><br>
0037&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;};</font><br>
0038&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING}&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font><br>
0039&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><br>
0040&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{OVRMODE}&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font><br>
0041&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS}&nbsp;=&nbsp;[];</font><br>
0042&nbsp;<br>
0043&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetFont</font><font class="Normal">(&nbsp;</font><font class="Function">Wx::Font</font><font class="Normal">-&gt;new(</font><font class="DataType">@$defaultfont</font><font class="Normal">)&nbsp;);</font><br>
0044&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;EVT_CHAR(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;\&amp;OnChar);</font><br>
0045&nbsp;<br>
0046&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">;</font><br>
0047&nbsp;<font class="Normal">}</font><br>
0048&nbsp;<br>
0049&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">AppendText</font><font class="Normal">&nbsp;{</font><br>
0050&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0051&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">append</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font><br>
0052&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Append</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0053&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0054&nbsp;<font class="Normal">}</font><br>
0055&nbsp;<br>
0056&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Broadcast</font><font class="Normal">&nbsp;{</font><br>
0057&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0058&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plugs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font><br>
0059&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$flag</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font><br>
0060&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">foreach</font><font class="Normal">&nbsp;(</font><font class="DataType">@$plugs</font><font class="Normal">)&nbsp;{</font><br>
0061&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Preprocessor">$_</font><font class="Normal">-&gt;</font><font class="DataType">Receive</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font><br>
0062&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$flag</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">1</font><font class="Normal">;</font><br>
0063&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
0064&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0065&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$flag</font><font class="Normal">;</font><br>
0066&nbsp;<font class="Normal">}</font><br>
0067&nbsp;<br>
0068&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Call2Remove</font><font class="Normal">&nbsp;{</font><br>
0069&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$call</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0070&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$call</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">remove</font><font class="Char">$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font><br>
0071&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">))</font><br>
0072&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font><br>
0073&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Call&nbsp;'</font><font class="DataType">$call</font><font class="Operator">'</font><font class="SpecialString">&nbsp;is&nbsp;not&nbsp;a&nbsp;remove&nbsp;type</font><font class="Operator">&quot;</font><font class="Normal">;</font><br>
0074&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font><br>
0075&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0076&nbsp;<font class="Normal">}</font><br>
0077&nbsp;<br>
0078&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Call2Replace</font><font class="Normal">&nbsp;{</font><br>
0079&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$call</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$old</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0080&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$call</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">replace</font><font class="Char">$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font><br>
0081&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$old</font><font class="Normal">),&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)</font><br>
0082&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font><br>
0083&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Call&nbsp;'</font><font class="DataType">$call</font><font class="Operator">'</font><font class="SpecialString">&nbsp;is&nbsp;not&nbsp;a&nbsp;replace&nbsp;type</font><font class="Operator">&quot;</font><font class="Normal">;</font><br>
0084&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font><br>
0085&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0086&nbsp;<font class="Normal">}</font><br>
0087&nbsp;<br>
0088&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Call2WriteText</font><font class="Normal">&nbsp;{</font><br>
0089&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$call</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0090&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$call</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">write</font><font class="Char">$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font><br>
0091&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$txt</font><br>
0092&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font><br>
0093&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Call&nbsp;'</font><font class="DataType">$call</font><font class="Operator">'</font><font class="SpecialString">&nbsp;is&nbsp;not&nbsp;a&nbsp;write&nbsp;type</font><font class="Operator">&quot;</font><font class="Normal">;</font><br>
0094&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font><br>
0095&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0096&nbsp;<font class="Normal">}</font><br>
0097&nbsp;<br>
0098&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Callback</font><font class="Normal">&nbsp;{</font><br>
0099&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0100&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{CALLBACK}&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;&nbsp;}</font><br>
0101&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{CALLBACK};</font><br>
0102&nbsp;<font class="Normal">}</font><br>
0103&nbsp;<br>
0104&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">CanUndo</font><font class="Normal">&nbsp;{</font><br>
0105&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0106&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">canundo</font><font class="Operator">'</font><font class="Normal">);</font><br>
0107&nbsp;<font class="Normal">}</font><br>
0108&nbsp;<br>
0109&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">CanRedo</font><font class="Normal">&nbsp;{</font><br>
0110&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0111&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">canredo</font><font class="Operator">'</font><font class="Normal">);</font><br>
0112&nbsp;<font class="Normal">}</font><br>
0113&nbsp;<br>
0114&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Clear</font><font class="Normal">&nbsp;{</font><br>
0115&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0116&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">clear</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font><br>
0117&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Clear</font><font class="Normal">;</font><br>
0118&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0119&nbsp;<font class="Normal">}</font><br>
0120&nbsp;<br>
0121&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">ClearSelection</font><font class="Normal">&nbsp;{</font><br>
0122&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0123&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$ins</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetInsertionPoint</font><font class="Normal">;</font><br>
0124&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetSelection</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">);</font><br>
0125&nbsp;<font class="Normal">}</font><br>
0126&nbsp;<br>
0127&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Command</font><font class="Normal">&nbsp;{</font><br>
0128&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0129&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0130&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}</font><font class="Operator">-</font><font class="Normal">&gt;{</font><font class="DataType">$name</font><font class="Normal">}&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">&nbsp;}</font><br>
0131&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}</font><font class="Operator">-</font><font class="Normal">&gt;{</font><font class="DataType">$name</font><font class="Normal">}</font><br>
0132&nbsp;<font class="Normal">}</font><br>
0133&nbsp;<br>
0134&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Copy</font><font class="Normal">&nbsp;{</font><br>
0135&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0136&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">copy</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font><br>
0137&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Copy</font><font class="Normal">;</font><br>
0138&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0139&nbsp;<font class="Normal">}</font><br>
0140&nbsp;<br>
0141&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Cut</font><font class="Normal">&nbsp;{</font><br>
0142&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0143&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">cut</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font><br>
0144&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Cut</font><font class="Normal">;</font><br>
0145&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0146&nbsp;<font class="Normal">}</font><br>
0147&nbsp;<br>
0148&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">DoRemove</font><font class="Normal">&nbsp;{</font><br>
0149&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0150&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0151&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">ClearSelection</font><font class="Normal">;</font><br>
0152&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Remove</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">));</font><br>
0153&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">))&nbsp;{</font><br>
0154&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">);</font><br>
0155&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0156&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font><br>
0157&nbsp;<font class="Normal">}</font><br>
0158&nbsp;<br>
0159&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">DoReplace</font><font class="Normal">&nbsp;{</font><br>
0160&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$old</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0161&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">ClearSelection</font><font class="Normal">;</font><br>
0162&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Replace</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$old</font><font class="Normal">),&nbsp;</font><font class="DataType">$txt</font><font class="Normal">);</font><br>
0163&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$sel</font><font class="Normal">)&nbsp;{</font><br>
0164&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetSelection</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">));</font><br>
0165&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0166&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">))&nbsp;{</font><br>
0167&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">);</font><br>
0168&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0169&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font><br>
0170&nbsp;<font class="Normal">}</font><br>
0171&nbsp;<br>
0172&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">DoWrite</font><font class="Normal">&nbsp;{</font><br>
0173&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$sel</font><font class="Normal">,&nbsp;</font><font class="DataType">$ins</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0174&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">ClearSelection</font><font class="Normal">;</font><br>
0175&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">);</font><br>
0176&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">WriteText</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">);</font><br>
0177&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$sel</font><font class="Normal">)&nbsp;{</font><br>
0178&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetSelection</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;+&nbsp;</font><font class="Function">length</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">));</font><br>
0179&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0180&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">))&nbsp;{</font><br>
0181&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SetInsertionPoint</font><font class="Normal">(</font><font class="DataType">$ins</font><font class="Normal">);</font><br>
0182&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0183&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font><br>
0184&nbsp;<font class="Normal">}</font><br>
0185&nbsp;<br>
0186&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">FindPluginId</font><font class="Normal">&nbsp;{</font><br>
0187&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$name</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0188&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font><br>
0189&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font><br>
0190&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">foreach</font><font class="Normal">&nbsp;(</font><font class="DataType">@$plgs</font><font class="Normal">)&nbsp;{</font><br>
0191&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$name</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">-&gt;[</font><font class="DataType">$index</font><font class="Normal">]</font><font class="Operator">-</font><font class="Normal">&gt;Name)&nbsp;{</font><br>
0192&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$index</font><br>
0193&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
0194&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;++;</font><br>
0195&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0196&nbsp;<font class="Comment">#&nbsp;&nbsp;&nbsp;carp&nbsp;&quot;Plugin&nbsp;$name&nbsp;is&nbsp;not&nbsp;loaded\n&quot;;</font><br>
0197&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font><br>
0198&nbsp;<font class="Normal">}</font><br>
0199&nbsp;<br>
0200&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">FindPlugin</font><font class="Normal">&nbsp;{</font><br>
0201&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$name</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0202&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font><br>
0203&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">foreach</font><font class="Normal">&nbsp;(</font><font class="DataType">@$plgs</font><font class="Normal">)&nbsp;{</font><br>
0204&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$name</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="Preprocessor">$_</font><font class="Normal">-&gt;</font><font class="DataType">Name</font><font class="Normal">)&nbsp;{</font><br>
0205&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Preprocessor">$_</font><br>
0206&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
0207&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0208&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font><br>
0209&nbsp;<font class="Normal">}</font><br>
0210&nbsp;<br>
0211&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">GetClipboardText</font><font class="Normal">&nbsp;{</font><br>
0212&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0213&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$txt</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font><br>
0214&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(wxTheClipboard-&gt;Open)&nbsp;{</font><br>
0215&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Clipboard&nbsp;open</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font><br>
0216&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$textdata</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">Wx::TextDataObject</font><font class="Normal">-&gt;new;</font><br>
0217&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$ok</font><font class="Normal">&nbsp;=&nbsp;wxTheClipboard-&gt;GetData(&nbsp;</font><font class="DataType">$textdata</font><font class="Normal">&nbsp;);</font><br>
0218&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">(&nbsp;</font><font class="DataType">$ok</font><font class="Normal">&nbsp;)&nbsp;{</font><br>
0219&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$txt</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$textdata</font><font class="Normal">-&gt;</font><font class="DataType">GetText</font><font class="Normal">;</font><br>
0220&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
0221&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$txt</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Clipboard&nbsp;text:&nbsp;</font><font class="DataType">$txt</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font><br>
0222&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wxTheClipboard-&gt;Close;</font><br>
0223&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0224&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$txt</font><font class="Normal">;</font><br>
0225&nbsp;<font class="Normal">}</font><br>
0226&nbsp;<br>
0227&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">GetLineNumber</font><font class="Normal">&nbsp;{</font><br>
0228&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$index</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0229&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="DataType">$index</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetInsertionPoint</font><font class="Normal">&nbsp;};</font><br>
0230&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$col</font><font class="Normal">,&nbsp;</font><font class="DataType">$line</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">PositionToXY</font><font class="Normal">(</font><font class="DataType">$index</font><font class="Normal">);</font><br>
0231&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$line</font><font class="Normal">;</font><br>
0232&nbsp;<font class="Normal">}</font><br>
0233&nbsp;<br>
0234&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">HasSelection</font><font class="Normal">&nbsp;{</font><br>
0235&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0236&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">,&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetSelection</font><font class="Normal">;</font><br>
0237&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">&nbsp;</font><font class="Operator">ne</font><font class="Normal">&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)</font><br>
0238&nbsp;<font class="Normal">}</font><br>
0239&nbsp;<br>
0240&nbsp;<font class="Comment">#&nbsp;</font><font class="Alert">TODO</font><font class="Comment">&nbsp;make&nbsp;this&nbsp;unicode&nbsp;compatible</font><br>
0241&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">IsWriteable</font><font class="Normal">&nbsp;{</font><br>
0242&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$key</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0243&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(((</font><font class="DataType">$key</font><font class="Normal">&nbsp;&gt;=&nbsp;</font><font class="DecVal">32</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$key</font><font class="Normal">&nbsp;&lt;&nbsp;</font><font class="DecVal">127</font><font class="Normal">))&nbsp;</font><font class="Operator">or</font><font class="Normal">&nbsp;((</font><font class="DataType">$key</font><font class="Normal">&nbsp;&gt;&nbsp;</font><font class="DecVal">127</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$key</font><font class="Normal">&nbsp;&lt;&nbsp;</font><font class="DecVal">256</font><font class="Normal">)))&nbsp;{</font><br>
0244&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">1</font><br>
0245&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0246&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">0</font><br>
0247&nbsp;<font class="Normal">}</font><br>
0248&nbsp;<br>
0249&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Listening</font><font class="Normal">&nbsp;{</font><br>
0250&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0251&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{</font><br>
0252&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$new</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0253&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$new</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING})&nbsp;{</font><br>
0254&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font><br>
0255&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$new</font><font class="Normal">)&nbsp;{</font><br>
0256&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Function">unshift</font><font class="Normal">&nbsp;</font><font class="DataType">@$plgs</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font><br>
0257&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font><br>
0258&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Function">shift</font><font class="Normal">&nbsp;</font><font class="DataType">@$plgs</font><br>
0259&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
0260&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING}&nbsp;=&nbsp;</font><font class="DataType">$new</font><br>
0261&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
0262&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0263&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{LISTENING}</font><br>
0264&nbsp;<font class="Normal">}</font><br>
0265&nbsp;<br>
0266&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">LoadFile</font><font class="Normal">&nbsp;{</font><br>
0267&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0268&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">load</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font><br>
0269&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">LoadFile</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0270&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0271&nbsp;<font class="Normal">}</font><br>
0272&nbsp;<br>
0273&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">LoadPlugin</font><font class="Normal">&nbsp;{</font><br>
0274&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0275&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plug</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">undef</font><font class="Normal">;</font><br>
0276&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0277&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Comment">#Does&nbsp;anybody&nbsp;have&nbsp;a&nbsp;better&nbsp;idea&nbsp;for&nbsp;this?</font><br>
0278&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">Syntax::Kamelon::Wx::PluggableTextCtrl::</font><font class="DataType">$name</font><font class="Operator">&quot;</font><font class="Normal">;</font><br>
0279&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$plug</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$name</font><font class="Normal">-&gt;</font><font class="DataType">new</font><font class="Normal">(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0280&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">defined</font><font class="Normal">(</font><font class="DataType">$plug</font><font class="Normal">))&nbsp;{</font><br>
0281&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">RegisterPlugin</font><font class="Normal">(</font><font class="DataType">$plug</font><font class="Normal">);</font><br>
0282&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font><br>
0283&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carp&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">unable&nbsp;to&nbsp;load&nbsp;plugin&nbsp;</font><font class="DataType">$name</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">;</font><br>
0284&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0285&nbsp;<font class="Normal">}</font><br>
0286&nbsp;<br>
0287&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Name</font><font class="Normal">&nbsp;{</font><br>
0288&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0289&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">ref</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">;</font><br>
0290&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=~</font><font class="Operator">s/</font><font class="Others">.</font><font class="Char">*</font><font class="Others">::</font><font class="Operator">//</font><font class="Normal">;</font><br>
0291&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">plugin&nbsp;name&nbsp;is&nbsp;</font><font class="DataType">$name</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font><br>
0292&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><br>
0293&nbsp;<font class="Normal">}</font><br>
0294&nbsp;<br>
0295&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">OnChar</font><font class="Normal">&nbsp;{</font><br>
0296&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$event</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0297&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$k</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$event</font><font class="Normal">-&gt;</font><font class="DataType">GetKeyCode</font><font class="Normal">;</font><br>
0298&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$k</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DecVal">322</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Comment">#Insert&nbsp;key&nbsp;pressed,&nbsp;record&nbsp;flip&nbsp;insert/ovr&nbsp;mode.</font><br>
0299&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">OvrMode</font><font class="Normal">)&nbsp;{</font><br>
0300&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">OvrMode</font><font class="Normal">(</font><font class="DecVal">0</font><font class="Normal">)</font><br>
0301&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</font><font class="Keyword">else</font><font class="Normal">&nbsp;{</font><br>
0302&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">OvrMode</font><font class="Normal">(</font><font class="DecVal">1</font><font class="Normal">)</font><br>
0303&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</font><br>
0304&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0305&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">key</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$event</font><font class="Normal">))&nbsp;{</font><br>
0306&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$event</font><font class="Normal">-&gt;</font><font class="DataType">Skip</font><font class="Normal">;</font><br>
0307&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0308&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$callback</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Callback</font><font class="Normal">;</font><br>
0309&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&amp;</font><font class="DataType">$callback</font><font class="Normal">;</font><br>
0310&nbsp;<font class="Normal">}</font><br>
0311&nbsp;<br>
0312&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">OvrMode</font><font class="Normal">&nbsp;{</font><br>
0313&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0314&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{OVRMODE}&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;&nbsp;}</font><br>
0315&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{OVRMODE};</font><br>
0316&nbsp;<font class="Normal">}</font><br>
0317&nbsp;<br>
0318&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Paste</font><font class="Normal">&nbsp;{</font><br>
0319&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0320&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">paste</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font><br>
0321&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Paste</font><font class="Normal">;</font><br>
0322&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0323&nbsp;<font class="Normal">}</font><br>
0324&nbsp;<br>
0325&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Plugin</font><font class="Normal">&nbsp;{</font><br>
0326&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0327&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$id</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0328&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$plgs</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font><br>
0329&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$id</font><font class="Normal">&nbsp;=~&nbsp;</font><font class="Operator">/</font><font class="Char">^</font><font class="BaseN">\d</font><font class="Char">+$</font><font class="Operator">/</font><font class="Normal">)&nbsp;{</font><br>
0330&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$id</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">FindPluginId</font><font class="Normal">(</font><font class="DataType">$id</font><font class="Normal">);</font><br>
0331&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0332&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">@_</font><font class="Normal">)&nbsp;{&nbsp;</font><br>
0333&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS}</font><font class="Operator">-</font><font class="Normal">&gt;[</font><font class="DataType">$id</font><font class="Normal">]&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;&nbsp;</font><br>
0334&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0335&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS}</font><font class="Operator">-</font><font class="Normal">&gt;[</font><font class="DataType">$id</font><font class="Normal">];</font><br>
0336&nbsp;<font class="Normal">}</font><br>
0337&nbsp;<br>
0338&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Receive</font><font class="Normal">&nbsp;{</font><br>
0339&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0340&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$name</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0341&nbsp;<font class="Comment">#&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;($debug)&nbsp;{&nbsp;print&nbsp;&quot;received&nbsp;$name\n&quot;;&nbsp;print&nbsp;Dumper&nbsp;$self-&gt;{COMMANDS}&nbsp;}</font><br>
0342&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="Function">exists</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{COMMANDS}</font><font class="Operator">-</font><font class="Normal">&gt;{</font><font class="DataType">$name</font><font class="Normal">})&nbsp;{</font><br>
0343&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;(</font><font class="DataType">$debug</font><font class="Normal">)&nbsp;{&nbsp;</font><font class="Function">print</font><font class="Normal">&nbsp;</font><font class="Operator">&quot;</font><font class="SpecialString">executing&nbsp;</font><font class="DataType">$name</font><font class="Char">\n</font><font class="Operator">&quot;</font><font class="Normal">&nbsp;}</font><br>
0344&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$cmd</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Command</font><font class="Normal">(</font><font class="DataType">$name</font><font class="Normal">);</font><br>
0345&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;&amp;</font><font class="DataType">$cmd</font><font class="Normal">(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0346&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0347&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DecVal">0</font><br>
0348&nbsp;<font class="Normal">}</font><br>
0349&nbsp;<br>
0350&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Redo</font><font class="Normal">&nbsp;{</font><br>
0351&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0352&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">redo</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font><br>
0353&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Redo</font><font class="Normal">;</font><br>
0354&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0355&nbsp;<font class="Normal">}</font><br>
0356&nbsp;<br>
0357&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">RegisterPlugin</font><font class="Normal">&nbsp;{</font><br>
0358&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$plug</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0359&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$pl</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;{PLUGINS};</font><br>
0360&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Function">push</font><font class="Normal">&nbsp;</font><font class="DataType">@$pl</font><font class="Normal">,&nbsp;</font><font class="DataType">$plug</font><font class="Normal">;</font><br>
0361&nbsp;<font class="Normal">}</font><br>
0362&nbsp;<br>
0363&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Remove</font><font class="Normal">&nbsp;{</font><br>
0364&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0365&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">@call</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Remove2Call</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0366&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="DataType">@call</font><font class="Normal">))&nbsp;{</font><br>
0367&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Remove</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0368&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0369&nbsp;<font class="Normal">}</font><br>
0370&nbsp;<br>
0371&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Remove2Call</font><font class="Normal">&nbsp;{</font><br>
0372&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0373&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font><br>
0374&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">,&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetSelection</font><font class="Normal">;</font><br>
0375&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;((</font><font class="DataType">$selb</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$begin</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$sele</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$end</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">1</font><font class="Normal">&nbsp;}</font><br>
0376&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="Operator">'</font><font class="String">remove</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetRange</font><font class="Normal">(</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">),&nbsp;</font><font class="DataType">$sel</font><font class="Normal">)</font><br>
0377&nbsp;<font class="Normal">}</font><br>
0378&nbsp;<br>
0379&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Replace</font><font class="Normal">&nbsp;{</font><br>
0380&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0381&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">@call</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Replace2Call</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0382&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="DataType">@call</font><font class="Normal">))&nbsp;{</font><br>
0383&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Replace</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0384&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0385&nbsp;<font class="Normal">}</font><br>
0386&nbsp;<br>
0387&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Replace2Call</font><font class="Normal">&nbsp;{</font><br>
0388&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0389&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">0</font><font class="Normal">;</font><br>
0390&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$selb</font><font class="Normal">,&nbsp;</font><font class="DataType">$sele</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetSelection</font><font class="Normal">;</font><br>
0391&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">if</font><font class="Normal">&nbsp;((</font><font class="DataType">$selb</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$begin</font><font class="Normal">)&nbsp;</font><font class="Operator">and</font><font class="Normal">&nbsp;(</font><font class="DataType">$sele</font><font class="Normal">&nbsp;</font><font class="Operator">eq</font><font class="Normal">&nbsp;</font><font class="DataType">$end</font><font class="Normal">))&nbsp;{&nbsp;</font><font class="DataType">$sel</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DecVal">1</font><font class="Normal">&nbsp;}</font><br>
0392&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="Operator">'</font><font class="String">replace</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetRange</font><font class="Normal">(</font><font class="DataType">$begin</font><font class="Normal">,&nbsp;</font><font class="DataType">$end</font><font class="Normal">),&nbsp;</font><font class="DataType">$sel</font><font class="Normal">)</font><br>
0393&nbsp;<font class="Normal">}</font><br>
0394&nbsp;<br>
0395&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">SaveFile</font><font class="Normal">&nbsp;{</font><br>
0396&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0397&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">save</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">))&nbsp;{</font><br>
0398&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">SaveFile</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0399&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0400&nbsp;<font class="Normal">}</font><br>
0401&nbsp;<br>
0402&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">NativePlugins</font><font class="Normal">&nbsp;{</font><br>
0403&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0404&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="Operator">qw[</font><font class="Normal">&nbsp;Highlighter&nbsp;KeyEchoes&nbsp;UndoRedo&nbsp;&nbsp;&nbsp;</font><font class="Operator">]</font><br>
0405&nbsp;<font class="Normal">}</font><br>
0406&nbsp;<br>
0407&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Syntax</font><font class="Normal">&nbsp;{</font><br>
0408&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0409&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">syntax</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0410&nbsp;<font class="Normal">}</font><br>
0411&nbsp;<br>
0412&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">Undo</font><font class="Normal">&nbsp;{</font><br>
0413&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0414&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="Operator">'</font><font class="String">undo</font><font class="Operator">'</font><font class="Normal">))&nbsp;{</font><br>
0415&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">Undo</font><font class="Normal">;</font><br>
0416&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0417&nbsp;<font class="Normal">}</font><br>
0418&nbsp;<br>
0419&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">WriteText</font><font class="Normal">&nbsp;{</font><br>
0420&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">$self</font><font class="Normal">&nbsp;=&nbsp;</font><font class="Function">shift</font><font class="Normal">;</font><br>
0421&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;</font><font class="DataType">@call</font><font class="Normal">&nbsp;=&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">WriteText2Call</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0422&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">unless</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">Broadcast</font><font class="Normal">(</font><font class="DataType">@call</font><font class="Normal">))&nbsp;{</font><br>
0423&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">SUPER</font><font class="Normal">::</font><font class="DataType">WriteText</font><font class="Normal">(</font><font class="DataType">@_</font><font class="Normal">);</font><br>
0424&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;}</font><br>
0425&nbsp;<font class="Normal">}</font><br>
0426&nbsp;<br>
0427&nbsp;<font class="Keyword">sub&nbsp;</font><font class="Function">WriteText2Call</font><font class="Normal">&nbsp;{</font><br>
0428&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">my</font><font class="Normal">&nbsp;(</font><font class="DataType">$self</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">)&nbsp;=&nbsp;</font><font class="DataType">@_</font><font class="Normal">;</font><br>
0429&nbsp;<font class="Normal">&nbsp;&nbsp;&nbsp;</font><font class="Keyword">return</font><font class="Normal">&nbsp;(</font><font class="Operator">'</font><font class="String">write</font><font class="Operator">'</font><font class="Normal">,&nbsp;</font><font class="DataType">$self</font><font class="Normal">-&gt;</font><font class="DataType">GetInsertionPoint</font><font class="Normal">,&nbsp;</font><font class="DataType">$txt</font><font class="Normal">,&nbsp;</font><font class="DecVal">0</font><font class="Normal">);</font><br>
0430&nbsp;<font class="Normal">}</font><br>
0431&nbsp;<br>
0432&nbsp;<br>
0433&nbsp;<font class="DecVal">1</font><font class="Normal">;</font><br>
0434&nbsp;<font class="Keyword">__END__</font><br>
</div>
</body>
</html>

